!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.UserList=e():t.UserList=e()}(window,(function(){return function(t){function e(e){for(var n,o,s=e[0],r=e[1],a=0,c=[];a<s.length;a++)o=s[a],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&c.push(i[o][0]),i[o]=0;for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n]);for(u&&u(e);c.length;)c.shift()()}var n={},i={0:0};function o(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.e=function(t){var e=[],n=i[t];if(0!==n)if(n)e.push(n[2]);else{var s=new Promise((function(e,o){n=i[t]=[e,o]}));e.push(n[2]=s);var r,a=document.createElement("script");a.charset="utf-8",a.timeout=120,o.nc&&a.setAttribute("nonce",o.nc),a.src=function(t){return o.p+""+{1:"2c7c294de6b936a6e894",2:"938fd98463b1e949a2fe",3:"0b41c3d5e79a4a2023fb",4:"6e5f5edaea6ab5c6c8ee"}[t]+".js"}(t);var u=new Error;r=function(e){a.onerror=a.onload=null,clearTimeout(c);var n=i[t];if(0!==n){if(n){var o=e&&("load"===e.type?"missing":e.type),s=e&&e.target&&e.target.src;u.message="Loading chunk "+t+" failed.\n("+o+": "+s+")",u.name="ChunkLoadError",u.type=o,u.request=s,n[1](u)}i[t]=void 0}};var c=setTimeout((function(){r({type:"timeout",target:a})}),12e4);a.onerror=a.onload=r,document.head.appendChild(a)}return Promise.all(e)},o.m=t,o.c=n,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(n,i,function(e){return t[e]}.bind(null,i));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="./",o.oe=function(t){throw console.error(t),t};var s=window.webpackJsonpUserList=window.webpackJsonpUserList||[],r=s.push.bind(s);s.push=e,s=s.slice();for(var a=0;a<s.length;a++)e(s[a]);var u=r;return o(o.s=5)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var o=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return i(t,[{key:"initElement",value:function(t,e,n,i,o){var s;for(s in t=t.createElement(e),n=n||{})t[s]=n[s];return o&&"iframe"!==e&&(t.innerHTML=o),i&&(t.style.cssText=i),t}},{key:"getDocument",value:function(t){return t.contentWindow?t.contentWindow.document:t.contentDocument?t.contentDocument:t.document?t.document:null}},{key:"removeById",value:function(t){return!!(EObj=document.getElementById(t))&&EObj.parentNode.removeChild(EObj)}},{key:"getTzOffset",value:function(){Date.prototype.stdTimezoneOffset=function(){var t=new Date(this.getFullYear(),0,1),e=new Date(this.getFullYear(),6,1);return Math.max(t.getTimezoneOffset(),e.getTimezoneOffset())},Date.prototype.dst=function(){return this.getTimezoneOffset()<this.stdTimezoneOffset()};var t=new Date;return(t.dst()?t.getTimezoneOffset():t.getTimezoneOffset()-60)/60*-1}},{key:"getAbstractStyle",value:function(t){return["outline:                    "+(t.outline?t.outline:"none")+" !important; ","visibility:                 "+(t.visibility?t.visibility:"visible")+" !important; ","resize:                     "+(t.resize?t.resize:"none")+" !important; ","box-shadow:                 "+(t.boxshadow?t.boxshadow:"none")+" !important; ","overflow:                   "+(t.overflow?t.overflow:"visible")+" !important; ","background                  : "+(t.background?t.background:"none")+" !important; ","opacity                     : "+(t.opacity?t.opacity:"1")+" !important; ","filter                      : alpha(opacity="+(t.opacity?100*t.opacity:"100")+") !important; ","-ms-filter                  : progid:DXImageTransform.Microsoft.Alpha(Opacity"+(t.opacity?t.opacity:"1")+") !important; ","-moz-opacity                : "+(t.opacity?t.opacity:"1")+" !important; ","-khtml-opacity              : "+(t.opacity?t.opacity:"1")+" !important; ","top                         : "+(t.top?t.top:"auto")+" !important; ","right                       : "+(t.right?t.right:"auto")+" !important; ","bottom                      : "+(t.bottom?t.bottom:"auto")+" !important; ","left                        : "+(t.left?t.left:"auto")+" !important; ","position                    : "+(t.position?t.position:"absolute")+" !important; ","border                      : "+(t.border?t.border:"0")+" !important; ","min-height                  : "+(t.minheight?t.minheight:"auto")+" !important; ","min-width                   : "+(t.minwidth?t.minwidth:"auto")+" !important; ","max-height                  : "+(t.maxheight?t.maxheight:"none")+" !important; ","max-width                   : "+(t.maxwidth?t.maxwidth:"none")+" !important; ","padding                     : "+(t.padding?t.padding:"0")+" !important; ","margin                      : "+(t.margin?t.margin:"0")+" !important; ","-moz-transition-property    : "+(t.transition?t.transition:"none")+" !important; ","-webkit-transition-property : "+(t.transition?t.transition:"none")+" !important; ","-o-transition-property      : "+(t.transition?t.transition:"none")+" !important; ","transition-property         : "+(t.transition?t.transition:"none")+" !important; ","transform                   : "+(t.transform?t.transform:"none")+" !important; ","-webkit-transform           : "+(t.transform?t.transform:"none")+" !important; ","-ms-transform               : "+(t.transform?t.transform:"none")+" !important; ","width                       : "+(t.width?t.width:"auto")+" !important; ","height                      : "+(t.height?t.height:"auto")+" !important; ","display                     : "+(t.display?t.display:"block")+" !important; ","z-index                     : "+(t.zindex?t.zindex:"none")+" !important; ","background-color            : "+(t.backgroundcolor?t.backgroundcolor:"transparent")+" !important; ","cursor                      : "+(t.cursor?t.cursor:"auto")+" !important; ","float                       : "+(t.float?t.float:"none")+" !important; ","border-radius               : "+(t.borderRadius?t.borderRadius:"unset")+" !important; "].join("").replace(/\s/gm,"")}},{key:"hasClass",value:function(t,e){return t.classList?t.classList.contains(e):!!t.className.match(RegExp("(\\s|^)"+e+"(\\s|$)"))}},{key:"addClass",value:function(t,e){t.classList?t.classList.add(e):this.hasClass(t,e)||(t.className+=" "+e)}},{key:"removeClass",value:function(t,e){t.classList?t.classList.remove(e):this.hasClass(t,e)&&(t.className=t.className.replace(RegExp("(\\s|^)"+e+"(\\s|$)")," "))}},{key:"makeScreenshot",value:function(t,e){var n=this;if("undefined"==typeof html2canvas){var i=document.getElementsByTagName("head")[0],o=document.createElement("script");o.setAttribute("type","text/javascript"),o.setAttribute("src",t),i.appendChild(o),o.onreadystatechange=o.onload=function(){n.makeScreenshot(t,e)}}else try{html2canvas(document.body,{onrendered:function(t){var n=new XMLHttpRequest;n.open("POST",e,!0),n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.send("data="+encodeURIComponent(t.toDataURL()))}})}catch(t){}}},{key:"makeQuery",value:function(t){var e,n=[];for(e in t)""!=t[e]&&null!=t[e]&&t.hasOwnProperty(e)&&n.push(encodeURIComponent(e)+"="+encodeURIComponent(t[e]));return n.join("&")}},{key:"makeRequest",value:function(t,e,n){var i=new XMLHttpRequest;return i.open("GET",t+"?"+this.makeQuery(e.params),!0),i.onreadystatechange=function(){4==i.readyState&&n(JSON.parse(i.responseText))},i.send(),{type:"xhr",req:i}}}]),t}());e.helperFunctions=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var o=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.events={}}return i(t,[{key:"attachEvent",value:function(t,e,n){var i=this,o=function(e){n.call(t,i.getEvent(e))};return t.attachEvent("on"+e,o),o}},{key:"unlisten",value:function(t){var e;this.events[t]&&(e=this.events[t],this.events[t]=null,this.removeEventHandler(e.element,e.eventName,e.eventListener))}},{key:"listen",value:function(t,e,n,i){var o;if(i){if(this.events[i]&&(o=this.events[i],this.events[i]=null,this.removeEventHandler(o.element,o.eventName,o.eventListener)),t.addEventListener)t.addEventListener(e,n,!1);else{if(!document.attachEvent)return null;n=this.attachEvent(t,e,n)}return this.events[i]={element:t,eventName:e,eventListener:n},n}}},{key:"removeEventHandler",value:function(t,e,n){document.removeEventListener?t.removeEventListener(e,n,!1):t.detachEvent("on"+e,n)}},{key:"getEvent",value:function(t){var e=t||_this.event;if(!e)for(t=this.getEvent.caller;t&&(!(e=t.arguments[0])||Event!=e.constructor);)t=t.caller;return e}}]),t}());e.domEventsHandler=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={ResetStyle:"html,body,div,span,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,abbr,address,cite,code,del,dfn,em,img,ins,kbd,q,samp,small,strong,sub,sup,var,b,i,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,canvas,details,figcaption,figure,footer,header,hgroup,menu,nav,section,summary,time,mark,audio,video{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}body{line-height:1}article,aside,details,figcaption,figure,footer,header,hgroup,menu,nav,section{display:block}nav ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}a{margin:0;padding:0;font-size:100%;vertical-align:baseline;background:transparent}ins{background-color:#ff9;color:#000;text-decoration:none}mark{background-color:#ff9;color:#000;font-style:italic;font-weight:bold}del{text-decoration:line-through}abbr[title],dfn[title]{border-bottom:1px dotted;cursor:help}table{border-collapse:collapse;border-spacing:0}hr{display:block;height:1px;border:0;border-top:1px solid #ccc;margin:1em 0;padding:0}input,select{vertical-align:middle}html,body{height: 100% !important;\n        min-height: 100% !important;\n        max-height: 100% !important;\n        width: 100% !important;\n        min-width: 100% !important;\n        max-width: 100% !important;}body{display: flex;flex-direction: column;background:transparent;font:13px Helvetica,Arial,sans-serif;position:relative}.clear{clear:both}.clearfix:after{content:'';display:block;height:0;clear:both;visibility:hidden}"};e.settings=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UIConstructorIframe=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(4),s=n(0);e.UIConstructorIframe=function(t){function e(t,n,i,o,s){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,i,o,s))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"constructUIIframe",value:function(t){this.elmDomDoc=s.helperFunctions.getDocument(this.elmDom),this.elmDomDoc.open(),this.elmDomDoc.writeln('<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" /></head><body></body></html>'),this.elmDomDoc.close(),this.insertCssFile(t),this.insertContent()}},{key:"insertContent",value:function(){this.elmDomDoc.body.innerHTML=this.tmpl}}]),e}(o.UIConsturctor)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UIConsturctor=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(0),s=n(2),r=n(1);e.UIConsturctor=function(){function t(e,n,i,o,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var r=this;this.elementId=e||"",this.style=n||"",this.tagName=o||"div",this.tmpl="",this.elmDom=null,this.elmDomDoc=s||document,this.attributes={},this.classNames=[],this.elementId&&(this.attributes.id=this.elementId),i&&Object.keys(i).forEach((function(t){r.attributes[t]=i[t]}))}return i(t,[{key:"constructUI",value:function(t){return this.elmDomDoc=t||this.elmDomDoc,this.elmDom=o.helperFunctions.initElement(this.elmDomDoc,this.tagName,this.attributes,this.style,this.tmpl),this.elmDom.className+=this.classNames.join(" "),this.elmDom}},{key:"restyle",value:function(t,e){e&&(-1===e.indexOf("!important")&&(e+=" !important"),this.elmDom?this.elmDom.style.cssText+=";"+t+":"+e:this.style+=";"+t+":"+e)}},{key:"attachUserEventListener",value:function(t,e,n,i){var o;(o=n?this.getElementById(n):this.elmDom)&&(1<(n=t.split(" ")).length?n.forEach((function(t){r.domEventsHandler.listen(o,t,e,t+i)})):r.domEventsHandler.listen(o,t,e,i))}},{key:"getElementById",value:function(t){return this.elmDom?this.elmDomDoc.getElementById(t):null}},{key:"hide",value:function(){this.restyle("display","none !important")}},{key:"show",value:function(){this.restyle("display","block !important")}},{key:"insertCssFile",value:function(t,e){var n=this.elmDomDoc.getElementsByTagName("head")[0],i=this.elmDomDoc.createDocumentFragment(),r=o.helperFunctions.initElement(this.elmDomDoc,"style",{type:"text/css"}),a=this.elmDomDoc.createTextNode(e?t:s.settings.ResetStyle+""+t);i.appendChild(r),n.appendChild(i),r.styleSheet?r.styleSheet.cssText=a.nodeValue:r.appendChild(a)}},{key:"insertCssRemoteFile",value:function(t){var e=this.elmDomDoc.getElementsByTagName("head")[0],n=this.elmDomDoc.createDocumentFragment(),i=this.elmDomDoc.createElement("link");for(var o in i.rel="stylesheet",i.crossOrigin="*",t)i[o]=t[o];n.appendChild(i),e.appendChild(n)}},{key:"insertJSFile",value:function(t,e){var n=this.elmDomDoc.getElementsByTagName("head")[0],i=this.elmDomDoc.createDocumentFragment(),o=this.elmDomDoc.createElement("script");o.type="text/javascript",void 0!==e&&!0!==e||(o.async=!0),o.crossOrigin="*",o.src=t,i.appendChild(o),n.appendChild(i)}},{key:"massRestyle",value:function(t){for(var e in t)t.hasOwnProperty(e)&&this.restyle(e,t[e])}}]),t}()},function(t,e,n){"use strict";!function(t){t.LHC_API&&(t.$_LHC_Instance=null,t.$_LHC_Debug=!1,t.$_LHC=t.$_LHC||{},function(e){e.loaded=!1,e.connected=!1,e.ready=!1,e.version=4;var i=function(){if(!0!==e.ready){document.body&&(e.ready=!0);var i=n(6).monitoredVariable,o=n(7),s=n(8).statusWidget,r=n(9).mainWidget,a=n(10).mainWidgetPopup,u=n(11).containerChat,c=n(0).helperFunctions,l=n(12).userSession,h=n(13).storageHandler,d=n(14).chatNotifications,f=n(15).chatEventsHandler,m=n(16).default(t.navigator.userAgent).any;LHC_API.args=LHC_API.args||{};h=new h(t,LHC_API.args.domain||null);var p=document.referrer?document.referrer.substr(document.referrer.indexOf("://")+1):"",v=document.location?encodeURIComponent(window.location.href.substring(window.location.protocol.length)):"";h.setSessionReferer(p),p=p?encodeURIComponent(p):"",LHC_API.args.lang&&(LHC_API.args.lang=LHC_API.args.lang.replace("/")+"/");var g={viewHandler:null,mainWidget:new r,popupWidget:new a,chatNotifications:d,jsVars:new i(!0),onlineStatus:new i(!0),widgetStatus:new i("true"===h.getSessionStorage("LHC_WS")||LHC_API.args.mode&&"embed"==LHC_API.args.mode),eventEmitter:new o,toggleSound:new i("true"===h.getSessionStorage("LHC_SOUND"),{ignore_sub:!0}),hideOffline:!1,isMobile:m,isIE:-1!=navigator.userAgent.toUpperCase().indexOf("TRIDENT/")||-1!=navigator.userAgent.toUpperCase().indexOf("MSIE"),fresh:LHC_API.args.fresh||!1,widgetDimesions:new i({width:m?100:LHC_API.args.wwidth||350,height:m?100:LHC_API.args.wheight||520,units:m?"%":"px"}),popupDimesnions:{pheight:LHC_API.args.pheight||520,pwidth:LHC_API.args.pwidth||500},leaveMessage:LHC_API.args.leaveamessage||null,department:LHC_API.args.department||[],theme:LHC_API.args.theme||null,theme_v:null,domain:LHC_API.args.domain||null,position:LHC_API.args.position||"bottom_right",base_url:LHC_API.args.lhc_base_url,mode:LHC_API.args.mode||"widget",tag:LHC_API.args.tag||"",proactive:{},captcha:null,identifier:LHC_API.args.identifier||"",proactive_interval:null,lang:LHC_API.args.lang||"",bot_id:LHC_API.args.bot_id||"",userSession:new l,storageHandler:h,staticJS:{},init_calls:[],loadcb:LHC_API.args.loadcb||null,LHCChatOptions:t.LHCChatOptions?t.LHCChatOptions:{}},b=new f(g);if(e.eventListener=g.eventEmitter,g.userSession.setSessionInformation(g.storageHandler.getSessionInformation()),g.userSession.setSessionReferrer(h.getSessionReferrer()),"widget"==g.mode||"popup"==g.mode){var y=new u;"api"!=g.position&&(g.viewHandler=new s,y.cont.elmDom.appendChild(g.viewHandler.cont.constructUI(),!0)),"widget"!=g.mode&&"popup"!=g.mode||y.cont.elmDom.appendChild(g.mainWidget.cont.constructUI(),!0)}else{var w=document.getElementById("lhc_status_container_page");w.appendChild(g.mainWidget.cont.constructUI()),w.style.height=(LHC_API.args.wheight||520)+"px"}c.makeRequest(LHC_API.args.lhc_base_url+g.lang+"widgetrestapi/settings",{params:{vid:g.userSession.getVID(),tz:c.getTzOffset(),r:p,l:v,dt:encodeURIComponent(document.title),ie:g.isIE,dep:g.department.join(","),idnt:g.identifier,tag:g.tag}},(function(t){n.p=t.chunks_location+"/",(g.leaveMessage||!1!==t.chat_ui.leaveamessage||!1!==t.isOnline)&&(t.secure_cookie&&g.storageHandler.setSecureCookie(!0),t.domain&&g.storageHandler.setCookieDomain(t.domain),t.static&&(g.staticJS=t.static),g.captcha={hash:t.hash,ts:t.hash_ts},g.userSession.setVID(t.vid),g.storageHandler.storeSessionInformation(g.userSession.getSessionAttributes()),g.hideOffline=t.hideOffline,g.onlineStatus.next(t.isOnline),t.theme&&(g.theme=t.theme,g.theme_v=t.theme_v),t.chat_ui&&(t.chat_ui.wheight&&!m&&g.widgetDimesions.nextProperty("height",t.chat_ui.wheight),t.chat_ui.wwidth&&!m&&g.widgetDimesions.nextProperty("width",t.chat_ui.wwidth),t.chat_ui.mobile_popup&&m&&(g.mode="popup"),t.chat_ui.sound_enabled&&null===h.getSessionStorage("LHC_SOUND")&&g.toggleSound.next(!0),t.chat_ui.check_status&&n.e(2).then(n.t.bind(null,17,7)).then((function(e){e.activityMonitoring.setParams({timeout:t.chat_ui.check_status,track_mouse:t.chat_ui.track_mouse,track_activity:t.chat_ui.track_activity},g)}))),t.js_vars&&(g.jsVars.next(t.js_vars),t.js_vars.length>0&&g.userSession.setupVarsMonitoring(t.js_vars)),"widget"!=g.mode&&"popup"!=g.mode||"api"!=g.position&&g.viewHandler.init(g),g.mainWidget.init(g),"widget"!=g.mode&&"popup"!=g.mode||y.cont.show(),g.loadcb&&g.loadcb(g),t.init_calls&&(g.init_calls=t.init_calls),g.proactive_interval=t.chat_ui.proactive_interval)})),g.eventEmitter.addListener("closeWidget",(function(){g.widgetStatus.next(!1),b.sendChildEvent("closedWidget",[{sender:"closeButton"}])})),g.eventEmitter.addListener("toggleSound",(function(){var t=!g.toggleSound.value;g.toggleSound.next(t)})),g.eventEmitter.addListener("endChatCookies",(function(){g.userSession.setChatInformation({id:null,hash:null}),g.storageHandler.storeSessionInformation(g.userSession.getSessionAttributes())})),g.eventEmitter.addListener("endChat",(function(){"popup"!=g.mode&&g.widgetStatus.next(!1),g.userSession.setChatInformation({id:null,hash:null}),g.storageHandler.storeSessionInformation(g.userSession.getSessionAttributes()),g.widgetDimesions.nextProperty("height_override",null),b.sendChildEvent("endedChat",[{sender:"endButton"}]),"embed"==g.mode&&g.eventEmitter.emitEvent("showWidget",[{sender:"closeButton"}]),"popup"==g.mode&&g.popupWidget.freeup()})),g.eventEmitter.addListener("showWidget",(function(){g.widgetStatus.next(!0),"popup"==g.mode&&(g.popupWidget.init(g),"api"!=g.position&&g.viewHandler.removeUnreadIndicator(),g.mainWidget.hide()),b.sendChildEvent("shownWidget",[{sender:"closeButton"}])})),g.eventEmitter.addListener("addTag",(function(t){g.tag=""!=g.tag?g.tag+","+t:t,g.eventEmitter.emitEvent("tagAdded")})),g.eventEmitter.addListener("openPopup",(function(){b.sendChildEvent("endedChat",[{sender:"endButton"}]),g.popupWidget.init(g),"api"!=g.position&&g.viewHandler.removeUnreadIndicator(),b.sendChildEvent("shownWidget",[{sender:"closeButton"}]),g.widgetStatus.next(!1)})),g.eventEmitter.addListener("chatStarted",(function(t,e){g.widgetDimesions.nextProperty("height_override",null),"popup"!==e?g.userSession.setChatInformation(t):"popup"==e&&g.mainWidget.hide(),!1===g.fresh&&"popup"!==e&&g.storageHandler.storeSessionInformation(g.userSession.getSessionAttributes())})),g.eventEmitter.addListener("subscribeEvent",(function(t){g.chatNotifications.setPublicKey(t.pk,g.eventEmitter),g.chatNotifications.sendNotification()})),g.eventEmitter.addListener("subcribedEvent",(function(t){b.sendChildEvent("subcribedEvent",[t])})),g.widgetStatus.subscribe((function(t){"popup"!==g.mode&&(g.storageHandler.setSessionStorage("LHC_WS",t),b.sendChildEvent("widgetStatus",[t]))})),g.toggleSound.subscribe((function(t){g.storageHandler.setSessionStorage("LHC_SOUND",t)})),g.onlineStatus.subscribe((function(t){b.sendChildEvent("onlineStatus",[t])})),g.eventEmitter.addListener("screenshot",(function(t){c.makeScreenshot(g.staticJS.screenshot,t)})),g.eventEmitter.addListener("screenshare",(function(t){n.e(4).then(n.t.bind(null,18,7)).then((function(e){e.screenShare.setParams(t||{},g,b)}))})),g.eventEmitter.addListener("location",(function(t){document.location=t})),g.eventEmitter.addListener("showInvitation",(function(t){g.widgetDimesions.nextProperty("bottom_override",95),g.widgetDimesions.nextProperty("right_override",95),g.mainWidget.show()})),g.eventEmitter.addListener("hideInvitation",(function(t){t.full&&g.eventEmitter.emitEvent("showWidget",[{sender:"closeButton"}])})),g.eventEmitter.addListener("widgetHeight",(function(e){if(e.reset_height)return g.widgetDimesions.nextProperty("height_override",null),g.widgetDimesions.nextProperty("bottom_override",null),g.widgetDimesions.nextProperty("right_override",null),void g.widgetDimesions.nextProperty("width_override",null);if(e.force_height||e.force_width)return e.force_height&&g.widgetDimesions.nextProperty("height_override",e.force_height),void(e.force_width&&g.widgetDimesions.nextProperty("width_override",e.force_width));if("widget"==g.mode&&0==g.isMobile){var n=document,i=n.documentElement,o=n.getElementsByTagName("body")[0],s=t.innerHeight||i.clientHeight||o.clientHeight;parseInt(e.height)>g.widgetDimesions.value.height&&s>parseInt(e.height)?g.widgetDimesions.nextProperty("height_override",parseInt(e.height)):g.widgetDimesions.value.height_override&&g.widgetDimesions.value.height_override>s&&g.widgetDimesions.nextProperty("height_override",null)}})),"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",(function(t){void 0!==t.data.lhc_ch&&void 0!==t.data.lhc_cid&&(g.widgetStatus.next(!0),"popup"==g.mode?(g.userSession.setChatInformation({id:t.data.lhc_cid,hash:t.data.lhc_ch}),g.eventEmitter.emitEvent("unread_message")):(b.sendChildEvent("shownWidget",[{sender:"closeButton"}]),b.sendChildEvent("reopenNotification",[{id:t.data.lhc_cid,hash:t.data.lhc_ch}])))}));var _=function(t){if("string"==typeof t.data&&!t.data.indexOf("lhc::")){var e=t.data.split("::");"ready"==e[1]?(b.sendReadyEvent("true"==e[2]),"widget"!=g.mode&&"popup"!=g.mode||"api"==g.position||LHC_API.args.proactive&&!0!==LHC_API.args.proactive||null!==g.storageHandler.getSessionStorage("LHC_invt")||n.e(3).then(n.t.bind(null,19,7)).then((function(t){t.proactiveChat.setParams({interval:g.proactive_interval},g,b)})),g.init_calls.length>0&&g.init_calls.forEach((function(t){"nodeJSChat"==t.extension&&n.e(1).then(n.t.bind(null,20,7)).then((function(e){e.nodeJSChat.setParams(t.params,g,b)}))})),g.storageHandler.getSessionStorage("LHC_screenshare")&&g.eventEmitter.emitEvent("screenshare",[{auto_start:!0}])):g.eventEmitter.emitEvent(e[1],JSON.parse(e[2]))}};window.addEventListener?window.addEventListener("message",_,!1):window.attachEvent?window.attachEvent("onmessage",_):document.attachEvent&&document.attachEvent("onmessage",_)}},o=n(1).domEventsHandler;i(),!e.ready||(o.listen(document,"DOMContentLoaded",(function(){i()}),"domloaded"),o.listen(document,"readystatechange",(function(){("complete"===document.readyState||"interactive"===document.readyState&&document.body)&&i()}),"domstatechange"),o.listen(t,"load",(function(){i()}),"windowload"))}.call(this,window.$_LHC))}(window)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();e.monitoredVariable=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.valueInternal=e,this.listeners=[],this.params=n||{}}return i(t,[{key:"next",value:function(t){this.valueInternal=t,this.callListeners()}},{key:"nextProperty",value:function(t,e){this.valueInternal[t]=e,this.callListeners()}},{key:"callListeners",value:function(){var t=this;this.listeners.forEach((function(e){e&&"function"==typeof e&&e(t.valueInternal)}))}},{key:"unsubscribe",value:function(t){-1!==this.listeners.indexOf(t)&&this.listeners.splice(this.listeners.indexOf(t),1)}},{key:"subscribe",value:function(t){this.listeners.push(t),this.params.ignore_sub||t(this.valueInternal)}},{key:"value",get:function(){return this.valueInternal},set:function(t){this.next(t)}}]),t}()},function(t,e,n){var i;
/*!
 * EventEmitter v5.2.9 - git.io/ee
 * Unlicense - http://unlicense.org/
 * Oliver Caldwell - https://oli.me.uk/
 * @preserve
 */!function(e){"use strict";function o(){}var s=o.prototype,r=e.EventEmitter;function a(t,e){for(var n=t.length;n--;)if(t[n].listener===e)return n;return-1}function u(t){return function(){return this[t].apply(this,arguments)}}s.getListeners=function(t){var e,n,i=this._getEvents();if(t instanceof RegExp)for(n in e={},i)i.hasOwnProperty(n)&&t.test(n)&&(e[n]=i[n]);else e=i[t]||(i[t]=[]);return e},s.flattenListeners=function(t){var e,n=[];for(e=0;e<t.length;e+=1)n.push(t[e].listener);return n},s.getListenersAsObject=function(t){var e,n=this.getListeners(t);return n instanceof Array&&((e={})[t]=n),e||n},s.addListener=function(t,e){if(!function t(e){return"function"==typeof e||e instanceof RegExp||!(!e||"object"!=typeof e)&&t(e.listener)}(e))throw new TypeError("listener must be a function");var n,i=this.getListenersAsObject(t),o="object"==typeof e;for(n in i)i.hasOwnProperty(n)&&-1===a(i[n],e)&&i[n].push(o?e:{listener:e,once:!1});return this},s.on=u("addListener"),s.addOnceListener=function(t,e){return this.addListener(t,{listener:e,once:!0})},s.once=u("addOnceListener"),s.defineEvent=function(t){return this.getListeners(t),this},s.defineEvents=function(t){for(var e=0;e<t.length;e+=1)this.defineEvent(t[e]);return this},s.removeListener=function(t,e){var n,i,o=this.getListenersAsObject(t);for(i in o)o.hasOwnProperty(i)&&-1!==(n=a(o[i],e))&&o[i].splice(n,1);return this},s.off=u("removeListener"),s.addListeners=function(t,e){return this.manipulateListeners(!1,t,e)},s.removeListeners=function(t,e){return this.manipulateListeners(!0,t,e)},s.manipulateListeners=function(t,e,n){var i,o,s=t?this.removeListener:this.addListener,r=t?this.removeListeners:this.addListeners;if("object"!=typeof e||e instanceof RegExp)for(i=n.length;i--;)s.call(this,e,n[i]);else for(i in e)e.hasOwnProperty(i)&&(o=e[i])&&("function"==typeof o?s.call(this,i,o):r.call(this,i,o));return this},s.removeEvent=function(t){var e,n=typeof t,i=this._getEvents();if("string"===n)delete i[t];else if(t instanceof RegExp)for(e in i)i.hasOwnProperty(e)&&t.test(e)&&delete i[e];else delete this._events;return this},s.removeAllListeners=u("removeEvent"),s.emitEvent=function(t,e){var n,i,o,s,r=this.getListenersAsObject(t);for(s in r)if(r.hasOwnProperty(s))for(n=r[s].slice(0),o=0;o<n.length;o++)!0===(i=n[o]).once&&this.removeListener(t,i.listener),i.listener.apply(this,e||[])===this._getOnceReturnValue()&&this.removeListener(t,i.listener);return this},s.trigger=u("emitEvent"),s.emit=function(t){var e=Array.prototype.slice.call(arguments,1);return this.emitEvent(t,e)},s.setOnceReturnValue=function(t){return this._onceReturnValue=t,this},s._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},s._getEvents=function(){return this._events||(this._events={})},o.noConflict=function(){return e.EventEmitter=r,o},void 0===(i=function(){return o}.call(e,n,e,t))||(t.exports=i)}("undefined"!=typeof window?window:this||{})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.statusWidget=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=(n(2),n(3)),s=n(0);e.statusWidget=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.attributes={},this.cont=new o.UIConstructorIframe("lhc_status_widget_v2",s.helperFunctions.getAbstractStyle({zindex:"1000000",width:"95px",height:"95px",position:"fixed",display:"none",bottom:"10px",right:"10px",maxheight:"95px",maxwidth:"95px",minheight:"95px",minwidth:"95px"}),null,"iframe"),this.cont.tmpl='<div id="lhc_status_container" style="display: none"><i title="New messages" id="unread-msg-number">!</i><a id="status-icon" class="offline-status" href="#"></a></div>',this.loadStatus={main:!1,theme:!1}}return i(t,[{key:"toggleOfflineIcon",value:function(t){var e=this.cont.getElementById("status-icon");t?s.helperFunctions.removeClass(e,"offline-status"):s.helperFunctions.addClass(e,"offline-status")}},{key:"checkLoadStatus",value:function(){1==this.loadStatus.theme&&1==this.loadStatus.main&&(this.cont.getElementById("lhc_status_container").style.display="initial")}},{key:"init",value:function(t){var e=this;this.cont.constructUIIframe(""),this.cont.attachUserEventListener("click",(function(e){t.eventEmitter.emitEvent("showWidget",[{sender:"closeButton"}])}),"lhc_status_container","minifiedclick"),this.attributes=t,this.attributes.staticJS.fontCSS&&this.cont.insertCssRemoteFile({crossOrigin:"anonymous",href:this.attributes.staticJS.fontCSS}),this.attributes.staticJS.font_status&&this.cont.insertCssRemoteFile({as:"font",rel:"preload",type:"font/woff",crossOrigin:"anonymous",href:this.attributes.staticJS.font_status}),this.attributes.theme>0?(this.loadStatus.theme=!1,this.cont.insertCssRemoteFile({onload:function(){e.loadStatus.theme=!0,e.checkLoadStatus()},crossOrigin:"anonymous",href:LHC_API.args.lhc_base_url+"/widgetrestapi/themestatus/"+this.attributes.theme+"?v="+this.attributes.theme_v},!0)):this.loadStatus.theme=!0,this.cont.insertCssRemoteFile({onload:function(){e.loadStatus.main=!0,e.checkLoadStatus()},crossOrigin:"anonymous",href:this.attributes.staticJS.status_css}),t.onlineStatus.subscribe((function(t){return e.toggleOfflineIcon(t)})),"popup"!==this.attributes.mode?t.widgetStatus.subscribe((function(t){1==t?e.hide():e.show()})):this.show(),t.eventEmitter.addListener("unread_message",(function(){var t=e.cont.getElementById("lhc_status_container");s.helperFunctions.addClass(t,"has-uread-message")})),t.eventEmitter.addListener("focusChanged",(function(t){1==t&&e.removeUnreadIndicator()}))}},{key:"hide",value:function(){this.cont.hide(),this.removeUnreadIndicator()}},{key:"removeUnreadIndicator",value:function(){var t=this.cont.getElementById("lhc_status_container");s.helperFunctions.removeClass(t,"has-uread-message")}},{key:"show",value:function(){!1===this.attributes.hideOffline?this.cont.show():this.cont.hide()}}]),t}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.mainWidget=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(3),s=n(0);e.mainWidget=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.attributes={},this.width="350",this.height="520",this.bottom="30",this.right="30",this.units="px",this.cont=new o.UIConstructorIframe("lhc_widget_v2",s.helperFunctions.getAbstractStyle({zindex:"1000000",width:"95px",height:"95px",position:"fixed",display:"none",bottom:"10px",right:"10px",maxheight:"95px",maxwidth:"95px",minheight:"95px",minwidth:"95px"}),null,"iframe"),this.cont.tmpl='<div id="root" class="container-fluid d-flex flex-column flex-grow-1 overflow-auto fade-in"></div>'}return i(t,[{key:"resize",value:function(){var t={height:this.height+this.units+" !important","min-height":this.height+this.units+" !important","max-height":this.height+this.units+" !important",width:this.width+this.units+" !important","min-width":this.width+this.units+" !important","max-width":this.width+this.units+" !important",bottom:"px"==this.units?this.bottom+"px !important":"0px !important",right:"px"==this.units?this.right+"px !important":"0px !important"};"embed"==this.attributes.mode&&(t["max-width"]="100%",t["min-width"]="100%",t.width="100%",t.position="relative",t.bottom="auto",t.right="auto"),this.cont.massRestyle(t)}},{key:"init",value:function(t){var e=this;this.cont.constructUIIframe(""),this.attributes=t,this.attributes.staticJS.fontCSS&&this.cont.insertCssRemoteFile({rel:"stylesheet",crossOrigin:"anonymous",href:this.attributes.staticJS.fontCSS}),this.attributes.staticJS.font_widget&&this.cont.insertCssRemoteFile({as:"font",rel:"preload",type:"font/woff2",crossOrigin:"anonymous",href:this.attributes.staticJS.font_widget}),this.attributes.theme>0&&this.cont.insertCssRemoteFile({crossOrigin:"anonymous",href:LHC_API.args.lhc_base_url+"/widgetrestapi/theme/"+this.attributes.theme+"?v="+this.attributes.theme_v},!0),this.cont.insertCssRemoteFile({crossOrigin:"anonymous",href:this.attributes.staticJS.widget_css},!0),1==this.attributes.isMobile&&"widget"==this.attributes.mode&&this.cont.insertCssRemoteFile({crossOrigin:"anonymous",href:this.attributes.staticJS.widget_mobile_css}),"embed"==this.attributes.mode&&this.cont.insertCssRemoteFile({crossOrigin:"anonymous",href:this.attributes.staticJS.embed_css}),this.cont.insertJSFile(this.attributes.staticJS.app,!1),this.toggleVisibilityWrap=function(t){e.toggleVisibility(t)},t.widgetStatus.subscribe(this.toggleVisibilityWrap),this.monitorDimensionsWrap=function(t){e.monitorDimensions(t)},t.widgetDimesions.subscribe(this.monitorDimensionsWrap)}},{key:"toggleVisibility",value:function(t){0==t?this.hide():this.show()}},{key:"monitorDimensions",value:function(t){this.width=t.width_override||t.width,this.height=t.height_override||t.height,this.bottom=t.bottom_override||30,this.right=t.right_override||30,this.units=t.width_override||t.height_override||t.bottom_override||t.right_override?"px":t.units,this.resize()}},{key:"hide",value:function(){this.cont.hide()}},{key:"show",value:function(){this.cont.show()}}]),t}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();e.mainWidgetPopup=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.attributes={},this.width=null,this.height=null,this.units="px",this.freeup()}return i(t,[{key:"freeup",value:function(){this.cont={}}},{key:"init",value:function(t){if(this.cont.elementReferrerPopup&&!1===this.cont.elementReferrerPopup.closed)this.cont.elementReferrerPopup.focus();else{this.attributes=t;var e={static_chat:this.attributes.userSession.getSessionAttributes()},n="";e.static_chat.id&&e.static_chat.hash&&(n=n+"/(id)/"+e.static_chat.id+"/(hash)/"+e.static_chat.hash),null!==this.attributes.theme&&(n=n+"/(theme)/"+this.attributes.theme),null!==e.static_chat.vid&&(n=n+"/(vid)/"+e.static_chat.vid),this.attributes.isMobile&&(n+="/(mobile)/true"),this.attributes.department.length>0&&(n=n+"/(department)/"+this.attributes.department.join("/")),""!=this.attributes.identifier&&(n=n+"/(identifier)/"+this.attributes.identifier),this.attributes.proactive.invitation&&(n=n+"/(inv)/"+this.attributes.proactive.invitation,this.attributes.proactive={},"popup"==this.attributes.mode&&this.attributes.storageHandler.setSessionStorage("LHC_invt",1)),null!==this.attributes.userSession.getSessionReferrer()&&(n=n+"?ses_ref="+this.attributes.userSession.getSessionReferrer()),this.cont.elementReferrerPopup=window.open(this.attributes.base_url+"/chat/start"+n,"lhc_popup_v2","scrollbars=yes,menubar=1,resizable=1,width="+this.attributes.popupDimesnions.pwidth+",height="+this.attributes.popupDimesnions.pheight)}}}]),t}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.containerChat=void 0;var i=n(4);e.containerChat=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.cont=new i.UIConsturctor("lhc_container_v2","border: 0 none !important; padding: 0 !important; margin: 0 !important; z-index: 999999999 !important; overflow : visible !important; min-width: 0 !important; min-height: 0 !important; max-width: none !important; max-height: none !important; width : auto !important; height : auto !important;"),this.cont.constructUI(),document.body.appendChild(this.cont.elmDom)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var userSession=exports.userSession=function(){function userSession(){_classCallCheck(this,userSession),this.vid=null,this.lhc_hnh=null,this.ref=null,this.id=null,this.hash=null,this.jsVars=[],this.updateVarsTimeout=null,this.JSON={parse:window.JSON&&(window.JSON.parse||window.JSON.decode)||String.prototype.evalJSON&&function(t){return String(t).evalJSON()}||$.parseJSON||$.evalJSON,stringify:Object.toJSON||window.JSON&&(window.JSON.stringify||window.JSON.encode)||$.toJSON}}return _createClass(userSession,[{key:"setSessionReferrer",value:function(t){this.ref=t}},{key:"getSessionReferrer",value:function(){return this.ref}},{key:"getVID",value:function(){return this.vid}},{key:"setVID",value:function(t){this.vid=t}},{key:"setSessionInformation",value:function(t){this.vid=t.vid||null,this.lhc_hnh=t.lhc_hnh||null,this.hash=t.hash||null,this.id=t.id||null}},{key:"getSessionAttributes",value:function(){var t={};return null!==this.vid&&(t.vid=this.vid),null!==this.lhc_hnh&&(t.lhc_hnh=this.lhc_hnh),null!==this.id&&(t.id=this.id),null!==this.hash&&(t.hash=this.hash),t}},{key:"setupVarsMonitoring",value:function(t){var e=this;this.jsVars=t;try{if("undefined"!=typeof lhc_var)lhc_var=new Proxy(lhc_var,{set:function(t,n,i){return t[n]=i,clearTimeout(e.updateVarsTimeout),e.updateVarsTimeout=setTimeout((function(){e.updateJSVars(t)}),1e3),!0}}),this.updateJSVars(lhc_var)}catch(t){console.log(t)}}},{key:"getVars",value:function getVars(){if(this.jsVars.length>0){var js_args={},currentVar=null;for(var index in this.jsVars)try{currentVar=eval(this.jsVars[index].var),null!=currentVar&&""!==currentVar&&(js_args[this.jsVars[index].id]=currentVar)}catch(t){}return js_args}return null}},{key:"getAppendVariables",value:function(){var t="";return null!==this.vid&&(t=t+"/(vid)/"+this.vid),null!==this.hash&&null!==this.id&&(t=t+"/(hash)/"+this.id+"_"+this.hash),t}},{key:"updateJSVars",value:function(t){var e=new XMLHttpRequest;e.open("POST",LHC_API.args.lhc_base_url+"/chat/updatejsvars"+this.getAppendVariables(),!0),e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.send("data="+encodeURIComponent(this.JSON.stringify(this.getVars(t))))}},{key:"setChatInformation",value:function(t){this.id=t.id,this.hash=t.hash}}]),userSession}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();e.storageHandler=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.window=e,this.isCookieEnabled=this.checkCookieEnabled(),this.hasSessionStorage=this.isCookieEnabled&&!!this.window.sessionStorage,this.domain=n,this.secureCookie=!1}return i(t,[{key:"setCookieDomain",value:function(t){this.domain=t}},{key:"getCookieDomain",value:function(){return this.domain?"."+this.domain:null}},{key:"setSecureCookie",value:function(t){this.secureCookie=t}},{key:"setHTTPCookie",value:function(t,e,n,i){var o="";n||((n=new Date).setTime(n.getTime()+15552e6),o="; expires="+n.toGMTString()),document.cookie=t+"="+e+o+"; path=/"+(this.secureCookie?";secure":"")+(i?";domain="+i:"")}},{key:"getHTTPCookie",value:function(t){var e,n,i=[],o=t+"=",s=document.cookie.split(";");for(t=0,e=s.length;t<e;t++){for(n=s[t];" "===n.charAt(0);)n=n.substring(1,n.length);0===n.indexOf(o)&&i.push(n.substring(o.length,n.length))}return i}},{key:"setSessionStorage",value:function(t,e){if(this.hasSessionStorage&&sessionStorage.setItem)try{sessionStorage.setItem(t,e)}catch(t){}}},{key:"removeSessionStorage",value:function(t){if(this.hasSessionStorage&&sessionStorage.removeItem)try{sessionStorage.removeItem(t)}catch(t){}}},{key:"getSessionStorage",value:function(t){return this.hasSessionStorage&&sessionStorage.getItem?sessionStorage.getItem(t):null}},{key:"setSessionReferer",value:function(t){this.getSessionStorage("lhc_ref")||this.setSessionStorage("lhc_ref",t)}},{key:"getSessionReferrer",value:function(){return this.getSessionStorage("lhc_ref")}},{key:"getSessionInformation",value:function(){var t;return this.sessionInformation&&(t=this.sessionInformation),t||(t=this.getHTTPCookie("lhc_per")[0]),this.parseSessionInformation(t)}},{key:"storeSessionInformation",value:function(t){this.setHTTPCookie("lhc_per",JSON.stringify(t),!1,this.getCookieDomain()),this.sessionInformation=t}},{key:"parseSessionInformation",value:function(t){return t?JSON.parse(decodeURIComponent(t)):{}}},{key:"checkCookieEnabled",value:function(){var t=!!this.window.cookieEnabled;return void 0!==this.window.cookieEnabled||t||(document.cookie="testcookie",t=-1!=document.cookie.indexOf("testcookie")),t}}]),t}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var o=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.isNotificationsSubscribed=!1,this.applicationServerPublicKey=null,this.eventEmitter=null}return i(t,[{key:"setPublicKey",value:function(t,e){this.applicationServerPublicKey=t,this.eventEmitter=e}},{key:"sendNotification",value:function(){var t=this,e=this.applicationServerPublicKey,n=null;if("serviceWorker"in navigator&&"PushManager"in window)if("Notification"in window){if("granted"===Notification.permission);else if("denied"!==Notification.permission)Notification.requestPermission((function(t){"granted"===t||alert("Sorry but you have denied notification!")}));else if("denied"===Notification.permission)return void alert("Sorry but you have denied notification!");t=this;navigator.serviceWorker.register("/sw.lhc.js?v=2").then((function(e){(n=e).pushManager.getSubscription().then((function(e){t.isNotificationsSubscribed=!(null===e),t.isNotificationsSubscribed,o()}))}))}else alert("This browser does not support desktop notification");else alert("This browser does not support desktop notification");function i(e,n){if(null!==e){var i=e.getKey("p256dh"),o=e.getKey("auth"),s=(PushManager.supportedContentEncodings||["aesgcm"])[0],r=JSON.stringify({endpoint:e.endpoint,publicKey:i?btoa(String.fromCharCode.apply(null,new Uint8Array(i))):null,authToken:o?btoa(String.fromCharCode.apply(null,new Uint8Array(o))):null,contentEncoding:s});t.eventEmitter.emitEvent("subcribedEvent",[{payload:r}])}}function o(){var o=function(t){for(var e=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=window.atob(e),i=new Uint8Array(n.length),o=0;o<n.length;++o)i[o]=n.charCodeAt(o);return i}(e);n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:o}).then((function(e){i(e),t.isNotificationsSubscribed=!0}))}}}]),t}());e.chatNotifications=o},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var chatEventsHandler=function(){function chatEventsHandler(t){_classCallCheck(this,chatEventsHandler),this.attributes=t}return _createClass(chatEventsHandler,[{key:"getJSVarsValues",value:function getJSVarsValues(jsVars){var js_args={};if(jsVars.length>0){var currentVar=null;for(var index in jsVars)try{currentVar=eval("window."+jsVars[index].var),null!=currentVar&&""!==currentVar&&(js_args[jsVars[index].id]=currentVar)}catch(t){}return js_args}return js_args}},{key:"getInitAttributes",value:function(){var t={onlineStatus:this.attributes.onlineStatus.value,toggleSound:this.attributes.toggleSound.value,widgetStatus:this.attributes.widgetStatus.value,jsVars:this.getJSVarsValues(this.attributes.jsVars.value),isMobile:this.attributes.isMobile,department:this.attributes.department,theme:this.attributes.theme,base_url:this.attributes.base_url,mode:this.attributes.mode,captcha:this.attributes.captcha,staticJS:this.attributes.staticJS,static_chat:this.attributes.userSession.getSessionAttributes()};if(1==this.attributes.fresh&&(t.static_chat.id&&delete t.static_chat.id,t.static_chat.hash&&delete t.static_chat.hash),""!=this.attributes.bot_id&&(t.bot_id=this.attributes.bot_id),""!=this.attributes.lang&&(t.lang=this.attributes.lang),this.attributes.proactive.invitation&&(t.proactive=this.attributes.proactive),window.LHCChatOptions&&window.LHCChatOptions.attr){var e=window.LHCChatOptions.attr,n=[];e.forEach((function(t,e){n.push({show:void 0===t.show||"on"!=t.show&&"off"!=t.show?"b":t.show,value:t.value,index:e,name:t.name,class:"form-control form-control-sm",type:t.type,identifier:"additional_"+e,placeholder:"",width:t.size||6,encrypted:t.encrypted||!1,required:t.req||!1,label:t.name})})),t.CUSTOM_FIELDS=n}if(window.LHCChatOptions&&window.LHCChatOptions.attr_prefill){e=window.LHCChatOptions.attr_prefill;var i=[];e.forEach((function(t){"email"==t.name?i.push({Email:t.value}):"username"==t.name?i.push({Username:t.value}):"phone"==t.name?i.push({Phone:t.value}):"question"==t.name&&i.push({Question:t.value})})),t.attr_prefill=i}return null!==this.attributes.userSession.getSessionReferrer()&&(t.ses_ref=this.attributes.userSession.getSessionReferrer()),t}},{key:"sendChildCommand",value:function(t){this.attributes.mainWidget.cont.elmDom&&this.attributes.mainWidget.cont.elmDom.contentWindow&&this.attributes.mainWidget.cont.elmDom.contentWindow.postMessage(t,"*"),this.attributes.popupWidget.cont.elementReferrerPopup&&!1===this.attributes.popupWidget.cont.elementReferrerPopup.closed&&this.attributes.popupWidget.cont.elementReferrerPopup.postMessage(t,"*")}},{key:"sendReadyEvent",value:function(t){var e=this.getInitAttributes();!0!==t&&this.attributes.mainWidget.cont.elmDom&&this.attributes.mainWidget.cont.elmDom.contentWindow&&this.attributes.mainWidget.cont.elmDom.contentWindow.postMessage("lhc_init:"+JSON.stringify(e),"*")}},{key:"sendChildEvent",value:function(t,e){this.sendChildCommand("lhc_event:"+t+"::"+JSON.stringify(e))}}]),chatEventsHandler}();exports.chatEventsHandler=chatEventsHandler},function(t,e,n){"use strict";n.r(e);const i=/iPhone/i,o=/iPod/i,s=/iPad/i,r=/\bAndroid(?:.+)Mobile\b/i,a=/Android/i,u=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,c=/Silk/i,l=/Windows Phone/i,h=/\bWindows(?:.+)ARM\b/i,d=/BlackBerry/i,f=/BB10/i,m=/Opera Mini/i,p=/\b(CriOS|Chrome)(?:.+)Mobile/i,v=/Mobile(?:.+)Firefox\b/i;function g(t,e){return t.test(e)}function b(t){let e=(t=t||("undefined"!=typeof navigator?navigator.userAgent:"")).split("[FBAN");void 0!==e[1]&&(t=e[0]),e=t.split("Twitter"),void 0!==e[1]&&(t=e[0]);const n={apple:{phone:g(i,t)&&!g(l,t),ipod:g(o,t),tablet:!g(i,t)&&g(s,t)&&!g(l,t),device:(g(i,t)||g(o,t)||g(s,t))&&!g(l,t)},amazon:{phone:g(u,t),tablet:!g(u,t)&&g(c,t),device:g(u,t)||g(c,t)},android:{phone:!g(l,t)&&g(u,t)||!g(l,t)&&g(r,t),tablet:!g(l,t)&&!g(u,t)&&!g(r,t)&&(g(c,t)||g(a,t)),device:!g(l,t)&&(g(u,t)||g(c,t)||g(r,t)||g(a,t))||g(/\bokhttp\b/i,t)},windows:{phone:g(l,t),tablet:g(h,t),device:g(l,t)||g(h,t)},other:{blackberry:g(d,t),blackberry10:g(f,t),opera:g(m,t),firefox:g(v,t),chrome:g(p,t),device:g(d,t)||g(f,t)||g(m,t)||g(v,t)||g(p,t)},any:!1,phone:!1,tablet:!1};return n.any=n.apple.device||n.android.device||n.windows.device||n.other.device,n.phone=n.apple.phone||n.android.phone||n.windows.phone,n.tablet=n.apple.tablet||n.android.tablet||n.windows.tablet,n}n.d(e,"default",(function(){return b}))}]).default}));
//# sourceMappingURL=index.js.map