!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.UserList=t():e.UserList=t()}(window,function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="./",n(n.s=16)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var o=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,[{key:"initElement",value:function(e,t,n,i,o){var r;for(r in e=e.createElement(t),n=n||{})e[r]=n[r];return o&&"iframe"!==t&&(e.innerHTML=o),i&&(e.style.cssText=i),e}},{key:"getDocument",value:function(e){return e.contentWindow?e.contentWindow.document:e.contentDocument?e.contentDocument:e.document?e.document:null}},{key:"getTzOffset",value:function(){Date.prototype.stdTimezoneOffset=function(){var e=new Date(this.getFullYear(),0,1),t=new Date(this.getFullYear(),6,1);return Math.max(e.getTimezoneOffset(),t.getTimezoneOffset())},Date.prototype.dst=function(){return this.getTimezoneOffset()<this.stdTimezoneOffset()};var e=new Date;return(e.dst()?e.getTimezoneOffset():e.getTimezoneOffset()-60)/60*-1}},{key:"getAbstractStyle",value:function(e){return["outline:                    "+(e.outline?e.outline:"none")+" !important; ","visibility:                 "+(e.visibility?e.visibility:"visible")+" !important; ","resize:                     "+(e.resize?e.resize:"none")+" !important; ","box-shadow:                 "+(e.boxshadow?e.boxshadow:"none")+" !important; ","overflow:                   "+(e.overflow?e.overflow:"visible")+" !important; ","background                  : "+(e.background?e.background:"none")+" !important; ","opacity                     : "+(e.opacity?e.opacity:"1")+" !important; ","filter                      : alpha(opacity="+(e.opacity?100*e.opacity:"100")+") !important; ","-ms-filter                  : progid:DXImageTransform.Microsoft.Alpha(Opacity"+(e.opacity?e.opacity:"1")+") !important; ","-moz-opacity                : "+(e.opacity?e.opacity:"1")+" !important; ","-khtml-opacity              : "+(e.opacity?e.opacity:"1")+" !important; ","top                         : "+(e.top?e.top:"auto")+" !important; ","right                       : "+(e.right?e.right:"auto")+" !important; ","bottom                      : "+(e.bottom?e.bottom:"auto")+" !important; ","left                        : "+(e.left?e.left:"auto")+" !important; ","position                    : "+(e.position?e.position:"absolute")+" !important; ","border                      : "+(e.border?e.border:"0")+" !important; ","min-height                  : "+(e.minheight?e.minheight:"auto")+" !important; ","min-width                   : "+(e.minwidth?e.minwidth:"auto")+" !important; ","max-height                  : "+(e.maxheight?e.maxheight:"none")+" !important; ","max-width                   : "+(e.maxwidth?e.maxwidth:"none")+" !important; ","padding                     : "+(e.padding?e.padding:"0")+" !important; ","margin                      : "+(e.margin?e.margin:"0")+" !important; ","-moz-transition-property    : "+(e.transition?e.transition:"none")+" !important; ","-webkit-transition-property : "+(e.transition?e.transition:"none")+" !important; ","-o-transition-property      : "+(e.transition?e.transition:"none")+" !important; ","transition-property         : "+(e.transition?e.transition:"none")+" !important; ","transform                   : "+(e.transform?e.transform:"none")+" !important; ","-webkit-transform           : "+(e.transform?e.transform:"none")+" !important; ","-ms-transform               : "+(e.transform?e.transform:"none")+" !important; ","width                       : "+(e.width?e.width:"auto")+" !important; ","height                      : "+(e.height?e.height:"auto")+" !important; ","display                     : "+(e.display?e.display:"block")+" !important; ","z-index                     : "+(e.zindex?e.zindex:"none")+" !important; ","background-color            : "+(e.backgroundcolor?e.backgroundcolor:"transparent")+" !important; ","cursor                      : "+(e.cursor?e.cursor:"auto")+" !important; ","float                       : "+(e.float?e.float:"none")+" !important; ","border-radius               : "+(e.borderRadius?e.borderRadius:"unset")+" !important; "].join("").replace(/\s/gm,"")}},{key:"hasClass",value:function(e,t){return e.classList?e.classList.contains(t):!!e.className.match(RegExp("(\\s|^)"+t+"(\\s|$)"))}},{key:"addClass",value:function(e,t){e.classList?e.classList.add(t):this.hasClass(e,t)||(e.className+=" "+t)}},{key:"removeClass",value:function(e,t){e.classList?e.classList.remove(t):this.hasClass(e,t)&&(e.className=e.className.replace(RegExp("(\\s|^)"+t+"(\\s|$)")," "))}},{key:"makeScreenshot",value:function(e,t){var n=this;if("undefined"==typeof html2canvas){var i=document.getElementsByTagName("head")[0],o=document.createElement("script");o.setAttribute("type","text/javascript"),o.setAttribute("src",e),i.appendChild(o),o.onreadystatechange=o.onload=function(){n.makeScreenshot(e,t)}}else try{html2canvas(document.body,{onrendered:function(e){var n=new XMLHttpRequest;n.open("POST",t,!0),n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.send("data="+encodeURIComponent(e.toDataURL()))}})}catch(e){}}},{key:"makeQuery",value:function(e){var t,n=[];for(t in e)""!=e[t]&&e.hasOwnProperty(t)&&n.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t]));return n.join("&")}},{key:"makeRequest",value:function(e,t,n){var i=new XMLHttpRequest;return i.open("GET",e+"?"+this.makeQuery(t),!0),i.onreadystatechange=function(){4==i.readyState&&n(JSON.parse(i.responseText))},i.send(),{type:"xhr",req:i}}}]),e}());t.helperFunctions=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var o=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.events={}}return i(e,[{key:"attachEvent",value:function(e,t,n){var i=this,o=function(t){n.call(e,i.getEvent(t))};return e.attachEvent("on"+t,o),o}},{key:"listen",value:function(e,t,n,i){var o;if(i){if(this.events[i]&&(o=this.events[i],this.events[i]=null,this.removeEventHandler(o.element,o.eventName,o.eventListener)),e.addEventListener)e.addEventListener(t,n,!1);else{if(!document.attachEvent)return null;n=this.attachEvent(e,t,n)}return this.events[i]={element:e,eventName:t,eventListener:n},n}}},{key:"removeEventHandler",value:function(e,t,n){document.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent("on"+t,n)}},{key:"getEvent",value:function(e){var t=e||_this.event;if(!t)for(e=this.getEvent.caller;e&&(!(t=e.arguments[0])||Event!=t.constructor);)e=e.caller;return t}}]),e}());t.domEventsHandler=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UIConsturctor=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(0),r=n(4),s=n(1);t.UIConsturctor=function(){function e(t,n,i,o,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var s=this;this.elementId=t||"",this.style=n||"",this.tagName=o||"div",this.tmpl="",this.elmDom=null,this.elmDomDoc=r||document,this.attributes={},this.classNames=[],this.elementId&&(this.attributes.id=this.elementId),i&&Object.keys(i).forEach(function(e){s.attributes[e]=i[e]})}return i(e,[{key:"constructUI",value:function(e){return this.elmDomDoc=e||this.elmDomDoc,this.elmDom=o.helperFunctions.initElement(this.elmDomDoc,this.tagName,this.attributes,this.style,this.tmpl),this.elmDom.className+=this.classNames.join(" "),this.elmDom}},{key:"restyle",value:function(e,t){t&&(-1===t.indexOf("!important")&&(t+=" !important"),this.elmDom?this.elmDom.style.cssText+=";"+e+":"+t:this.style+=";"+e+":"+t)}},{key:"attachUserEventListener",value:function(e,t,n,i){var o;(o=n?this.getElementById(n):this.elmDom)&&(1<(n=e.split(" ")).length?n.forEach(function(e){s.domEventsHandler.listen(o,e,t,e+i)}):s.domEventsHandler.listen(o,e,t,i))}},{key:"getElementById",value:function(e){return this.elmDom?this.elmDomDoc.getElementById(e):null}},{key:"hide",value:function(){this.restyle("display","none !important")}},{key:"show",value:function(){this.restyle("display","block !important")}},{key:"insertCssFile",value:function(e,t){var n=this.elmDomDoc.getElementsByTagName("head")[0],i=this.elmDomDoc.createDocumentFragment(),s=o.helperFunctions.initElement(this.elmDomDoc,"style",{type:"text/css"}),a=this.elmDomDoc.createTextNode(t?e:r.settings.ResetStyle+""+e);i.appendChild(s),n.appendChild(i),s.styleSheet?s.styleSheet.cssText=a.nodeValue:s.appendChild(a)}},{key:"insertCssRemoteFile",value:function(e){var t=this.elmDomDoc.getElementsByTagName("head")[0],n=this.elmDomDoc.createDocumentFragment(),i=this.elmDomDoc.createElement("link");for(var o in i.rel="stylesheet",i.crossOrigin="*",e)i[o]=e[o];n.appendChild(i),t.appendChild(n)}},{key:"insertJSFile",value:function(e,t){var n=this.elmDomDoc.getElementsByTagName("head")[0],i=this.elmDomDoc.createDocumentFragment(),o=this.elmDomDoc.createElement("script");o.type="text/javascript",void 0!==t&&!0!==t||(o.async=!0),o.crossOrigin="*",o.src=e,i.appendChild(o),n.appendChild(i)}},{key:"massRestyle",value:function(e){for(var t in e)e.hasOwnProperty(t)&&this.restyle(t,e[t])}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UIConstructorIframe=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(2),r=n(0);t.UIConstructorIframe=function(e){function t(e,n,i,o,r){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,i,o,r))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.UIConsturctor),i(t,[{key:"constructUIIframe",value:function(e){this.elmDomDoc=r.helperFunctions.getDocument(this.elmDom),this.elmDomDoc.open(),this.elmDomDoc.writeln('<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" /></head><body></body></html>'),this.elmDomDoc.close(),this.insertCssFile(e),this.insertContent()}},{key:"insertContent",value:function(){this.elmDomDoc.body.innerHTML=this.tmpl}}]),t}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={ResetStyle:"html,body,div,span,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,abbr,address,cite,code,del,dfn,em,img,ins,kbd,q,samp,small,strong,sub,sup,var,b,i,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,canvas,details,figcaption,figure,footer,header,hgroup,menu,nav,section,summary,time,mark,audio,video{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}body{line-height:1}article,aside,details,figcaption,figure,footer,header,hgroup,menu,nav,section{display:block}nav ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}a{margin:0;padding:0;font-size:100%;vertical-align:baseline;background:transparent}ins{background-color:#ff9;color:#000;text-decoration:none}mark{background-color:#ff9;color:#000;font-style:italic;font-weight:bold}del{text-decoration:line-through}abbr[title],dfn[title]{border-bottom:1px dotted;cursor:help}table{border-collapse:collapse;border-spacing:0}hr{display:block;height:1px;border:0;border-top:1px solid #ccc;margin:1em 0;padding:0}input,select{vertical-align:middle}html,body{height: 100% !important;\n        min-height: 100% !important;\n        max-height: 100% !important;\n        width: 100% !important;\n        min-width: 100% !important;\n        max-width: 100% !important;}body{display: flex;flex-direction: column;background:transparent;font:13px Helvetica,Arial,sans-serif;position:relative}.clear{clear:both}.clearfix:after{content:'';display:block;height:0;clear:both;visibility:hidden}",FontStyle:"@font-face {  font-family: 'Material Icons';  font-style: normal;  font-weight: 400;  src: url('./fonts/materialdesignicons-webfont.eot'); /* For IE6-8 */  src: local('Material Icons'),       local('MaterialIcons-Regular'),       url('./fonts/materialdesignicons-webfont.woff2') format('woff2'),       url('./fonts/materialdesignicons-webfont.woff') format('woff'),       url('./fonts/materialdesignicons-webfont.ttf') format('truetype');}.material-icons {  font-family: 'Material Icons';  font-weight: normal;  font-style: normal;  font-size: 18px;  /* Preferred icon size */  display: inline-block;  line-height: 1;  text-transform: none;  letter-spacing: normal;  word-wrap: normal;  width: 1em;  /* Support for all WebKit browsers. */  -webkit-font-smoothing: antialiased;  /* Support for Safari and Chrome. */  text-rendering: optimizeLegibility;  /* Support for Firefox. */  -moz-osx-font-smoothing: grayscale;  /* Support for IE. */  font-feature-settings: 'liga';  vertical-align: middle;  margin-right:5px;  overflow:hidden;  }",ChatStatus:"#unread-msg-number{float: left;color: #ffffff;font-size: 12px;font-weight: normal;line-height: 19px;position: absolute;background-color: red;border-radius: 37px;display: none;padding-left: 8px;padding-right: 8px;margin-top: -5px;margin-left: -4px;}#lhc_status_container.has-uread-message #unread-msg-number{display: inline-block} #lhc_status_container .offline-status { background: #888888 url(//clients.livehelperchat.com/design/defaulttheme/images/getstatus/offline.svg) no-repeat center !important;}#lhc_status_container{padding-top:15px;padding-left:15px;}#lhc_status_container #status-icon {border: 2px solid #e3e3e3;    -webkit-border-radius: 47px;    -moz-border-radius:47px ;    border-radius: 47px;    -webkit-box-shadow: 0px 0px 17px rgba(50, 50, 50, 0.5);    -moz-box-shadow: 0px 0px 17px rgba(50, 50, 50, 0.5);    box-shadow: 0px 0px 17px rgba(50, 50, 50, 0.5);    text-decoration: none;    height: 41px;    width: 41px;    font-weight: bold;    color: #000000;    display: block;    padding: 10px;    background: #0c8fc4 url(//devmysql.livehelperchat.com/design/defaulttheme/images/getstatus/online.svg) no-repeat center center;}",defaultIframeStyle:{src:"about:blank",border:"0",cellspacing:"0",frameBorder:"0",scrolling:"no",horizontalscrolling:"no",verticalscrolling:"no",allowTransparency:"true",title:"chat widget"}};t.settings=i},function(e,t,n){"use strict";n.r(t);const i=/iPhone/i,o=/iPod/i,r=/iPad/i,s=/\bAndroid(?:.+)Mobile\b/i,a=/Android/i,u=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,l=/Silk/i,c=/Windows Phone/i,h=/\bWindows(?:.+)ARM\b/i,d=/BlackBerry/i,f=/BB10/i,p=/Opera Mini/i,m=/\b(CriOS|Chrome)(?:.+)Mobile/i,g=/Mobile(?:.+)Firefox\b/i;function v(e,t){return e.test(t)}function b(e){let t=(e=e||("undefined"!=typeof navigator?navigator.userAgent:"")).split("[FBAN");void 0!==t[1]&&(e=t[0]),void 0!==(t=e.split("Twitter"))[1]&&(e=t[0]);const n={apple:{phone:v(i,e)&&!v(c,e),ipod:v(o,e),tablet:!v(i,e)&&v(r,e)&&!v(c,e),device:(v(i,e)||v(o,e)||v(r,e))&&!v(c,e)},amazon:{phone:v(u,e),tablet:!v(u,e)&&v(l,e),device:v(u,e)||v(l,e)},android:{phone:!v(c,e)&&v(u,e)||!v(c,e)&&v(s,e),tablet:!v(c,e)&&!v(u,e)&&!v(s,e)&&(v(l,e)||v(a,e)),device:!v(c,e)&&(v(u,e)||v(l,e)||v(s,e)||v(a,e))||v(/\bokhttp\b/i,e)},windows:{phone:v(c,e),tablet:v(h,e),device:v(c,e)||v(h,e)},other:{blackberry:v(d,e),blackberry10:v(f,e),opera:v(p,e),firefox:v(g,e),chrome:v(m,e),device:v(d,e)||v(f,e)||v(p,e)||v(g,e)||v(m,e)},any:!1,phone:!1,tablet:!1};return n.any=n.apple.device||n.android.device||n.windows.device||n.other.device,n.phone=n.apple.phone||n.android.phone||n.windows.phone,n.tablet=n.apple.tablet||n.android.tablet||n.windows.tablet,n}n.d(t,"default",function(){return b})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var chatEventsHandler=function(){function chatEventsHandler(e){_classCallCheck(this,chatEventsHandler),this.attributes=e}return _createClass(chatEventsHandler,[{key:"getJSVarsValues",value:function getJSVarsValues(jsVars){var js_args={};if(jsVars.length>0){var currentVar=null;for(var index in jsVars)try{currentVar=eval("window."+jsVars[index].var),void 0!==currentVar&&null!==currentVar&&""!==currentVar&&(js_args[jsVars[index].id]=currentVar)}catch(e){}return js_args}return js_args}},{key:"getInitAttributes",value:function(){var e={onlineStatus:this.attributes.onlineStatus.value,toggleSound:this.attributes.toggleSound.value,widgetStatus:this.attributes.widgetStatus.value,jsVars:this.getJSVarsValues(this.attributes.jsVars.value),isMobile:this.attributes.isMobile,department:this.attributes.department,theme:this.attributes.theme,base_url:this.attributes.base_url,mode:this.attributes.mode,captcha:this.attributes.captcha,staticJS:this.attributes.staticJS,static_chat:this.attributes.userSession.getSessionAttributes()};if(1==this.attributes.fresh&&(e.static_chat.id&&delete e.static_chat.id,e.static_chat.hash&&delete e.static_chat.hash),""!=this.attributes.bot_id&&(e.bot_id=this.attributes.bot_id),""!=this.attributes.lang&&(e.lang=this.attributes.lang),window.LHCChatOptions&&window.LHCChatOptions.attr){var t=[];window.LHCChatOptions.attr.forEach(function(e,n){t.push({show:void 0===e.show||"on"!=e.show&&"off"!=e.show?"b":e.show,value:e.value,index:n,name:e.name,class:"form-control form-control-sm",type:e.type,identifier:"additional_"+n,placeholder:"",width:e.size||6,encrypted:e.encrypted||!1,required:e.req||!1,label:e.name})}),e.CUSTOM_FIELDS=t}if(window.LHCChatOptions&&window.LHCChatOptions.attr_prefill){var n=[];window.LHCChatOptions.attr_prefill.forEach(function(e){"email"==e.name?n.push({Email:e.value}):"username"==e.name?n.push({Username:e.value}):"phone"==e.name?n.push({Phone:e.value}):"question"==e.name&&n.push({Question:e.value})}),e.attr_prefill=n}return null!==this.attributes.userSession.getSessionReferrer()&&(e.ses_ref=this.attributes.userSession.getSessionReferrer()),e}},{key:"sendChildCommand",value:function(e){this.attributes.mainWidget.cont.elmDom&&this.attributes.mainWidget.cont.elmDom.contentWindow&&this.attributes.mainWidget.cont.elmDom.contentWindow.postMessage(e,"*"),this.attributes.popupWidget.cont.elementReferrerPopup&&!1===this.attributes.popupWidget.cont.elementReferrerPopup.closed&&this.attributes.popupWidget.cont.elementReferrerPopup.postMessage(e,"*")}},{key:"sendReadyEvent",value:function(e){var t=this.getInitAttributes();!0!==e&&this.attributes.mainWidget.cont.elmDom&&this.attributes.mainWidget.cont.elmDom.contentWindow&&this.attributes.mainWidget.cont.elmDom.contentWindow.postMessage("lhc_init:"+JSON.stringify(t),"*"),this.attributes.popupWidget.cont.elementReferrerPopup&&!1===this.attributes.popupWidget.cont.elementReferrerPopup.closed&&(t.mode="popup",this.attributes.popupWidget.cont.elementReferrerPopup.postMessage("lhc_init:"+JSON.stringify(t),"*"))}},{key:"sendChildEvent",value:function(e,t){this.sendChildCommand("lhc_event:"+e+"::"+JSON.stringify(t))}}]),chatEventsHandler}();exports.chatEventsHandler=chatEventsHandler},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var o=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isNotificationsSubscribed=!1,this.applicationServerPublicKey=null,this.eventEmitter=null}return i(e,[{key:"setPublicKey",value:function(e,t){this.applicationServerPublicKey=e,this.eventEmitter=t}},{key:"sendNotification",value:function(){var e=this,t=this.applicationServerPublicKey,n=null;if("serviceWorker"in navigator&&"PushManager"in window)if("Notification"in window){if("granted"===Notification.permission);else if("denied"!==Notification.permission)Notification.requestPermission(function(e){"granted"===e||alert("Sorry but you have denied notification!")});else if("denied"===Notification.permission)return void alert("Sorry but you have denied notification!");e=this;navigator.serviceWorker.register("/sw.lhc.js?v=2").then(function(t){(n=t).pushManager.getSubscription().then(function(t){e.isNotificationsSubscribed=!(null===t),e.isNotificationsSubscribed,o()})})}else alert("This browser does not support desktop notification");else alert("This browser does not support desktop notification");function i(t,n){if(null!==t){var i=t.getKey("p256dh"),o=t.getKey("auth"),r=(PushManager.supportedContentEncodings||["aesgcm"])[0],s=JSON.stringify({endpoint:t.endpoint,publicKey:i?btoa(String.fromCharCode.apply(null,new Uint8Array(i))):null,authToken:o?btoa(String.fromCharCode.apply(null,new Uint8Array(o))):null,contentEncoding:r});e.eventEmitter.emitEvent("subcribedEvent",[{payload:s}])}}function o(){var o=function(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=window.atob(t),i=new Uint8Array(n.length),o=0;o<n.length;++o)i[o]=n.charCodeAt(o);return i}(t);n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:o}).then(function(t){i(t),e.isNotificationsSubscribed=!0})}}}]),e}());t.chatNotifications=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();t.storageHandler=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.window=t,this.isCookieEnabled=this.checkCookieEnabled(),this.hasSessionStorage=this.isCookieEnabled&&!!this.window.sessionStorage,this.domain=n,this.secureCookie=!1}return i(e,[{key:"setCookieDomain",value:function(e){this.domain=e}},{key:"getCookieDomain",value:function(){return this.domain?"."+this.domain:null}},{key:"setSecureCookie",value:function(e){this.secureCookie=e}},{key:"setHTTPCookie",value:function(e,t,n,i){var o="";n||((n=new Date).setTime(n.getTime()+15552e6),o="; expires="+n.toGMTString()),document.cookie=e+"="+t+o+"; path=/"+(this.secureCookie?";secure":"")+(i?";domain="+i:"")}},{key:"getHTTPCookie",value:function(e){var t,n,i=[],o=e+"=",r=document.cookie.split(";");for(e=0,t=r.length;e<t;e++){for(n=r[e];" "===n.charAt(0);)n=n.substring(1,n.length);0===n.indexOf(o)&&i.push(n.substring(o.length,n.length))}return i}},{key:"setSessionStorage",value:function(e,t){if(this.hasSessionStorage&&sessionStorage.setItem)try{sessionStorage.setItem(e,t)}catch(e){}}},{key:"getSessionStorage",value:function(e){return this.hasSessionStorage&&sessionStorage.getItem?sessionStorage.getItem(e):null}},{key:"setSessionReferer",value:function(e){this.getSessionStorage("lhc_ref")||this.setSessionStorage("lhc_ref",e)}},{key:"getSessionReferrer",value:function(){return this.getSessionStorage("lhc_ref")}},{key:"getSessionInformation",value:function(){var e;return this.sessionInformation&&(e=this.sessionInformation),e||(e=this.getHTTPCookie("lhc_per")[0]),this.parseSessionInformation(e)}},{key:"storeSessionInformation",value:function(e){this.setHTTPCookie("lhc_per",JSON.stringify(e),!1,this.getCookieDomain()),this.sessionInformation=e}},{key:"parseSessionInformation",value:function(e){return e?JSON.parse(decodeURIComponent(e)):{}}},{key:"checkCookieEnabled",value:function(){var e=!!this.window.cookieEnabled;return void 0!==this.window.cookieEnabled||e||(document.cookie="testcookie",e=-1!=document.cookie.indexOf("testcookie")),e}}]),e}()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var userSession=exports.userSession=function(){function userSession(){_classCallCheck(this,userSession),this.vid=null,this.lhc_hnh=null,this.ref=null,this.id=null,this.hash=null,this.jsVars=[],this.updateVarsTimeout=null,this.JSON={parse:window.JSON&&(window.JSON.parse||window.JSON.decode)||String.prototype.evalJSON&&function(e){return String(e).evalJSON()}||$.parseJSON||$.evalJSON,stringify:Object.toJSON||window.JSON&&(window.JSON.stringify||window.JSON.encode)||$.toJSON}}return _createClass(userSession,[{key:"setSessionReferrer",value:function(e){this.ref=e}},{key:"getSessionReferrer",value:function(){return this.ref}},{key:"getVID",value:function(){return this.vid}},{key:"setVID",value:function(e){this.vid=e}},{key:"setSessionInformation",value:function(e){this.vid=e.vid||null,this.lhc_hnh=e.lhc_hnh||null,this.hash=e.hash||null,this.id=e.id||null}},{key:"getSessionAttributes",value:function(){var e={};return null!==this.vid&&(e.vid=this.vid),null!==this.lhc_hnh&&(e.lhc_hnh=this.lhc_hnh),null!==this.id&&(e.id=this.id),null!==this.hash&&(e.hash=this.hash),e}},{key:"setupVarsMonitoring",value:function(e){var t=this;this.jsVars=e;try{if("undefined"!=typeof lhc_var)lhc_var=new Proxy(lhc_var,{set:function(e,n,i){return e[n]=i,clearTimeout(t.updateVarsTimeout),t.updateVarsTimeout=setTimeout(function(){t.updateJSVars(e)},1e3),!0}}),this.updateJSVars(lhc_var)}catch(e){console.log(e)}}},{key:"getVars",value:function getVars(){if(this.jsVars.length>0){var js_args={},currentVar=null;for(var index in this.jsVars)try{currentVar=eval(this.jsVars[index].var),void 0!==currentVar&&null!==currentVar&&""!==currentVar&&(js_args[this.jsVars[index].id]=currentVar)}catch(e){}return js_args}return null}},{key:"getAppendVariables",value:function(){var e="";return null!==this.vid&&(e=e+"/(vid)/"+this.vid),null!==this.hash&&null!==this.id&&(e=e+"/(hash)/"+this.id+"_"+this.hash),e}},{key:"updateJSVars",value:function(e){var t=new XMLHttpRequest;t.open("POST",LHC_API.args.lhc_base_url+"/chat/updatejsvars"+this.getAppendVariables(),!0),t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),t.send("data="+encodeURIComponent(this.JSON.stringify(this.getVars(e))))}},{key:"setChatInformation",value:function(e){this.id=e.id,this.hash=e.hash}}]),userSession}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.containerChat=void 0;var i=n(2);t.containerChat=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.cont=new i.UIConsturctor("lhc_container_v2","border: 0 none !important; padding: 0 !important; margin: 0 !important; z-index: 999999999 !important; overflow : visible !important; min-width: 0 !important; min-height: 0 !important; max-width: none !important; max-height: none !important; width : auto !important; height : auto !important;"),this.cont.constructUI(),document.body.appendChild(this.cont.elmDom)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();t.mainWidgetPopup=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.attributes={},this.width=null,this.height=null,this.units="px",this.freeup()}return i(e,[{key:"freeup",value:function(){this.cont={}}},{key:"init",value:function(e){if(this.cont.elementReferrerPopup&&!1===this.cont.elementReferrerPopup.closed)this.cont.elementReferrerPopup.focus();else{this.attributes=e;var t={static_chat:this.attributes.userSession.getSessionAttributes()},n="";t.static_chat.id&&t.static_chat.hash&&(n=n+"/(id)/"+t.static_chat.id+"/(hash)/"+t.static_chat.hash),null!==this.attributes.theme&&(n=n+"/(theme)/"+this.attributes.theme),null!==t.static_chat.vid&&(n=n+"/(vid)/"+t.static_chat.vid),this.attributes.isMobile&&(n+="/(mobile)/true"),this.attributes.department.length>0&&(n=n+"/(department)/"+this.attributes.department.join("/")),null!==this.attributes.userSession.getSessionReferrer()&&(n=n+"?ses_ref="+this.attributes.userSession.getSessionReferrer()),this.cont.elementReferrerPopup=window.open(this.attributes.base_url+"/chat/start"+n,"lhc_popup_v2","scrollbars=yes,menubar=1,resizable=1,width="+this.attributes.popupDimesnions.pwidth+",height="+this.attributes.popupDimesnions.pheight)}}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mainWidget=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(3),r=n(0);t.mainWidget=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.attributes={},this.width="350",this.height="520",this.units="px",this.cont=new o.UIConstructorIframe("lhc_widget_v2",r.helperFunctions.getAbstractStyle({zindex:"1000000",width:"95px",height:"95px",position:"fixed",display:"none",bottom:"10px",right:"10px",maxheight:"95px",maxwidth:"95px",minheight:"95px",minwidth:"95px"}),null,"iframe"),this.cont.tmpl='<div id="root" class="container-fluid d-flex flex-column flex-grow-1 overflow-auto"></div>'}return i(e,[{key:"resize",value:function(){var e={height:this.height+this.units+" !important","min-height":this.height+this.units+" !important","max-height":this.height+this.units+" !important",width:this.width+this.units+" !important","min-width":this.width+this.units+" !important","max-width":this.width+this.units+" !important",bottom:"px"==this.units?"30px !important":"0px !important",right:"px"==this.units?"30px !important":"0px !important"};"embed"==this.attributes.mode&&(e["max-width"]="100%",e["min-width"]="100%",e.width="100%",e.position="relative",e.bottom="auto",e.right="auto"),this.cont.massRestyle(e)}},{key:"init",value:function(e){var t=this;this.cont.constructUIIframe(""),this.attributes=e,this.attributes.staticJS.fontCSS&&this.cont.insertCssRemoteFile({crossOrigin:"anonymous",href:this.attributes.staticJS.fontCSS}),this.cont.insertCssRemoteFile({crossOrigin:"anonymous",href:this.attributes.staticJS.widget_css}),1==this.attributes.isMobile&&"widget"==this.attributes.mode&&this.cont.insertCssRemoteFile({crossOrigin:"anonymous",href:this.attributes.staticJS.widget_mobile_css}),"embed"==this.attributes.mode&&this.cont.insertCssRemoteFile({crossOrigin:"anonymous",href:this.attributes.staticJS.embed_css}),this.attributes.theme>0&&this.cont.insertCssRemoteFile({crossOrigin:"anonymous",href:LHC_API.args.lhc_base_url+"/widgetrestapi/theme/"+this.attributes.theme}),this.cont.insertJSFile(this.attributes.staticJS.app,!1),this.monitorDimensionsWrap=function(e){t.monitorDimensions(e)},this.toggleVisibilityWrap=function(e){t.toggleVisibility(e)},e.widgetDimesions.subscribe(this.monitorDimensionsWrap),e.widgetStatus.subscribe(this.toggleVisibilityWrap)}},{key:"toggleVisibility",value:function(e){0==e?this.hide():this.show()}},{key:"monitorDimensions",value:function(e){this.width=e.width,this.height=e.height_override||e.height,this.units=e.units,this.resize()}},{key:"hide",value:function(){this.cont.hide()}},{key:"show",value:function(){this.cont.show()}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.statusWidget=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(4),r=n(3),s=n(0);t.statusWidget=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.attributes={},this.cont=new r.UIConstructorIframe("lhc_status_widget_v2",s.helperFunctions.getAbstractStyle({zindex:"1000000",width:"95px",height:"95px",position:"fixed",display:"none",bottom:"10px",right:"10px",maxheight:"95px",maxwidth:"95px",minheight:"95px",minwidth:"95px"}),null,"iframe"),this.cont.tmpl='<div id="lhc_status_container"><i title="New messages" id="unread-msg-number">!</i><a id="status-icon" class="offline-status" href="#"></a></div>'}return i(e,[{key:"toggleOfflineIcon",value:function(e){var t=this.cont.getElementById("status-icon");e?s.helperFunctions.removeClass(t,"offline-status"):s.helperFunctions.addClass(t,"offline-status")}},{key:"init",value:function(e){var t=this;this.cont.constructUIIframe(o.settings.ChatStatus+o.settings.FontStyle),this.cont.attachUserEventListener("click",function(t){e.eventEmitter.emitEvent("showWidget",[{sender:"closeButton"}])},"lhc_status_container","minifiedclick"),this.attributes=e,this.attributes.staticJS.fontCSS&&this.cont.insertCssRemoteFile({crossOrigin:"anonymous",href:this.attributes.staticJS.fontCSS}),this.attributes.theme>0&&this.cont.insertCssRemoteFile({crossOrigin:"anonymous",href:LHC_API.args.lhc_base_url+"/widgetrestapi/themestatus/"+this.attributes.theme}),e.onlineStatus.subscribe(function(e){return t.toggleOfflineIcon(e)}),"popup"!==this.attributes.mode?e.widgetStatus.subscribe(function(e){1==e?t.hide():t.show()}):this.show(),e.eventEmitter.addListener("unread_message",function(){var e=t.cont.getElementById("lhc_status_container");s.helperFunctions.addClass(e,"has-uread-message")}),e.eventEmitter.addListener("focusChanged",function(e){1==e&&t.removeUnreadIndicator()})}},{key:"hide",value:function(){this.cont.hide(),this.removeUnreadIndicator()}},{key:"removeUnreadIndicator",value:function(){var e=this.cont.getElementById("lhc_status_container");s.helperFunctions.removeClass(e,"has-uread-message")}},{key:"show",value:function(){!1===this.attributes.hideOffline?this.cont.show():this.cont.hide()}}]),e}()},function(e,t,n){var i;
/*!
 * EventEmitter v5.2.6 - git.io/ee
 * Unlicense - http://unlicense.org/
 * Oliver Caldwell - https://oli.me.uk/
 * @preserve
 */!function(t){"use strict";function o(){}var r=o.prototype,s=t.EventEmitter;function a(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1}function u(e){return function(){return this[e].apply(this,arguments)}}r.getListeners=function(e){var t,n,i=this._getEvents();if(e instanceof RegExp)for(n in t={},i)i.hasOwnProperty(n)&&e.test(n)&&(t[n]=i[n]);else t=i[e]||(i[e]=[]);return t},r.flattenListeners=function(e){var t,n=[];for(t=0;t<e.length;t+=1)n.push(e[t].listener);return n},r.getListenersAsObject=function(e){var t,n=this.getListeners(e);return n instanceof Array&&((t={})[e]=n),t||n},r.addListener=function(e,t){if(!function e(t){return"function"==typeof t||t instanceof RegExp||!(!t||"object"!=typeof t)&&e(t.listener)}(t))throw new TypeError("listener must be a function");var n,i=this.getListenersAsObject(e),o="object"==typeof t;for(n in i)i.hasOwnProperty(n)&&-1===a(i[n],t)&&i[n].push(o?t:{listener:t,once:!1});return this},r.on=u("addListener"),r.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},r.once=u("addOnceListener"),r.defineEvent=function(e){return this.getListeners(e),this},r.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},r.removeListener=function(e,t){var n,i,o=this.getListenersAsObject(e);for(i in o)o.hasOwnProperty(i)&&-1!==(n=a(o[i],t))&&o[i].splice(n,1);return this},r.off=u("removeListener"),r.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},r.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},r.manipulateListeners=function(e,t,n){var i,o,r=e?this.removeListener:this.addListener,s=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(i=n.length;i--;)r.call(this,t,n[i]);else for(i in t)t.hasOwnProperty(i)&&(o=t[i])&&("function"==typeof o?r.call(this,i,o):s.call(this,i,o));return this},r.removeEvent=function(e){var t,n=typeof e,i=this._getEvents();if("string"===n)delete i[e];else if(e instanceof RegExp)for(t in i)i.hasOwnProperty(t)&&e.test(t)&&delete i[t];else delete this._events;return this},r.removeAllListeners=u("removeEvent"),r.emitEvent=function(e,t){var n,i,o,r,s=this.getListenersAsObject(e);for(r in s)if(s.hasOwnProperty(r))for(n=s[r].slice(0),o=0;o<n.length;o++)!0===(i=n[o]).once&&this.removeListener(e,i.listener),i.listener.apply(this,t||[])===this._getOnceReturnValue()&&this.removeListener(e,i.listener);return this},r.trigger=u("emitEvent"),r.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},r.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},r._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},r._getEvents=function(){return this._events||(this._events={})},o.noConflict=function(){return t.EventEmitter=s,o},void 0===(i=function(){return o}.call(t,n,t,e))||(e.exports=i)}("undefined"!=typeof window?window:this||{})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();t.monitoredVariable=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.valueInternal=t,this.listeners=[]}return i(e,[{key:"next",value:function(e){this.valueInternal=e,this.callListeners()}},{key:"nextProperty",value:function(e,t){this.valueInternal[e]=t,this.callListeners()}},{key:"callListeners",value:function(){var e=this;this.listeners.forEach(function(t){t&&"function"==typeof t&&t(e.valueInternal)})}},{key:"unsubscribe",value:function(e){-1!==this.listeners.indexOf(e)&&this.listeners.splice(this.listeners.indexOf(e),1)}},{key:"subscribe",value:function(e){this.listeners.push(e),e(this.valueInternal)}},{key:"value",get:function(){return this.valueInternal},set:function(e){this.next(e)}}]),e}()},function(e,t,n){"use strict";!function(e){e.LHC_API&&(e.$_LHC_Instance=null,e.$_LHC_Debug=!1,e.$_LHC=e.$_LHC||{},function(t){t.loaded=!1,t.connected=!1,t.ready=!1,t.version=4;var i=function(){if(!0!==t.ready){document.body&&(t.ready=!0);var i=n(15).monitoredVariable,o=n(14),r=n(13).statusWidget,s=n(12).mainWidget,a=n(11).mainWidgetPopup,u=n(10).containerChat,l=n(0).helperFunctions,c=n(9).userSession,h=n(8).storageHandler,d=n(7).chatNotifications,f=n(6).chatEventsHandler,p=n(5).default(e.navigator.userAgent).any;LHC_API.args=LHC_API.args||{};h=new h(e,LHC_API.args.domain||null);var m=document.referrer?document.referrer.substr(document.referrer.indexOf("://")+1):"",g=document.location?encodeURIComponent(window.location.href.substring(window.location.protocol.length)):"";h.setSessionReferer(m),m=m?encodeURIComponent(m):"";var v={viewHandler:null,mainWidget:new s,popupWidget:new a,chatNotifications:d,jsVars:new i(!0),onlineStatus:new i(!0),widgetStatus:new i("true"===h.getSessionStorage("LHC_WS")||LHC_API.args.mode&&"embed"==LHC_API.args.mode||"popup"==LHC_API.args.mode),eventEmitter:new o,toggleSound:new i("true"===h.getSessionStorage("LHC_SOUND")||null===h.getSessionStorage("LHC_SOUND")),hideOffline:!1,isMobile:p,isIE:-1!=navigator.userAgent.toUpperCase().indexOf("TRIDENT/")||-1!=navigator.userAgent.toUpperCase().indexOf("MSIE"),fresh:LHC_API.args.fresh||!1,widgetDimesions:new i({width:p?100:LHC_API.args.wwidth||350,height:p?100:LHC_API.args.wheight||520,units:p?"%":"px"}),popupDimesnions:{pheight:LHC_API.args.pheight||520,pwidth:LHC_API.args.pwidth||500},leaveMessage:LHC_API.args.leaveamessage||null,department:LHC_API.args.department||[],theme:LHC_API.args.theme||null,domain:LHC_API.args.domain||null,position:LHC_API.args.position||"bottom_right",base_url:LHC_API.args.lhc_base_url,mode:LHC_API.args.mode||"widget",captcha:null,lang:LHC_API.args.lang||"",bot_id:LHC_API.args.bot_id||"",userSession:new c,storageHandler:h,staticJS:{},loadcb:LHC_API.args.loadcb||null,LHCChatOptions:e.LHCChatOptions?e.LHCChatOptions:{}},b=new f(v);if(t.eventListener=v.eventEmitter,v.userSession.setSessionInformation(v.storageHandler.getSessionInformation()),v.userSession.setSessionReferrer(h.getSessionReferrer()),"widget"==v.mode||"popup"==v.mode){var y=new u;"api"!=v.position&&(v.viewHandler=new r,y.cont.elmDom.appendChild(v.viewHandler.cont.constructUI(),!0)),"widget"==v.mode&&y.cont.elmDom.appendChild(v.mainWidget.cont.constructUI(),!0)}else{var w=document.getElementById("lhc_status_container_page");w.appendChild(v.mainWidget.cont.constructUI()),w.style.height=(LHC_API.args.wheight||520)+"px"}l.makeRequest(LHC_API.args.lhc_base_url+"/widgetrestapi/settings",{vid:v.userSession.getVID(),tz:l.getTzOffset(),r:m,l:g,ie:v.isIE,dep:v.department.join(",")},function(e){n.p=e.chunks_location+"/",(v.leaveMessage||!1!==e.isOnline)&&(e.secure_cookie&&v.storageHandler.setSecureCookie(!0),e.domain&&v.storageHandler.setCookieDomain(e.domain),e.static&&(v.staticJS=e.static),v.captcha={hash:e.hash,ts:e.hash_ts},v.userSession.setVID(e.vid),v.storageHandler.storeSessionInformation(v.userSession.getSessionAttributes()),v.hideOffline=e.hideOffline,v.onlineStatus.next(e.isOnline),e.theme&&(v.theme=e.theme),v.jsVars.next(e.js_vars),e.js_vars.length>0&&v.userSession.setupVarsMonitoring(e.js_vars),"widget"!=v.mode&&"popup"!=v.mode||"api"!=v.position&&v.viewHandler.init(v),"widget"!=v.mode&&"embed"!=v.mode||v.mainWidget.init(v),"widget"!=v.mode&&"popup"!=v.mode||y.cont.show(),v.loadcb&&v.loadcb(v))}),v.eventEmitter.addListener("closeWidget",function(){v.widgetStatus.next(!1),b.sendChildEvent("closedWidget",[{sender:"closeButton"}])}),v.eventEmitter.addListener("toggleSound",function(){var e=!v.toggleSound.value;v.toggleSound.next(e)}),v.eventEmitter.addListener("endChatCookies",function(){v.userSession.setChatInformation({id:null,hash:null}),v.storageHandler.storeSessionInformation(v.userSession.getSessionAttributes())}),v.eventEmitter.addListener("endChat",function(){"popup"!=v.mode&&v.widgetStatus.next(!1),v.userSession.setChatInformation({id:null,hash:null}),v.storageHandler.storeSessionInformation(v.userSession.getSessionAttributes()),v.widgetDimesions.nextProperty("height_override",null),b.sendChildEvent("endedChat",[{sender:"endButton"}]),"embed"==v.mode&&v.eventEmitter.emitEvent("showWidget",[{sender:"closeButton"}]),"popup"==v.mode&&v.popupWidget.freeup()}),v.eventEmitter.addListener("showWidget",function(){v.widgetStatus.next(!0),"popup"==v.mode&&(v.popupWidget.init(v),"api"!=v.position&&v.viewHandler.removeUnreadIndicator()),b.sendChildEvent("shownWidget",[{sender:"closeButton"}])}),v.eventEmitter.addListener("openPopup",function(){b.sendChildEvent("endedChat",[{sender:"endButton"}]),v.popupWidget.init(v),"api"!=v.position&&v.viewHandler.removeUnreadIndicator(),b.sendChildEvent("shownWidget",[{sender:"closeButton"}]),v.widgetStatus.next(!1)}),v.eventEmitter.addListener("chatStarted",function(e,t){v.widgetDimesions.nextProperty("height_override",null),"popup"!==t&&v.userSession.setChatInformation(e),!1===v.fresh&&"popup"!==t&&v.storageHandler.storeSessionInformation(v.userSession.getSessionAttributes())}),v.eventEmitter.addListener("subscribeEvent",function(e){v.chatNotifications.setPublicKey(e.pk,v.eventEmitter),v.chatNotifications.sendNotification()}),v.eventEmitter.addListener("subcribedEvent",function(e){b.sendChildEvent("subcribedEvent",[e])}),v.widgetStatus.subscribe(function(e){v.storageHandler.setSessionStorage("LHC_WS",e),b.sendChildEvent("widgetStatus",[e])}),v.toggleSound.subscribe(function(e){v.storageHandler.setSessionStorage("LHC_SOUND",e)}),v.onlineStatus.subscribe(function(e){b.sendChildEvent("onlineStatus",[e])}),v.eventEmitter.addListener("screenshot",function(e){l.makeScreenshot(v.staticJS.screenshot,e)}),v.eventEmitter.addListener("location",function(e){document.location=e}),v.eventEmitter.addListener("widgetHeight",function(t){if("widget"==v.mode&&0==v.isMobile){var n=document,i=n.documentElement,o=n.getElementsByTagName("body")[0],r=e.innerHeight||i.clientHeight||o.clientHeight;parseInt(t.height)>v.widgetDimesions.value.height&&r>parseInt(t.height)?v.widgetDimesions.nextProperty("height_override",parseInt(t.height)):v.widgetDimesions.value.height_override&&v.widgetDimesions.value.height_override>r&&v.widgetDimesions.nextProperty("height_override",null)}}),"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",function(e){void 0!==e.data.lhc_ch&&void 0!==e.data.lhc_cid&&(v.widgetStatus.next(!0),"popup"==v.mode?(v.userSession.setChatInformation({id:e.data.lhc_cid,hash:e.data.lhc_ch}),v.eventEmitter.emitEvent("unread_message")):(b.sendChildEvent("shownWidget",[{sender:"closeButton"}]),b.sendChildEvent("reopenNotification",[{id:e.data.lhc_cid,hash:e.data.lhc_ch}])))});var _=function(e){if("string"==typeof e.data&&!e.data.indexOf("lhc::")){var t=e.data.split("::");"ready"==t[1]?b.sendReadyEvent("true"==t[2]):v.eventEmitter.emitEvent(t[1],JSON.parse(t[2]))}};window.addEventListener?window.addEventListener("message",_,!1):window.attachEvent?window.attachEvent("onmessage",_):document.attachEvent&&document.attachEvent("onmessage",_)}},o=n(1).domEventsHandler;i(),!t.ready||(o.listen(document,"DOMContentLoaded",function(){i()},"domloaded"),o.listen(document,"readystatechange",function(){("complete"===document.readyState||"interactive"===document.readyState&&document.body)&&i()},"domstatechange"),o.listen(e,"load",function(){i()},"windowload"))}.call(this,window.$_LHC))}(window)}]).default});
//# sourceMappingURL=index.js.map