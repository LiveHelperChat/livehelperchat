{"version":3,"sources":["webpack://LHCReactAPP/./src/components/MailModal.js"],"names":["MailModal","props","mail","success","errors","sending","toggle","sendMail","bind","emailRef","React","createRef","event","this","setState","axios","post","window","lhcChat","chatId","chatHash","email","state","then","response","data","error","result","preventDefault","get","current","focus","err","console","log","t","Fragment","className","role","id","aria-modal","tabIndex","type","data-dismiss","onClick","dismissModal","aria-label","aria-hidden","dangerouslySetInnerHTML","__html","onSubmit","ref","required","defaultValue","onChange","e","target","value","placeholder","title","disabled","PureComponent","withTranslation"],"mappings":"oRAIMA,E,YASF,WAAYC,GAAO,yBACf,4BAAMA,IADS,mBAPX,CACJC,KAAM,KACNC,QAAS,GACTC,OAAQ,KACRC,SAAS,IAGM,2BAoCJ,WACX,EAAKJ,MAAMK,YAnCX,EAAKC,SAAW,EAAKA,SAASC,KAAd,QAChB,EAAKC,SAAWC,IAAMC,YAHP,E,sDAMVC,GAAO,WAEZC,KAAKC,SAAS,CAAC,SAAY,IAE3BC,IAAMC,KAAKC,OAAOC,QAAP,SAA6B,kCAAoCL,KAAKZ,MAAMkB,OAAS,IAAMN,KAAKZ,MAAMmB,SAAW,iBAAkB,CAACC,MAAMR,KAAKS,MAAMpB,OAAOqB,MAAK,SAACC,GAC9I,GAAvBA,EAASC,KAAKC,MACd,EAAKzB,MAAMK,UAEX,EAAKQ,SAAS,CAAC,SAAY,IAC3B,EAAKA,SAAS,CAAC,OAAWU,EAASC,KAAKE,aAI5Cf,GACAA,EAAMgB,mB,0CAGM,WAChBb,IAAMc,IAAIZ,OAAOC,QAAP,SAA6B,kCAAoCL,KAAKZ,MAAMkB,OAAS,IAAMN,KAAKZ,MAAMmB,UAC/GG,MAAK,SAACC,GACH,EAAKV,SAAS,CAAC,KAASU,EAASC,OAC7B,EAAKhB,SAASqB,SACd,EAAKrB,SAASqB,QAAQC,WAJ9B,OAOO,SAACC,GACJC,QAAQC,IAAIF,Q,+BAQX,WACGG,EAAMtB,KAAKZ,MAAXkC,EAER,OACI,kBAAC,IAAMC,SAAP,KACyB,OAApBvB,KAAKS,MAAMpB,MAAiB,kBAAC,IAAMkC,SAAP,KAC7B,yBAAKC,UAAU,6BACf,yBAAKC,KAAK,SAASC,GAAG,iBAAiBC,aAAW,OAAOH,UAAU,0BAA0BI,SAAS,MAClG,yBAAKJ,UAAU,yBACX,yBAAKA,UAAU,iBACX,yBAAKA,UAAU,oCAAf,IAAmD,wBAAIA,UAAU,cAAcE,GAAG,gBAAe,0BAAMF,UAAU,kBAAhB,KAAiDF,EAAE,gBAChJ,4BAAQO,KAAK,SAASL,UAAU,oBAAoBM,eAAa,QAAQC,QAAS/B,KAAKgC,aAAcC,aAAW,SAAQ,0BAAMC,cAAY,QAAlB,OAE5H,yBAAKV,UAAU,cACX,yBAAKA,UAAU,OACX,yBAAKA,UAAU,UACVxB,KAAKS,MAAMlB,QAAU,yBAAKiC,UAAU,OAAOW,wBAAyB,CAACC,OAAOpC,KAAKS,MAAMlB,UACxF,yBAAKiC,UAAU,QACX,0BAAMa,SAAUrC,KAAKN,UACjB,2BAAO8B,UAAU,0CAA0Cc,IAAKtC,KAAKJ,SAAU2C,SAAS,WAAWV,KAAK,QAAQW,aAAcxC,KAAKS,MAAMpB,KAAMoD,SAAU,SAACC,GAAD,OAAO,EAAKzC,SAAS,CAAC,KAASyC,EAAEC,OAAOC,SAASC,YAAavB,EAAE,oBAAqBwB,MAAOxB,EAAE,sBACvP,yBAAKE,UAAU,YAAYC,KAAK,QAAQQ,aAAW,OAC/C,4BAAQJ,KAAK,SAASkB,SAAU/C,KAAKS,MAAMjB,QAASgC,UAAU,4BAA4BF,EAAE,gBAC5F,4BAAQO,KAAK,SAASL,UAAU,2BAA2BO,QAAS/B,KAAKgC,cAAeV,EAAE,iC,GAvEtH0B,iBAuFTC,wBAAkB9D","file":"2.47d76d589e2dffda7af3.js","sourcesContent":["import React, { PureComponent } from 'react';\nimport axios from \"axios\";\nimport { withTranslation } from 'react-i18next';\n\nclass MailModal extends PureComponent {\n\n    state = {\n        mail: null,\n        success: '',\n        errors: null,\n        sending: false\n    };\n\n    constructor(props) {\n        super(props);\n        this.sendMail = this.sendMail.bind(this);\n        this.emailRef = React.createRef();\n    }\n\n    sendMail(event) {\n\n        this.setState({'sending' : true});\n\n        axios.post(window.lhcChat['base_url'] + \"widgetrestapi/sendmailsettings/\" + this.props.chatId + '/' + this.props.chatHash + '/(action)/send', {email:this.state.mail}).then((response) => {\n            if (response.data.error == false) {\n                this.props.toggle();\n            } else {\n                this.setState({'sending' : false});\n                this.setState({'errors' : response.data.result});\n            }\n        });\n\n        if (event)\n            event.preventDefault();\n    }\n\n    componentDidMount() {\n        axios.get(window.lhcChat['base_url'] + 'widgetrestapi/sendmailsettings/' + this.props.chatId + '/' + this.props.chatHash)\n        .then((response) => {\n            this.setState({'mail' : response.data});\n            if (this.emailRef.current) {\n                this.emailRef.current.focus();\n            }\n        })\n        .catch((err) => {\n            console.log(err);\n        });\n    }\n\n    dismissModal = () => {\n        this.props.toggle()\n    }\n\n    render() {\n        const { t } = this.props;\n\n        return (\n            <React.Fragment>\n                {this.state.mail !== null && <React.Fragment>\n                <div className=\"fade modal-backdrop show\"></div>\n                <div role=\"dialog\" id=\"dialog-content\" aria-modal=\"true\" className=\"fade modal show d-block\" tabIndex=\"-1\">\n                    <div className=\"modal-dialog modal-lg\">\n                        <div className=\"modal-content\">\n                            <div className=\"modal-header pt-1 pb-1 pl-2 pr-2\"> <h4 className=\"modal-title\" id=\"myModalLabel\"><span className=\"material-icons\">&#xf11a;</span>{t('button.mail')}</h4>\n                                <button type=\"button\" className=\"close float-right\" data-dismiss=\"modal\" onClick={this.dismissModal} aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button>\n                            </div>\n                            <div className=\"modal-body\">\n                                <div className=\"row\">\n                                    <div className=\"col-12\">\n                                        {this.state.errors && <div className=\"mb-0\" dangerouslySetInnerHTML={{__html:this.state.errors}}></div>}\n                                        <div className=\"mb-0\">\n                                            <form onSubmit={this.sendMail}>\n                                                <input className=\"form-control form-group form-control-sm\" ref={this.emailRef} required=\"required\" type=\"email\" defaultValue={this.state.mail} onChange={(e) => this.setState({'mail' : e.target.value})} placeholder={t('chat.enter_email')} title={t('chat.enter_email')} />\n                                                <div className=\"btn-group\" role=\"group\" aria-label=\"...\">\n                                                    <button type=\"submit\" disabled={this.state.sending} className=\"btn btn-secondary btn-sm\">{t('button.send')}</button>\n                                                    <button type=\"button\" className=\"btn btn-secondary btn-sm\" onClick={this.dismissModal}>{t('button.cancel')}</button>\n                                                </div>\n                                            </form>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n               </div>\n               </React.Fragment>}\n            </React.Fragment>\n        )\n    }\n}\n\nexport default withTranslation()(MailModal);\n"],"sourceRoot":""}