"use strict";(self.webpackChunkLHCReactAPP=self.webpackChunkLHCReactAPP||[]).push([[307],{307:function(e,t,n){n.r(t);var a,r=n(4575),i=n.n(r),s=n(3913),o=n.n(s),c=n(2205),d=n.n(c),l=n(8585),p=n.n(l),u=n(9754),h=n.n(u),m=n(7294),f=n(6458),g=n(6512);var y=(0,f.$j)((function(e){return{chatwidget:e.chatwidget}}))(a=function(e){d()(r,e);var t,n,a=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=h()(t);if(n){var r=h()(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return p()(this,e)});function r(e){return i()(this,r),a.call(this,e)}return o()(r,[{key:"getDocument",value:function(e){return e.contentWindow?e.contentWindow.document:e.contentDocument?e.contentDocument:e.document?e.document:null}},{key:"insertCssRemoteFile",value:function(e,t){var n=null;if(t.id&&t.href&&null!==(n=e.getElementById(t.id)))n.href=t.href;else{var a=e.getElementsByTagName("head")[0],r=e.createDocumentFragment(),i=e.createElement("link");for(var s in i.rel="stylesheet",i.crossOrigin="*",t)i[s]=t[s];r.appendChild(i),a.appendChild(r)}}},{key:"insertJSFile",value:function(e,t,n,a){var r=e.getElementsByTagName("head")[0],i=e.createDocumentFragment(),s=e.createElement("script");s.type="text/javascript",void 0!==n&&!0!==n||(s.async=!0),s.crossOrigin="*",s.src=t,a&&(delete a.src,void 0!==a.async&&delete a.async,Object.keys(a).forEach((function(e){s.setAttribute(e,a[e])}))),i.appendChild(s),r.appendChild(i)}},{key:"prepareIframe",value:function(e){var t=this,n=this.getDocument(e);n.getElementsByTagName("head")[0].innerHTML='<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />';var a=n.getElementsByTagName("html")[0];a.setAttribute("lang","en"),a.setAttribute("dir","ltr");var r=document.implementation.createDocumentType("html","","");return n.doctype?n.replaceChild(r,n.doctype):n.insertBefore(r,n.childNodes[0]),this.props["data-css"]&&JSON.parse(this.props["data-css"]).forEach((function(e){t.insertCssRemoteFile(n,e)})),this.props["data-js"]&&JSON.parse(this.props["data-js"]).forEach((function(e){t.insertJSFile(n,e.src,!!e.async&&e.async,e)})),n.body.innerHTML=this.props["data-body"],n}},{key:"componentDidMount",value:function(){var e=this,t=document.createElement("iframe");if(t.onload=function(){for(var n=e.prepareIframe(t),a=n.body.getElementsByClassName("lhc-iframe-close"),r=0;r<a.length;r++)a[r].addEventListener("click",(function(){(0,g.$y)({id:e.props.chatwidget.getIn(["chatData","id"]),hash:e.props.chatwidget.getIn(["chatData","hash"]),msg_id:e.props["data-id"]},{action:"iframe_close"}).then((function(){e.props.updateMessage(e.props["data-id"])}))}));var i=document.getElementById("messages-scroll");if(null!==i&&(i.scrollTop=i.scrollHeight+1e3),e.props["data-js-body"]){var s=n.createElement("script");s.textContent=e.props["data-js-body"],n.head.appendChild(s)}},t.onerror=function(){console.log("Something wrong happened")},this.props["data-style"]&&(t.style=this.props["data-style"]),this.props["data-iframe"]){var n=JSON.parse(this.props["data-iframe"]);n.one_per_chat&&1==n.one_per_chat&&n["iframe-identifier"]&&function(){for(var t=document.getElementsByClassName(n["iframe-identifier"]),a=function(n){t[n].parentNode&&(0,g.$y)({id:e.props.chatwidget.getIn(["chatData","id"]),hash:e.props.chatwidget.getIn(["chatData","hash"]),msg_id:t[n].getAttribute("data-msg-id")},{action:"iframe_close"}).then((function(){e.props.updateMessage(t[n].getAttribute("data-msg-id"))}))},r=0;r<t.length;r++)a(r)}(),n["iframe-identifier"]&&(t.className=n["iframe-identifier"]),t.setAttribute("data-msg-id",this.props["data-id"])}document.getElementById("iframe-msg-"+this.props["data-id"]).appendChild(t)}},{key:"render",value:function(){return this.props.t,m.createElement("div",{id:"iframe-msg-"+this.props["data-id"]})}}]),r}(m.Component))||a;t.default=y}}]);
//# sourceMappingURL=307.743838d3441f79e939a9.js.map