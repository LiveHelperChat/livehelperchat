"use strict";(globalThis.webpackChunkLHCReactAPP=globalThis.webpackChunkLHCReactAPP||[]).push([[737],{3737:(t,e,a)=>{a.r(e),a.d(e,{default:()=>h});var i,s=a(4705),o=a(6540),p=a(7218),n=a(3115),d=a(911),c=a(1021);const h=(0,p.Ng)((t=>({chatwidget:t.chatwidget})))(i=class extends o.Component{constructor(t){super(t),(0,s.A)(this,"state",{shown:!1}),this.hideInvitation=this.hideInvitation.bind(this),this.fullInvitation=this.fullInvitation.bind(this),this.setBotPayload=this.setBotPayload.bind(this),this.expireTimeout=null}componentDidMount(){d.q.sendMessageParent("showInvitation",[{name:this.props.chatwidget.getIn(["proactive","data","invitation_name"])}]),this.props.chatwidget.getIn(["proactive","data","play_sound"])&&d.q.emitEvent("play_sound",[{type:"new_invitation",sound_on:!0===this.props.chatwidget.getIn(["proactive","data","play_sound"]),widget_open:this.props.chatwidget.get("shown")&&"widget"==this.props.chatwidget.get("mode")||document.hasFocus()}]),this.props.chatwidget.hasIn(["proactive","data","full_widget"])&&!this.props.chatwidget.get("isMobile")||document.getElementById("id-invitation-height")&&setTimeout((()=>{if(document.getElementById("id-invitation-height")){var t=document.getElementById("id-invitation-height").offsetHeight+20;d.q.sendMessageParent("hideAction",[]),d.q.sendMessageParent("widgetHeight",[{force_width:this.props.chatwidget.hasIn(["proactive","data","message_width"])?this.props.chatwidget.getIn(["proactive","data","message_width"])+40:240,force_height:t,force_bottom:this.props.chatwidget.hasIn(["proactive","data","message_bottom"])?this.props.chatwidget.getIn(["proactive","data","message_bottom"]):75,force_right:this.props.chatwidget.hasIn(["proactive","data","message_right"])?this.props.chatwidget.getIn(["proactive","data","message_right"]):75}]),setTimeout((()=>{d.q.sendMessageParent("showAction",[]),this.setState({shown:!0})}),100)}}),50),this.props.chatwidget.hasIn(["proactive","data","inv_expires"])&&(this.expireTimeout=setTimeout((()=>{this.props.dispatch((0,n.Ox)(!0))}),1e3*this.props.chatwidget.getIn(["proactive","data","inv_expires"]))),this.props.chatwidget.hasIn(["proactive","data","on_click"])&&this.appendScript(this.props.chatwidget.getIn(["proactive","data","on_click","src"]),this.props.chatwidget.getIn(["proactive","data","on_click","id"])),this.props.chatwidget.hasIn(["proactive","data","site_css"])&&this.appendCSS(this.props.chatwidget.getIn(["proactive","data","site_css"]),this.props.chatwidget.getIn(["proactive","data","site_css_id"]))}appendScript(t,e){const a=document.createElement("script");a.src=t,a.id=e,a.async=!0,document.body.appendChild(a)}appendCSS(t,e){const a=document.createElement("style");a.innerHTML=t,a.id=e,document.body.appendChild(a)}componentWillUnmount(){if(clearTimeout(this.expireTimeout),d.q.sendMessageParent("widgetHeight",[{reset_height:!0}]),this.props.chatwidget.hasIn(["proactive","data","on_click"])){var t=null;(t=document.getElementById(this.props.chatwidget.getIn(["proactive","data","on_click","id"])))&&t.parentNode.removeChild(t)}this.props.chatwidget.hasIn(["proactive","data","site_css_id"])&&(t=null,(t=document.getElementById(this.props.chatwidget.getIn(["proactive","data","site_css_id"])))&&t.parentNode.removeChild(t))}hideInvitation(t){this.props.dispatch((0,n.Ox)(this.props.chatwidget.hasIn(["proactive","data","hide_on_open"]))),t.preventDefault(),t.stopPropagation()}fullInvitation(){this.props.chatwidget.hasIn(["proactive","data","hide_on_open"])?(this.props.dispatch((0,n.Ox)(!0,!0)),this.props.chatwidget.hasIn(["proactive","data","on_click"])&&window["callback_"+this.props.chatwidget.getIn(["proactive","data","on_click","id"])]()):(d.q.sendMessageParentDirect("hideInvitation",[{full:!0,name:this.props.chatwidget.getIn(["proactive","data","invitation_name"])}]),this.props.dispatch({type:"FULL_INVITATION"}))}setBotPayload(t){this.props.setBotPayload(t),this.fullInvitation()}render(){this.props.chatwidget.hasIn(["proactive","data","full_widget"])&&!this.props.chatwidget.get("isMobile")&&this.fullInvitation();let t="";return!1===this.state.shown?t+=" invisible":t+=" fade-in",o.createElement("div",{id:"id-invitation-height",className:t},this.props.chatwidget.hasIn(["proactive","data","close_above_msg"])&&o.createElement("div",{className:"text-right"},o.createElement("button",{title:"Close",onClick:t=>this.hideInvitation(t),id:"invitation-close-btn",className:"btn btn-sm rounded"},o.createElement("i",{className:"material-icons me-0"},""))),o.createElement("div",{className:"p-2 pointer clearfix proactive-need-help",id:"proactive-wrapper",style:{width:this.props.chatwidget.hasIn(["proactive","data","message_width"])?this.props.chatwidget.getIn(["proactive","data","message_width"]):200},onClick:this.fullInvitation},!this.props.chatwidget.hasIn(["proactive","data","close_above_msg"])&&o.createElement("button",{title:"Close",onClick:t=>this.hideInvitation(t),id:"invitation-close-btn",className:"float-end btn btn-sm rounded"},o.createElement("i",{className:"material-icons me-0"},"")),this.props.chatwidget.hasIn(["proactive","data","photo_left_column"])&&this.props.chatwidget.getIn(["proactive","data","photo"])&&o.createElement("div",{className:"d-flex"},o.createElement("div",{className:"proactive-image"},o.createElement("img",{width:"30",alt:this.props.chatwidget.getIn(["proactive","data","name_support"])||this.props.chatwidget.getIn(["proactive","data","extra_profile"]),title:this.props.chatwidget.getIn(["proactive","data","name_support"])||this.props.chatwidget.getIn(["proactive","data","extra_profile"]),className:"me-2 rounded",src:this.props.chatwidget.getIn(["proactive","data","photo"])})),o.createElement("div",{className:"flex-grow-1"},!this.props.chatwidget.hasIn(["proactive","data","hide_op_name"])&&o.createElement("div",{className:"fs14"},o.createElement("b",null,this.props.chatwidget.getIn(["proactive","data","name_support"])||this.props.chatwidget.getIn(["proactive","data","extra_profile"]))),o.createElement("div",{id:"inv-msg-wrapper"},o.createElement("p",{className:"fs13 mb-0 inv-msg-cnt",dangerouslySetInnerHTML:{__html:this.props.chatwidget.getIn(["proactive","data","message"])}}),this.props.chatwidget.hasIn(["proactive","data","bot_intro"])&&o.createElement(c.A,{printButton:!1,setBotPayload:this.setBotPayload,content:this.props.chatwidget.getIn(["proactive","data","message_full"])})))),(!this.props.chatwidget.hasIn(["proactive","data","photo_left_column"])||!this.props.chatwidget.getIn(["proactive","data","photo"]))&&o.createElement("div",null,o.createElement("div",{className:"fs14"},this.props.chatwidget.getIn(["proactive","data","photo"])&&o.createElement("img",{width:"30",height:"30",alt:this.props.chatwidget.getIn(["proactive","data","name_support"])||this.props.chatwidget.getIn(["proactive","data","extra_profile"]),title:this.props.chatwidget.getIn(["proactive","data","name_support"])||this.props.chatwidget.getIn(["proactive","data","extra_profile"]),className:"me-2 rounded",src:this.props.chatwidget.getIn(["proactive","data","photo"])}),!this.props.chatwidget.hasIn(["proactive","data","hide_op_name"])&&o.createElement("b",null,this.props.chatwidget.getIn(["proactive","data","name_support"])||this.props.chatwidget.getIn(["proactive","data","extra_profile"]))),o.createElement("div",{id:"inv-msg-wrapper"},o.createElement("p",{className:"fs13 mb-0 inv-msg-cnt",dangerouslySetInnerHTML:{__html:this.props.chatwidget.getIn(["proactive","data","message"])}}),this.props.chatwidget.hasIn(["proactive","data","bot_intro"])&&o.createElement(c.A,{printButton:!1,setBotPayload:this.setBotPayload,content:this.props.chatwidget.getIn(["proactive","data","message_full"])})))))}})||i}}]);
//# sourceMappingURL=737.5a2d4b065775adad7990.js.map