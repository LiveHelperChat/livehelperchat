"use strict";(globalThis.webpackChunkLHCReactAPP=globalThis.webpackChunkLHCReactAPP||[]).push([[209],{209:(e,t,a)=>{a.r(t),a.d(t,{default:()=>d});var s,n=a(8168),i=a(4705),r=a(6540),c=a(7218),l=(a(911),a(900)),o=a(3115);const d=(0,c.Ng)((e=>({chatwidget:e.chatwidget})))(s=class extends r.Component{constructor(e){super(e),(0,i.A)(this,"state",{preg_match_rules:[]}),this.listenerAdded=!1,this.js_execute=null}handleParentMessage(e,t){if(e.data.event==t.target){let t=[];t[e.data.event]=e.data.value,this.setState(t)}}abstractClick(e,t){JSON.parse(e["data-action"]).forEach((e=>{if("add_css_class"==e.action){let t=document.querySelector(e.target);t&&t.classList.add(e.value)}else if("remove_css_class"==e.action){let t=document.querySelector(e.target);t&&t.classList.remove(e.value)}else if("chat_attr_global"==e.action)window.lhcChat[e.target]=e.value;else if("set_state"==e.action){var t={};t[e.target]=e.value,this.props.setStateParent(t)}else"post_message"==e.action?document.getElementById(e.target).contentWindow.postMessage(e.value,"*"):"listen_post_message"==e.action&&(window.addEventListener?window.addEventListener("message",(t=>{this.handleParentMessage(t,e)}),!1):window.attachEvent?window.attachEvent("onmessage",(t=>{this.handleParentMessage(t,e)})):document.attachEvent&&document.attachEvent("onmessage",(t=>{this.handleParentMessage(t,e)})))}))}componentDidMount(){null!==this.js_execute&&(0,o.tl)(this.js_execute,this)}render(){let e=this.props.chatwidget.getIn(["chat_ui",this.props.attr]);return this.props.has_new||(e=e.replace(/<newmessages>(.*)<\/newmessages>/gi,"")),this.state.preg_match_rules.forEach((t=>{e=e.replace(t.search,t.replace,"")})),r.createElement(r.Fragment,null,(0,l.Ay)(e,{replace:e=>{var t=Object.assign({},e.attribs);if(e.attribs){if(e.name&&"button"===e.name)return r.createElement("button",(0,n.A)({type:"button"},e.attribs,{onClick:e=>this.abstractClick(t,e)}),(0,l.zd)(e.children));if(e.name&&"lhcaction"===e.name)return 0==this.listenerAdded&&(this.abstractClick(t,null),this.listenerAdded=!0),"";if(e.name&&"script"===e.name&&e.attribs["data-bot-action"])return this.js_execute=e,r.createElement(r.Fragment,null)}}}))}})||s}}]);
//# sourceMappingURL=209.ba0484fac7e08ff75be9.js.map