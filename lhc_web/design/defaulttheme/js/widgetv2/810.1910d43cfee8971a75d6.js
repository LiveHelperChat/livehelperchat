"use strict";(globalThis.webpackChunkLHCReactAPP=globalThis.webpackChunkLHCReactAPP||[]).push([[810],{5810:(e,t,a)=>{a.r(t),a.d(t,{default:()=>o});var s,i=a(6540),r=a(7218),n=a(3115);const o=(0,r.Ng)((e=>({chatwidget:e.chatwidget})))(s=class extends i.Component{constructor(e){super(e)}getDocument(e){return e.contentWindow?e.contentWindow.document:e.contentDocument?e.contentDocument:e.document?e.document:null}insertCssRemoteFile(e,t){var a=null;if(t.id&&t.href&&null!==(a=e.getElementById(t.id)))a.href=t.href;else{var s=e.getElementsByTagName("head")[0],i=e.createDocumentFragment(),r=e.createElement("link");for(var n in r.rel="stylesheet",r.crossOrigin="*",t)r[n]=t[n];i.appendChild(r),s.appendChild(i)}}insertJSFile(e,t,a,s){var i=e.getElementsByTagName("head")[0],r=e.createDocumentFragment(),n=e.createElement("script");n.type="text/javascript",void 0!==a&&!0!==a||(n.async=!0),n.crossOrigin="*",n.src=t,s&&(delete s.src,void 0!==s.async&&delete s.async,Object.keys(s).forEach((e=>{n.setAttribute(e,s[e])}))),r.appendChild(n),i.appendChild(r)}prepareIframe(e){let t=this.getDocument(e);t.getElementsByTagName("head")[0].innerHTML='<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />';var a=t.getElementsByTagName("html")[0];a.setAttribute("lang","en"),a.setAttribute("dir","ltr");var s=document.implementation.createDocumentType("html","","");return t.doctype?t.replaceChild(s,t.doctype):t.insertBefore(s,t.childNodes[0]),this.props["data-css"]&&JSON.parse(this.props["data-css"]).forEach((e=>{this.insertCssRemoteFile(t,e)})),this.props["data-js"]&&JSON.parse(this.props["data-js"]).forEach((e=>{this.insertJSFile(t,e.src,!!e.async&&e.async,e)})),t.body.innerHTML=this.props["data-body"],t}prependURL(){var e=[],t="?",a=this.props.chatwidget.get("jsVars");return Object.keys(a).forEach((t=>{e.push("jsvar["+t+"]="+encodeURIComponent(a[t]))})),e.length>0&&(t=t+"&"+e.join("&")),this.props.chatwidget.hasIn(["chatData","id"])&&(t=t+"&chat_id="+this.props.chatwidget.getIn(["chatData","id"])+"&hash="+this.props.chatwidget.getIn(["chatData","hash"])+"&msg_id="+this.props["data-id"]),t}componentDidMount(){const e=document.createElement("iframe");if(this.props["data-form"]&&(e.src=this.props["data-form"]+this.prependURL()),e.onload=()=>{if(!this.props["data-form"]){var t=this.prepareIframe(e).body.getElementsByClassName("lhc-iframe-close");for(let e=0;e<t.length;e++)t[e].addEventListener("click",(()=>{(0,n.X)({id:this.props.chatwidget.getIn(["chatData","id"]),hash:this.props.chatwidget.getIn(["chatData","hash"]),msg_id:this.props["data-id"]},{action:"iframe_close"}).then((()=>{this.props.updateMessage(this.props["data-id"])}))}))}let a=document.getElementById("messages-scroll");if(null!==a&&(a.scrollTop=a.scrollHeight+1e3),!this.props["data-form"]&&this.props["data-js-body"]){let e=documentFrame.createElement("script");e.textContent=this.props["data-js-body"],documentFrame.head.appendChild(e)}},e.onerror=function(){console.log("Something wrong happened")},this.props["data-style"]&&(e.style=this.props["data-style"]),this.props["data-iframe"]){let t=JSON.parse(this.props["data-iframe"]);if(t.one_per_chat&&1==t.one_per_chat&&t["iframe-identifier"]){let e=document.getElementsByClassName(t["iframe-identifier"]);for(let t=0;t<e.length;t++)e[t].parentNode&&(0,n.X)({id:this.props.chatwidget.getIn(["chatData","id"]),hash:this.props.chatwidget.getIn(["chatData","hash"]),msg_id:e[t].getAttribute("data-msg-id")},{action:"iframe_close"}).then((()=>{this.props.updateMessage(e[t].getAttribute("data-msg-id"))}))}t["iframe-identifier"]&&(e.className=t["iframe-identifier"]),e.setAttribute("data-msg-id",this.props["data-id"])}document.getElementById("iframe-msg-"+this.props["data-id"]).appendChild(e)}render(){const{t:e}=this.props;return i.createElement("div",{id:"iframe-msg-"+this.props["data-id"]})}})||s}}]);
//# sourceMappingURL=810.1910d43cfee8971a75d6.js.map