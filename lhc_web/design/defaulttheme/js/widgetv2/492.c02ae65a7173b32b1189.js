"use strict";(globalThis.webpackChunkLHCReactAPP=globalThis.webpackChunkLHCReactAPP||[]).push([[492],{2492:(t,e,a)=>{a.r(e),a.d(e,{default:()=>b});var s,i=a(8168),n=a(4705),r=a(6540),l=a(7218),c=a(3115),u=(a(911),a(900)),o=a(9270);let d=(0,l.Ng)((t=>({chatwidget:t.chatwidget})))(s=class extends r.Component{constructor(t){super(t),(0,n.A)(this,"state",{currentQuestion:1,is_valid:null,collectedData:{},collectedQuestion:[]})}abstractClick(t,e,a){var s=this.state.collectedData,i=this.state.collectedQuestion,n=!1;"plain"==t["data-inline"]?""!=a.target.value&&(n=!0,s[t.name]=a.target.value):(n=!0,s[t.name]=t.value),!0===n&&-1===i.indexOf(e.seq)?i.push(e.seq):!1===n&&-1!==i.indexOf(e.seq)&&i.splice(i.indexOf(e.seq),1),this.setState({collectedData:s,collectedQuestion:i})}submitSurvey(){this.state.collectedData.survey_id=this.props.survey_id,this.state.collectedData.chat_id=this.props.chatwidget.getIn(["chatData","id"]),this.state.collectedData.hash=this.props.chatwidget.getIn(["chatData","hash"]),(0,c.sw)(this.state.collectedData).then((t=>{var e={is_valid:t.data.is_valid};e.feedback_text=t.data.result,this.setState(e)}))}render(){const{t}=this.props;var e=1,a=0;return(0,u.zd)(this.props.surveyOptions,{replace:t=>{t.attribs&&"voteoption"===t.name&&a++}}),r.createElement("div",null,!1===this.state.is_valid&&(0,u.Ay)(this.state.feedback_text,{replace:t=>{if(t.attribs&&t.name&&"button"===t.name)return r.createElement("button",(0,i.A)({type:"button"},t.attribs,{onClick:t=>this.setState({is_valid:null})}))}}),!0===this.state.is_valid&&r.createElement("div",null,(0,u.Ay)(this.state.feedback_text)),!0!==this.state.is_valid&&(0,u.zd)(this.props.surveyOptions,{replace:s=>{if(s.attribs&&"voteoption"===s.name){let n=this.state.currentQuestion!=e?"d-none":"";e++;let l=1==s.attribs["is-required"]&&-1===this.state.collectedQuestion.indexOf(s.attribs.seq),c="d-block pt-3"+(1==a?" text-center":""),o="btn btn-outline-secondary btn-sm"+(a>1?" float-end":"")+" btn-survey-submit";return r.createElement("div",(0,i.A)({},s.attribs,{className:n}),(0,u.zd)(s.children,{replace:t=>{if(t.attribs){if(t.name&&"input"===t.name&&t.attribs.type&&"radio"==t.attribs.type){var e=Object.assign({},t.attribs);return r.createElement("input",(0,i.A)({type:"radio"},t.attribs,{onChange:t=>this.abstractClick(e,s.attribs,t)}))}if(t.name&&"textarea"===t.name)return e=Object.assign({},t.attribs),r.createElement("textarea",(0,i.A)({style:{height:"55px"}},t.attribs,{onChange:t=>this.abstractClick(e,s.attribs,t)}))}}}),r.createElement("div",{className:c},this.state.currentQuestion>1&&r.createElement("input",{type:"button",className:"btn btn-outline-secondary btn-sm btn-survey-prev",onClick:t=>this.setState({currentQuestion:this.state.currentQuestion-1}),value:t("button.back"),name:"Prev"}),a>this.state.currentQuestion&&r.createElement("input",{disabled:l,type:"button",className:"btn btn-outline-secondary btn-sm float-end btn-survey-next",onClick:t=>this.setState({currentQuestion:this.state.currentQuestion+1}),value:t("button.next"),name:"Next"}),a==this.state.currentQuestion&&r.createElement("input",{disabled:l,type:"button",className:o,onClick:t=>this.submitSurvey(),value:t("button.submit"),name:"Submit"})))}}}))}})||s;const b=(0,o.CI)()(d)}}]);
//# sourceMappingURL=492.c02ae65a7173b32b1189.js.map