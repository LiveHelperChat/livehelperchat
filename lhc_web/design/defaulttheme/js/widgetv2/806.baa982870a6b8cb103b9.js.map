{"version":3,"file":"806.baa982870a6b8cb103b9.js","mappings":"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","sources":["webpack://LHCReactAPP/./src/components/CustomHTML.js"],"sourcesContent":["import React, { Component } from 'react';\nimport { connect } from \"react-redux\";\nimport { helperFunctions } from \"../lib/helperFunctions\";\nimport parse, { domToReact } from 'html-react-parser';\nimport { parseScript } from \"../actions/chatActions\";\n\n@connect((store) => {\n    return {\n        chatwidget: store.chatwidget\n    };\n})\n\nclass CustomHTML extends Component {\n\n    state = {\n        preg_match_rules : []\n    }\n\n\n\n    constructor(props) {\n        super(props);\n        this.listenerAdded = false;\n        this.js_execute = null;\n    }\n\n    handleParentMessage(e, item) {\n        if (e.data.event == item.target) {\n            let value = [];\n            value[e['data']['event']] = e['data']['value'];\n            this.setState(value);\n        }\n    }\n\n    abstractClick(attrs, e) {\n        JSON.parse(attrs['data-action']).forEach((item) => {\n            if (item.action == 'add_css_class') {\n                let elm = document.querySelector(item.target);\n                elm && elm.classList.add(item.value);\n            } else if (item.action == 'remove_css_class') {\n                let elm = document.querySelector(item.target);\n                elm && elm.classList.remove(item.value);\n            } else if (item.action == 'chat_attr_global') {\n                window.lhcChat[item.target] = item.value;\n            } else if (item.action == 'set_state') {\n                var params = {};\n                params[item.target] = item.value;\n                this.props.setStateParent(params);\n            } else if (item.action == 'post_message') {\n                document.getElementById(item.target).contentWindow.postMessage(item.value,'*');\n            } else if (item.action == 'listen_post_message') {\n                if (window.addEventListener) {\n                    // FF\n                    window.addEventListener(\"message\", (evt) => {this.handleParentMessage(evt,item)}, false);\n                } else if ( window.attachEvent ) {\n                    // IE\n                    window.attachEvent(\"onmessage\", (evt) => {this.handleParentMessage(evt,item)});\n                } else if ( document.attachEvent ) {\n                    // IE\n                    document.attachEvent(\"onmessage\", (evt) => {this.handleParentMessage(evt,item)});\n                };\n            }\n        });\n    }\n\n    componentDidMount() {\n        if (this.js_execute !== null) {\n            parseScript(this.js_execute, this);\n        }\n    }\n\n    render() {\n        let html = this.props.chatwidget.getIn(['chat_ui',this.props.attr]);\n\n        if (!this.props.has_new) {\n            html = html.replace( /<newmessages>(.*)<\\/newmessages>/gi, \"\");\n        }\n        \n        this.state.preg_match_rules.forEach(rule => {\n            html = html.replace(rule.search, rule.replace, \"\");\n        });\n\n        return (\n            <React.Fragment>\n                {parse(html, {\n                    replace: domNode => {\n                        var cloneAttr = Object.assign({}, domNode.attribs);\n                        if (domNode.attribs) {\n                            if (domNode.name && domNode.name === 'button') {\n                                return <button type=\"button\" {...domNode.attribs} onClick={(e) => this.abstractClick(cloneAttr, e)}>{domToReact(domNode.children)}</button>\n                            } else if (domNode.name && domNode.name === 'lhcaction') {\n                                if (this.listenerAdded == false) {\n                                    this.abstractClick(cloneAttr, null);\n                                    this.listenerAdded = true;\n                                }\n                                return \"\";\n                            } else if (domNode.name && domNode.name === 'script' && domNode.attribs['data-bot-action']) {\n                                this.js_execute = domNode;\n                                // Return empty element\n                                return <React.Fragment></React.Fragment>;\n                            }\n                        }\n                    }})}\n            </React.Fragment>\n        );\n    }\n}\n\nexport default CustomHTML;"],"names":["CustomHTML","connect","store","chatwidget","_dec","_class","_Component","props","_this","_classCallCheck","_defineProperty","preg_match_rules","listenerAdded","js_execute","_inherits","_createClass","key","value","e","item","data","event","target","this","setState","attrs","_this2","JSON","parse","forEach","action","elm","document","querySelector","classList","add","remove","window","lhcChat","params","setStateParent","getElementById","contentWindow","postMessage","addEventListener","evt","handleParentMessage","attachEvent","parseScript","_this3","html","getIn","attr","has_new","replace","state","rule","search","React","domNode","cloneAttr","Object","assign","attribs","name","_extends","type","onClick","abstractClick","domToReact","children","Component"],"ignoreList":[],"sourceRoot":""}