(window["webpackJsonpLHCReactAPP"] = window["webpackJsonpLHCReactAPP"] || []).push([[5],{

/***/ "./node_modules/vmsg/vmsg.js":
/*!***********************************!*\
  !*** ./node_modules/vmsg/vmsg.js ***!
  \***********************************/
/*! exports provided: Recorder, Form, record, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Recorder\", function() { return Recorder; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Form\", function() { return Form; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"record\", function() { return record; });\n/* eslint-disable */\n\nfunction pad2(n) {\n  n |= 0;\n  return n < 10 ? `0${n}` : `${Math.min(n, 99)}`;\n}\n\nfunction inlineWorker() {\n  // TODO(Kagami): Cache compiled module in IndexedDB? It works in FF\n  // and Edge, see: https://github.com/mdn/webassembly-examples/issues/4\n  // Though gzipped WASM module currently weights ~70kb so it should be\n  // perfectly cached by the browser itself.\n  function fetchAndInstantiate(url, imports) {\n    if (!WebAssembly.instantiateStreaming) return fetchAndInstantiateFallback(url, imports);\n    const req = fetch(url, {credentials: \"same-origin\"});\n    return WebAssembly.instantiateStreaming(req, imports).catch(err => {\n      // https://github.com/Kagami/vmsg/issues/11\n      if (err.message && err.message.indexOf(\"Argument 0 must be provided and must be a Response\") > 0) {\n        return fetchAndInstantiateFallback(url, imports);\n      } else {\n        throw err;\n      }\n    });\n  }\n\n  function fetchAndInstantiateFallback(url, imports) {\n    return new Promise((resolve, reject) => {\n      const req = new XMLHttpRequest();\n      req.open(\"GET\", url);\n      req.responseType = \"arraybuffer\";\n      req.onload = () => {\n        resolve(WebAssembly.instantiate(req.response, imports));\n      };\n      req.onerror = reject;\n      req.send();\n    });\n  }\n\n  // Must be in sync with emcc settings!\n  const TOTAL_STACK = 5 * 1024 * 1024;\n  const TOTAL_MEMORY = 16 * 1024 * 1024;\n  const WASM_PAGE_SIZE = 64 * 1024;\n  let memory = null;\n  let dynamicTop = TOTAL_STACK;\n  // TODO(Kagami): Grow memory?\n  function sbrk(increment) {\n    const oldDynamicTop = dynamicTop;\n    dynamicTop += increment;\n    return oldDynamicTop;\n  }\n  // TODO(Kagami): LAME calls exit(-1) on internal error. Would be nice\n  // to provide custom DEBUGF/ERRORF for easier debugging. Currenty\n  // those functions do nothing.\n  function exit(status) {\n    postMessage({type: \"internal-error\", data: status});\n  }\n\n  let FFI = null;\n  let ref = null;\n  let pcm_l = null;\n  function vmsg_init(rate) {\n    ref = FFI.vmsg_init(rate);\n    if (!ref) return false;\n    const pcm_l_ref = new Uint32Array(memory.buffer, ref, 1)[0];\n    pcm_l = new Float32Array(memory.buffer, pcm_l_ref);\n    return true;\n  }\n  function vmsg_encode(data) {\n    pcm_l.set(data);\n    return FFI.vmsg_encode(ref, data.length) >= 0;\n  }\n  function vmsg_flush() {\n    if (FFI.vmsg_flush(ref) < 0) return null;\n    const mp3_ref = new Uint32Array(memory.buffer, ref + 4, 1)[0];\n    const size = new Uint32Array(memory.buffer, ref + 8, 1)[0];\n    const mp3 = new Uint8Array(memory.buffer, mp3_ref, size);\n    const blob = new Blob([mp3], {type: \"audio/mpeg\"});\n    FFI.vmsg_free(ref);\n    ref = null;\n    pcm_l = null;\n    return blob;\n  }\n\n  // https://github.com/brion/min-wasm-fail\n  function testSafariWebAssemblyBug() {\n    const bin = new Uint8Array([0,97,115,109,1,0,0,0,1,6,1,96,1,127,1,127,3,2,1,0,5,3,1,0,1,7,8,1,4,116,101,115,116,0,0,10,16,1,14,0,32,0,65,1,54,2,0,32,0,40,2,0,11]);\n    const mod = new WebAssembly.Module(bin);\n    const inst = new WebAssembly.Instance(mod, {});\n    // test storing to and loading from a non-zero location via a parameter.\n    // Safari on iOS 11.2.5 returns 0 unexpectedly at non-zero locations\n    return (inst.exports.test(4) !== 0);\n  }\n\n  onmessage = (e) => {\n    const msg = e.data;\n    switch (msg.type) {\n    case \"init\":\n      const { wasmURL, shimURL } = msg.data;\n      Promise.resolve().then(() => {\n        if (self.WebAssembly && !testSafariWebAssemblyBug()) {\n          delete self.WebAssembly;\n        }\n        if (!self.WebAssembly) {\n          importScripts(shimURL);\n        }\n        memory = new WebAssembly.Memory({\n          initial: TOTAL_MEMORY / WASM_PAGE_SIZE,\n          maximum: TOTAL_MEMORY / WASM_PAGE_SIZE,\n        });\n        return {\n          memory: memory,\n          pow: Math.pow,\n          exit: exit,\n          powf: Math.pow,\n          exp: Math.exp,\n          sqrtf: Math.sqrt,\n          cos: Math.cos,\n          log: Math.log,\n          sin: Math.sin,\n          sbrk: sbrk,\n        };\n      }).then(Runtime => {\n        return fetchAndInstantiate(wasmURL, {env: Runtime})\n      }).then(wasm => {\n        FFI = wasm.instance.exports;\n        postMessage({type: \"init\", data: null});\n      }).catch(err => {\n        postMessage({type: \"init-error\", data: err.toString()});\n      });\n      break;\n    case \"start\":\n      if (!vmsg_init(msg.data)) return postMessage({type: \"error\", data: \"vmsg_init\"});\n      break;\n    case \"data\":\n      if (!vmsg_encode(msg.data)) return postMessage({type: \"error\", data: \"vmsg_encode\"});\n      break;\n    case \"stop\":\n      const blob = vmsg_flush();\n      if (!blob) return postMessage({type: \"error\", data: \"vmsg_flush\"});\n      postMessage({type: \"stop\", data: blob});\n      break;\n    }\n  };\n}\n\nclass Recorder {\n  constructor(opts = {}, onStop = null) {\n    // Can't use relative URL in blob worker, see:\n    // https://stackoverflow.com/a/22582695\n    this.wasmURL = new URL(opts.wasmURL || \"/static/js/vmsg.wasm\", location).href;\n    this.shimURL = new URL(opts.shimURL || \"/static/js/wasm-polyfill.js\", location).href;\n    this.onStop = onStop;\n    this.pitch = opts.pitch || 0;\n    this.stream = null;\n    this.audioCtx = null;\n    this.gainNode = null;\n    this.pitchFX = null;\n    this.encNode = null;\n    this.worker = null;\n    this.workerURL = null;\n    this.blob = null;\n    this.blobURL = null;\n    this.resolve = null;\n    this.reject = null;\n    Object.seal(this);\n  }\n\n  close() {\n    if (this.encNode) this.encNode.disconnect();\n    if (this.encNode) this.encNode.onaudioprocess = null;\n    if (this.stream) this.stopTracks();\n    if (this.audioCtx) this.audioCtx.close();\n    if (this.worker) this.worker.terminate();\n    if (this.workerURL) URL.revokeObjectURL(this.workerURL);\n    if (this.blobURL) URL.revokeObjectURL(this.blobURL);\n  }\n\n  // Without pitch shift:\n  //   [sourceNode] -> [gainNode] -> [encNode] -> [audioCtx.destination]\n  //                                     |\n  //                                     -> [worker]\n  // With pitch shift:\n  //   [sourceNode] -> [gainNode] -> [pitchFX] -> [encNode] -> [audioCtx.destination]\n  //                                                  |\n  //                                                  -> [worker]\n  initAudio() {\n    const getUserMedia = navigator.mediaDevices && navigator.mediaDevices.getUserMedia\n      ? function(constraints) {\n          return navigator.mediaDevices.getUserMedia(constraints);\n        }\n      : function(constraints) {\n          const oldGetUserMedia = navigator.webkitGetUserMedia || navigator.mozGetUserMedia;\n          if (!oldGetUserMedia) {\n            return Promise.reject(new Error(\"getUserMedia is not implemented in this browser\"));\n          }\n          return new Promise(function(resolve, reject) {\n            oldGetUserMedia.call(navigator, constraints, resolve, reject);\n          });\n        };\n\n    return getUserMedia({audio: true}).then((stream) => {\n      this.stream = stream;\n      const audioCtx = this.audioCtx = new (window.AudioContext\n        || window.webkitAudioContext)();\n\n      const sourceNode = audioCtx.createMediaStreamSource(stream);\n      const gainNode = this.gainNode = (audioCtx.createGain\n        || audioCtx.createGainNode).call(audioCtx);\n      gainNode.gain.value = 1;\n      sourceNode.connect(gainNode);\n\n      const pitchFX = this.pitchFX = new Jungle(audioCtx);\n      pitchFX.setPitchOffset(this.pitch);\n\n      const encNode = this.encNode = (audioCtx.createScriptProcessor\n        || audioCtx.createJavaScriptNode).call(audioCtx, 0, 1, 1);\n      pitchFX.output.connect(encNode);\n\n      gainNode.connect(this.pitch === 0 ? encNode : pitchFX.input);\n    });\n  }\n\n  initWorker() {\n    if (!this.stream) throw new Error(\"missing audio initialization\");\n    // https://stackoverflow.com/a/19201292\n    const blob = new Blob(\n      [\"(\", inlineWorker.toString(), \")()\"],\n      {type: \"application/javascript\"});\n    const workerURL = this.workerURL = URL.createObjectURL(blob);\n    const worker = this.worker = new Worker(workerURL);\n    const { wasmURL, shimURL } = this;\n    worker.postMessage({type: \"init\", data: {wasmURL, shimURL}});\n    return new Promise((resolve, reject) => {\n      worker.onmessage = (e) => {\n        const msg = e.data;\n        switch (msg.type) {\n        case \"init\":\n          resolve();\n          break;\n        case \"init-error\":\n          reject(new Error(msg.data));\n          break;\n        // TODO(Kagami): Error handling.\n        case \"error\":\n        case \"internal-error\":\n          console.error(\"Worker error:\", msg.data);\n          if (this.reject) this.reject(msg.data);\n          break;\n        case \"stop\":\n          this.blob = msg.data;\n          this.blobURL = URL.createObjectURL(msg.data);\n          if (this.onStop) this.onStop();\n          if (this.resolve) this.resolve(this.blob);\n          break;\n        }\n      }\n    });\n  }\n\n  init() {\n    return this.initAudio().then(this.initWorker.bind(this));\n  }\n\n  startRecording() {\n    if (!this.stream) throw new Error(\"missing audio initialization\");\n    if (!this.worker) throw new Error(\"missing worker initialization\");\n    this.blob = null;\n    if (this.blobURL) URL.revokeObjectURL(this.blobURL);\n    this.blobURL = null;\n    this.resolve = null;\n    this.reject = null;\n    this.worker.postMessage({type: \"start\", data: this.audioCtx.sampleRate});\n    this.encNode.onaudioprocess = (e) => {\n      const samples = e.inputBuffer.getChannelData(0);\n      this.worker.postMessage({type: \"data\", data: samples});\n    };\n    this.encNode.connect(this.audioCtx.destination);\n  }\n\n  stopRecording() {\n    if (!this.stream) throw new Error(\"missing audio initialization\");\n    if (!this.worker) throw new Error(\"missing worker initialization\");\n    this.encNode.disconnect();\n    this.encNode.onaudioprocess = null;\n    this.stopTracks();\n    this.worker.postMessage({type: \"stop\", data: null});\n    return new Promise((resolve, reject) => {\n      this.resolve = resolve;\n      this.reject = reject;\n    });\n  }\n\n  stopTracks() {\n    // Might be missed in Safari and old FF/Chrome per MDN.\n    if (this.stream.getTracks) {\n      // Hide browser's recording indicator.\n      this.stream.getTracks().forEach((track) => track.stop());\n    }\n  }\n}\n\nclass Form {\n  constructor(opts = {}, resolve, reject) {\n    this.recorder = new Recorder(opts, this.onStop.bind(this));\n    this.resolve = resolve;\n    this.reject = reject;\n    this.backdrop = null;\n    this.popup = null;\n    this.recordBtn = null;\n    this.stopBtn = null;\n    this.timer = null;\n    this.audio = null;\n    this.saveBtn = null;\n    this.tid = 0;\n    this.start = 0;\n    Object.seal(this);\n\n    this.recorder.initAudio()\n      .then(() => this.drawInit())\n      .then(() => this.recorder.initWorker())\n      .then(() => this.drawAll())\n      .catch((err) => this.drawError(err));\n  }\n\n  drawInit() {\n    if (this.backdrop) return;\n    const backdrop = this.backdrop = document.createElement(\"div\");\n    backdrop.className = \"vmsg-backdrop\";\n    backdrop.addEventListener(\"click\", () => this.close(null));\n\n    const popup = this.popup = document.createElement(\"div\");\n    popup.className = \"vmsg-popup\";\n    popup.addEventListener(\"click\", (e) => e.stopPropagation());\n\n    const progress = document.createElement(\"div\");\n    progress.className = \"vmsg-progress\";\n    for (let i = 0; i < 3; i++) {\n      const progressDot = document.createElement(\"div\");\n      progressDot.className = \"vmsg-progress-dot\";\n      progress.appendChild(progressDot);\n    }\n    popup.appendChild(progress);\n\n    backdrop.appendChild(popup);\n    document.body.appendChild(backdrop);\n  }\n\n  drawTime(msecs) {\n    const secs = Math.round(msecs / 1000);\n    this.timer.textContent = pad2(secs / 60) + \":\" + pad2(secs % 60);\n  }\n\n  drawAll() {\n    this.drawInit();\n    this.clearAll();\n\n    const recordRow = document.createElement(\"div\");\n    recordRow.className = \"vmsg-record-row\";\n    this.popup.appendChild(recordRow);\n\n    const recordBtn = this.recordBtn = document.createElement(\"button\");\n    recordBtn.className = \"vmsg-button vmsg-record-button\";\n    recordBtn.textContent = \"●\";\n    recordBtn.addEventListener(\"click\", () => this.startRecording());\n    recordRow.appendChild(recordBtn);\n\n    const stopBtn = this.stopBtn = document.createElement(\"button\");\n    stopBtn.className = \"vmsg-button vmsg-stop-button\";\n    stopBtn.style.display = \"none\";\n    stopBtn.textContent = \"■\";\n    stopBtn.addEventListener(\"click\", () => this.stopRecording());\n    recordRow.appendChild(stopBtn);\n\n    const audio = this.audio = new Audio();\n    audio.autoplay = true;\n\n    const timer = this.timer = document.createElement(\"span\");\n    timer.className = \"vmsg-timer\";\n    timer.addEventListener(\"click\", () => {\n      if (audio.paused) {\n        if (this.recorder.blobURL) {\n          audio.src = this.recorder.blobURL;\n        }\n      } else {\n        audio.pause();\n      }\n    });\n    this.drawTime(0);\n    recordRow.appendChild(timer);\n\n    const saveBtn = this.saveBtn = document.createElement(\"button\");\n    saveBtn.className = \"vmsg-button vmsg-save-button\";\n    saveBtn.textContent = \"✓\";\n    saveBtn.disabled = true;\n    saveBtn.addEventListener(\"click\", () => this.close(this.recorder.blob));\n    recordRow.appendChild(saveBtn);\n\n    const gainWrapper = document.createElement(\"div\");\n    gainWrapper.className = \"vmsg-slider-wrapper vmsg-gain-slider-wrapper\";\n    const gainSlider = document.createElement(\"input\");\n    gainSlider.className = \"vmsg-slider vmsg-gain-slider\";\n    gainSlider.setAttribute(\"type\", \"range\");\n    gainSlider.min = 0;\n    gainSlider.max = 2;\n    gainSlider.step = 0.2;\n    gainSlider.value = 1;\n    gainSlider.onchange = () => {\n      const gain = +gainSlider.value;\n      this.recorder.gainNode.gain.value = gain;\n    };\n    gainWrapper.appendChild(gainSlider);\n    this.popup.appendChild(gainWrapper);\n\n    const pitchWrapper = document.createElement(\"div\");\n    pitchWrapper.className = \"vmsg-slider-wrapper vmsg-pitch-slider-wrapper\";\n    const pitchSlider = document.createElement(\"input\");\n    pitchSlider.className = \"vmsg-slider vmsg-pitch-slider\";\n    pitchSlider.setAttribute(\"type\", \"range\");\n    pitchSlider.min = -1;\n    pitchSlider.max = 1;\n    pitchSlider.step = 0.2;\n    pitchSlider.value = this.recorder.pitch;\n    pitchSlider.onchange = () => {\n      const pitch = +pitchSlider.value;\n      this.recorder.pitchFX.setPitchOffset(pitch);\n      this.recorder.gainNode.disconnect();\n      this.recorder.gainNode.connect(\n        pitch === 0 ? this.recorder.encNode : this.recorder.pitchFX.input\n      );\n    };\n    pitchWrapper.appendChild(pitchSlider);\n    this.popup.appendChild(pitchWrapper);\n  }\n\n  drawError(err) {\n    console.error(err);\n    this.drawInit();\n    this.clearAll();\n    const error = document.createElement(\"div\");\n    error.className = \"vmsg-error\";\n    error.textContent = err.toString();\n    this.popup.appendChild(error);\n  }\n\n  clearAll() {\n    if (!this.popup) return;\n    this.popup.innerHTML = \"\";\n  }\n\n  close(blob) {\n    if (this.audio) this.audio.pause();\n    if (this.tid) clearTimeout(this.tid);\n    this.recorder.close();\n    this.backdrop.remove();\n    if (blob) {\n      this.resolve(blob);\n    } else {\n      this.reject(new Error(\"No record made\"));\n    }\n  }\n\n  onStop() {\n    this.recordBtn.style.display = \"\";\n    this.stopBtn.style.display = \"none\";\n    this.stopBtn.disabled = false;\n    this.saveBtn.disabled = false;\n  }\n\n  startRecording() {\n    this.audio.pause();\n    this.start = Date.now();\n    this.updateTime();\n    this.recordBtn.style.display = \"none\";\n    this.stopBtn.style.display = \"\";\n    this.saveBtn.disabled = true;\n    this.recorder.startRecording();\n  }\n\n  stopRecording() {\n    clearTimeout(this.tid);\n    this.tid = 0;\n    this.stopBtn.disabled = true;\n    this.recorder.stopRecording();\n  }\n\n  updateTime() {\n    // NOTE(Kagami): We can do this in `onaudioprocess` but that would\n    // run too often and create unnecessary DOM updates.\n    this.drawTime(Date.now() - this.start);\n    this.tid = setTimeout(() => this.updateTime(), 300);\n  }\n}\n\nlet shown = false;\n\n/**\n * Record a new voice message.\n *\n * @param {Object=} opts - Options\n * @param {string=} opts.wasmURL - URL of the module\n *                                 (\"/static/js/vmsg.wasm\" by default)\n * @param {string=} opts.shimURL - URL of the WebAssembly polyfill\n *                                 (\"/static/js/wasm-polyfill.js\" by default)\n * @param {number=} opts.pitch - Initial pitch shift ([-1, 1], 0 by default)\n * @return {Promise.<Blob>} A promise that contains recorded blob when fulfilled.\n */\nfunction record(opts) {\n  return new Promise((resolve, reject) => {\n    if (shown) throw new Error(\"Record form is already opened\");\n    shown = true;\n    new Form(opts, resolve, reject);\n  // Use `.finally` once it's available in Safari and Edge.\n  }).then(result => {\n    shown = false;\n    return result;\n  }, err => {\n    shown = false;\n    throw err;\n  });\n}\n\n/**\n * All available public items.\n */\n/* harmony default export */ __webpack_exports__[\"default\"] = ({ Recorder, Form, record });\n\n// Borrowed from and slightly modified:\n// https://github.com/cwilso/Audio-Input-Effects/blob/master/js/jungle.js\n\n// Copyright 2012, Google Inc.\n// All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions are\n// met:\n//\n//     * Redistributions of source code must retain the above copyright\n// notice, this list of conditions and the following disclaimer.\n//     * Redistributions in binary form must reproduce the above\n// copyright notice, this list of conditions and the following disclaimer\n// in the documentation and/or other materials provided with the\n// distribution.\n//     * Neither the name of Google Inc. nor the names of its\n// contributors may be used to endorse or promote products derived from\n// this software without specific prior written permission.\n//\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n// \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n// OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\nconst delayTime = 0.100;\nconst fadeTime = 0.050;\nconst bufferTime = 0.100;\n\nfunction createFadeBuffer(context, activeTime, fadeTime) {\n  var length1 = activeTime * context.sampleRate;\n  var length2 = (activeTime - 2*fadeTime) * context.sampleRate;\n  var length = length1 + length2;\n  var buffer = context.createBuffer(1, length, context.sampleRate);\n  var p = buffer.getChannelData(0);\n\n  var fadeLength = fadeTime * context.sampleRate;\n\n  var fadeIndex1 = fadeLength;\n  var fadeIndex2 = length1 - fadeLength;\n\n  // 1st part of cycle\n  for (var i = 0; i < length1; ++i) {\n    var value;\n\n    if (i < fadeIndex1) {\n        value = Math.sqrt(i / fadeLength);\n    } else if (i >= fadeIndex2) {\n        value = Math.sqrt(1 - (i - fadeIndex2) / fadeLength);\n    } else {\n        value = 1;\n    }\n\n    p[i] = value;\n  }\n\n  // 2nd part\n  for (var i = length1; i < length; ++i) {\n    p[i] = 0;\n  }\n\n  return buffer;\n}\n\nfunction createDelayTimeBuffer(context, activeTime, fadeTime, shiftUp) {\n  var length1 = activeTime * context.sampleRate;\n  var length2 = (activeTime - 2*fadeTime) * context.sampleRate;\n  var length = length1 + length2;\n  var buffer = context.createBuffer(1, length, context.sampleRate);\n  var p = buffer.getChannelData(0);\n\n  // 1st part of cycle\n  for (var i = 0; i < length1; ++i) {\n    if (shiftUp)\n      // This line does shift-up transpose\n      p[i] = (length1-i)/length;\n    else\n      // This line does shift-down transpose\n      p[i] = i / length1;\n  }\n\n  // 2nd part\n  for (var i = length1; i < length; ++i) {\n    p[i] = 0;\n  }\n\n  return buffer;\n}\n\nfunction Jungle(context) {\n  this.context = context;\n  // Create nodes for the input and output of this \"module\".\n  var input = (context.createGain || context.createGainNode).call(context);\n  var output = (context.createGain || context.createGainNode).call(context);\n  this.input = input;\n  this.output = output;\n\n  // Delay modulation.\n  var mod1 = context.createBufferSource();\n  var mod2 = context.createBufferSource();\n  var mod3 = context.createBufferSource();\n  var mod4 = context.createBufferSource();\n  this.shiftDownBuffer = createDelayTimeBuffer(context, bufferTime, fadeTime, false);\n  this.shiftUpBuffer = createDelayTimeBuffer(context, bufferTime, fadeTime, true);\n  mod1.buffer = this.shiftDownBuffer;\n  mod2.buffer = this.shiftDownBuffer;\n  mod3.buffer = this.shiftUpBuffer;\n  mod4.buffer = this.shiftUpBuffer;\n  mod1.loop = true;\n  mod2.loop = true;\n  mod3.loop = true;\n  mod4.loop = true;\n\n  // for switching between oct-up and oct-down\n  var mod1Gain = (context.createGain || context.createGainNode).call(context);\n  var mod2Gain = (context.createGain || context.createGainNode).call(context);\n  var mod3Gain = (context.createGain || context.createGainNode).call(context);\n  mod3Gain.gain.value = 0;\n  var mod4Gain = (context.createGain || context.createGainNode).call(context);\n  mod4Gain.gain.value = 0;\n\n  mod1.connect(mod1Gain);\n  mod2.connect(mod2Gain);\n  mod3.connect(mod3Gain);\n  mod4.connect(mod4Gain);\n\n  // Delay amount for changing pitch.\n  var modGain1 = (context.createGain || context.createGainNode).call(context);\n  var modGain2 = (context.createGain || context.createGainNode).call(context);\n\n  var delay1 = (context.createDelay || context.createDelayNode).call(context);\n  var delay2 = (context.createDelay || context.createDelayNode).call(context);\n  mod1Gain.connect(modGain1);\n  mod2Gain.connect(modGain2);\n  mod3Gain.connect(modGain1);\n  mod4Gain.connect(modGain2);\n  modGain1.connect(delay1.delayTime);\n  modGain2.connect(delay2.delayTime);\n\n  // Crossfading.\n  var fade1 = context.createBufferSource();\n  var fade2 = context.createBufferSource();\n  var fadeBuffer = createFadeBuffer(context, bufferTime, fadeTime);\n  fade1.buffer = fadeBuffer\n  fade2.buffer = fadeBuffer;\n  fade1.loop = true;\n  fade2.loop = true;\n\n  var mix1 = (context.createGain || context.createGainNode).call(context);\n  var mix2 = (context.createGain || context.createGainNode).call(context);\n  mix1.gain.value = 0;\n  mix2.gain.value = 0;\n\n  fade1.connect(mix1.gain);\n  fade2.connect(mix2.gain);\n\n  // Connect processing graph.\n  input.connect(delay1);\n  input.connect(delay2);\n  delay1.connect(mix1);\n  delay2.connect(mix2);\n  mix1.connect(output);\n  mix2.connect(output);\n\n  // Start\n  var t = context.currentTime + 0.050;\n  var t2 = t + bufferTime - fadeTime;\n  mod1.start(t);\n  mod2.start(t2);\n  mod3.start(t);\n  mod4.start(t2);\n  fade1.start(t);\n  fade2.start(t2);\n\n  this.mod1 = mod1;\n  this.mod2 = mod2;\n  this.mod1Gain = mod1Gain;\n  this.mod2Gain = mod2Gain;\n  this.mod3Gain = mod3Gain;\n  this.mod4Gain = mod4Gain;\n  this.modGain1 = modGain1;\n  this.modGain2 = modGain2;\n  this.fade1 = fade1;\n  this.fade2 = fade2;\n  this.mix1 = mix1;\n  this.mix2 = mix2;\n  this.delay1 = delay1;\n  this.delay2 = delay2;\n\n  this.setDelay(delayTime);\n}\n\nJungle.prototype.setDelay = function(delayTime) {\n  this.modGain1.gain.setTargetAtTime(0.5*delayTime, 0, 0.010);\n  this.modGain2.gain.setTargetAtTime(0.5*delayTime, 0, 0.010);\n};\n\nJungle.prototype.setPitchOffset = function(mult) {\n  if (mult>0) { // pitch up\n    this.mod1Gain.gain.value = 0;\n    this.mod2Gain.gain.value = 0;\n    this.mod3Gain.gain.value = 1;\n    this.mod4Gain.gain.value = 1;\n  } else { // pitch down\n    this.mod1Gain.gain.value = 1;\n    this.mod2Gain.gain.value = 1;\n    this.mod3Gain.gain.value = 0;\n    this.mod4Gain.gain.value = 0;\n  }\n  this.setDelay(delayTime*Math.abs(mult));\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvdm1zZy92bXNnLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vTEhDUmVhY3RBUFAvLi9ub2RlX21vZHVsZXMvdm1zZy92bXNnLmpzPzUxNWIiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgKi9cblxuZnVuY3Rpb24gcGFkMihuKSB7XG4gIG4gfD0gMDtcbiAgcmV0dXJuIG4gPCAxMCA/IGAwJHtufWAgOiBgJHtNYXRoLm1pbihuLCA5OSl9YDtcbn1cblxuZnVuY3Rpb24gaW5saW5lV29ya2VyKCkge1xuICAvLyBUT0RPKEthZ2FtaSk6IENhY2hlIGNvbXBpbGVkIG1vZHVsZSBpbiBJbmRleGVkREI/IEl0IHdvcmtzIGluIEZGXG4gIC8vIGFuZCBFZGdlLCBzZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9tZG4vd2ViYXNzZW1ibHktZXhhbXBsZXMvaXNzdWVzLzRcbiAgLy8gVGhvdWdoIGd6aXBwZWQgV0FTTSBtb2R1bGUgY3VycmVudGx5IHdlaWdodHMgfjcwa2Igc28gaXQgc2hvdWxkIGJlXG4gIC8vIHBlcmZlY3RseSBjYWNoZWQgYnkgdGhlIGJyb3dzZXIgaXRzZWxmLlxuICBmdW5jdGlvbiBmZXRjaEFuZEluc3RhbnRpYXRlKHVybCwgaW1wb3J0cykge1xuICAgIGlmICghV2ViQXNzZW1ibHkuaW5zdGFudGlhdGVTdHJlYW1pbmcpIHJldHVybiBmZXRjaEFuZEluc3RhbnRpYXRlRmFsbGJhY2sodXJsLCBpbXBvcnRzKTtcbiAgICBjb25zdCByZXEgPSBmZXRjaCh1cmwsIHtjcmVkZW50aWFsczogXCJzYW1lLW9yaWdpblwifSk7XG4gICAgcmV0dXJuIFdlYkFzc2VtYmx5Lmluc3RhbnRpYXRlU3RyZWFtaW5nKHJlcSwgaW1wb3J0cykuY2F0Y2goZXJyID0+IHtcbiAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9LYWdhbWkvdm1zZy9pc3N1ZXMvMTFcbiAgICAgIGlmIChlcnIubWVzc2FnZSAmJiBlcnIubWVzc2FnZS5pbmRleE9mKFwiQXJndW1lbnQgMCBtdXN0IGJlIHByb3ZpZGVkIGFuZCBtdXN0IGJlIGEgUmVzcG9uc2VcIikgPiAwKSB7XG4gICAgICAgIHJldHVybiBmZXRjaEFuZEluc3RhbnRpYXRlRmFsbGJhY2sodXJsLCBpbXBvcnRzKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IGVycjtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGZldGNoQW5kSW5zdGFudGlhdGVGYWxsYmFjayh1cmwsIGltcG9ydHMpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgY29uc3QgcmVxID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgICByZXEub3BlbihcIkdFVFwiLCB1cmwpO1xuICAgICAgcmVxLnJlc3BvbnNlVHlwZSA9IFwiYXJyYXlidWZmZXJcIjtcbiAgICAgIHJlcS5vbmxvYWQgPSAoKSA9PiB7XG4gICAgICAgIHJlc29sdmUoV2ViQXNzZW1ibHkuaW5zdGFudGlhdGUocmVxLnJlc3BvbnNlLCBpbXBvcnRzKSk7XG4gICAgICB9O1xuICAgICAgcmVxLm9uZXJyb3IgPSByZWplY3Q7XG4gICAgICByZXEuc2VuZCgpO1xuICAgIH0pO1xuICB9XG5cbiAgLy8gTXVzdCBiZSBpbiBzeW5jIHdpdGggZW1jYyBzZXR0aW5ncyFcbiAgY29uc3QgVE9UQUxfU1RBQ0sgPSA1ICogMTAyNCAqIDEwMjQ7XG4gIGNvbnN0IFRPVEFMX01FTU9SWSA9IDE2ICogMTAyNCAqIDEwMjQ7XG4gIGNvbnN0IFdBU01fUEFHRV9TSVpFID0gNjQgKiAxMDI0O1xuICBsZXQgbWVtb3J5ID0gbnVsbDtcbiAgbGV0IGR5bmFtaWNUb3AgPSBUT1RBTF9TVEFDSztcbiAgLy8gVE9ETyhLYWdhbWkpOiBHcm93IG1lbW9yeT9cbiAgZnVuY3Rpb24gc2JyayhpbmNyZW1lbnQpIHtcbiAgICBjb25zdCBvbGREeW5hbWljVG9wID0gZHluYW1pY1RvcDtcbiAgICBkeW5hbWljVG9wICs9IGluY3JlbWVudDtcbiAgICByZXR1cm4gb2xkRHluYW1pY1RvcDtcbiAgfVxuICAvLyBUT0RPKEthZ2FtaSk6IExBTUUgY2FsbHMgZXhpdCgtMSkgb24gaW50ZXJuYWwgZXJyb3IuIFdvdWxkIGJlIG5pY2VcbiAgLy8gdG8gcHJvdmlkZSBjdXN0b20gREVCVUdGL0VSUk9SRiBmb3IgZWFzaWVyIGRlYnVnZ2luZy4gQ3VycmVudHlcbiAgLy8gdGhvc2UgZnVuY3Rpb25zIGRvIG5vdGhpbmcuXG4gIGZ1bmN0aW9uIGV4aXQoc3RhdHVzKSB7XG4gICAgcG9zdE1lc3NhZ2Uoe3R5cGU6IFwiaW50ZXJuYWwtZXJyb3JcIiwgZGF0YTogc3RhdHVzfSk7XG4gIH1cblxuICBsZXQgRkZJID0gbnVsbDtcbiAgbGV0IHJlZiA9IG51bGw7XG4gIGxldCBwY21fbCA9IG51bGw7XG4gIGZ1bmN0aW9uIHZtc2dfaW5pdChyYXRlKSB7XG4gICAgcmVmID0gRkZJLnZtc2dfaW5pdChyYXRlKTtcbiAgICBpZiAoIXJlZikgcmV0dXJuIGZhbHNlO1xuICAgIGNvbnN0IHBjbV9sX3JlZiA9IG5ldyBVaW50MzJBcnJheShtZW1vcnkuYnVmZmVyLCByZWYsIDEpWzBdO1xuICAgIHBjbV9sID0gbmV3IEZsb2F0MzJBcnJheShtZW1vcnkuYnVmZmVyLCBwY21fbF9yZWYpO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIGZ1bmN0aW9uIHZtc2dfZW5jb2RlKGRhdGEpIHtcbiAgICBwY21fbC5zZXQoZGF0YSk7XG4gICAgcmV0dXJuIEZGSS52bXNnX2VuY29kZShyZWYsIGRhdGEubGVuZ3RoKSA+PSAwO1xuICB9XG4gIGZ1bmN0aW9uIHZtc2dfZmx1c2goKSB7XG4gICAgaWYgKEZGSS52bXNnX2ZsdXNoKHJlZikgPCAwKSByZXR1cm4gbnVsbDtcbiAgICBjb25zdCBtcDNfcmVmID0gbmV3IFVpbnQzMkFycmF5KG1lbW9yeS5idWZmZXIsIHJlZiArIDQsIDEpWzBdO1xuICAgIGNvbnN0IHNpemUgPSBuZXcgVWludDMyQXJyYXkobWVtb3J5LmJ1ZmZlciwgcmVmICsgOCwgMSlbMF07XG4gICAgY29uc3QgbXAzID0gbmV3IFVpbnQ4QXJyYXkobWVtb3J5LmJ1ZmZlciwgbXAzX3JlZiwgc2l6ZSk7XG4gICAgY29uc3QgYmxvYiA9IG5ldyBCbG9iKFttcDNdLCB7dHlwZTogXCJhdWRpby9tcGVnXCJ9KTtcbiAgICBGRkkudm1zZ19mcmVlKHJlZik7XG4gICAgcmVmID0gbnVsbDtcbiAgICBwY21fbCA9IG51bGw7XG4gICAgcmV0dXJuIGJsb2I7XG4gIH1cblxuICAvLyBodHRwczovL2dpdGh1Yi5jb20vYnJpb24vbWluLXdhc20tZmFpbFxuICBmdW5jdGlvbiB0ZXN0U2FmYXJpV2ViQXNzZW1ibHlCdWcoKSB7XG4gICAgY29uc3QgYmluID0gbmV3IFVpbnQ4QXJyYXkoWzAsOTcsMTE1LDEwOSwxLDAsMCwwLDEsNiwxLDk2LDEsMTI3LDEsMTI3LDMsMiwxLDAsNSwzLDEsMCwxLDcsOCwxLDQsMTE2LDEwMSwxMTUsMTE2LDAsMCwxMCwxNiwxLDE0LDAsMzIsMCw2NSwxLDU0LDIsMCwzMiwwLDQwLDIsMCwxMV0pO1xuICAgIGNvbnN0IG1vZCA9IG5ldyBXZWJBc3NlbWJseS5Nb2R1bGUoYmluKTtcbiAgICBjb25zdCBpbnN0ID0gbmV3IFdlYkFzc2VtYmx5Lkluc3RhbmNlKG1vZCwge30pO1xuICAgIC8vIHRlc3Qgc3RvcmluZyB0byBhbmQgbG9hZGluZyBmcm9tIGEgbm9uLXplcm8gbG9jYXRpb24gdmlhIGEgcGFyYW1ldGVyLlxuICAgIC8vIFNhZmFyaSBvbiBpT1MgMTEuMi41IHJldHVybnMgMCB1bmV4cGVjdGVkbHkgYXQgbm9uLXplcm8gbG9jYXRpb25zXG4gICAgcmV0dXJuIChpbnN0LmV4cG9ydHMudGVzdCg0KSAhPT0gMCk7XG4gIH1cblxuICBvbm1lc3NhZ2UgPSAoZSkgPT4ge1xuICAgIGNvbnN0IG1zZyA9IGUuZGF0YTtcbiAgICBzd2l0Y2ggKG1zZy50eXBlKSB7XG4gICAgY2FzZSBcImluaXRcIjpcbiAgICAgIGNvbnN0IHsgd2FzbVVSTCwgc2hpbVVSTCB9ID0gbXNnLmRhdGE7XG4gICAgICBQcm9taXNlLnJlc29sdmUoKS50aGVuKCgpID0+IHtcbiAgICAgICAgaWYgKHNlbGYuV2ViQXNzZW1ibHkgJiYgIXRlc3RTYWZhcmlXZWJBc3NlbWJseUJ1ZygpKSB7XG4gICAgICAgICAgZGVsZXRlIHNlbGYuV2ViQXNzZW1ibHk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFzZWxmLldlYkFzc2VtYmx5KSB7XG4gICAgICAgICAgaW1wb3J0U2NyaXB0cyhzaGltVVJMKTtcbiAgICAgICAgfVxuICAgICAgICBtZW1vcnkgPSBuZXcgV2ViQXNzZW1ibHkuTWVtb3J5KHtcbiAgICAgICAgICBpbml0aWFsOiBUT1RBTF9NRU1PUlkgLyBXQVNNX1BBR0VfU0laRSxcbiAgICAgICAgICBtYXhpbXVtOiBUT1RBTF9NRU1PUlkgLyBXQVNNX1BBR0VfU0laRSxcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgbWVtb3J5OiBtZW1vcnksXG4gICAgICAgICAgcG93OiBNYXRoLnBvdyxcbiAgICAgICAgICBleGl0OiBleGl0LFxuICAgICAgICAgIHBvd2Y6IE1hdGgucG93LFxuICAgICAgICAgIGV4cDogTWF0aC5leHAsXG4gICAgICAgICAgc3FydGY6IE1hdGguc3FydCxcbiAgICAgICAgICBjb3M6IE1hdGguY29zLFxuICAgICAgICAgIGxvZzogTWF0aC5sb2csXG4gICAgICAgICAgc2luOiBNYXRoLnNpbixcbiAgICAgICAgICBzYnJrOiBzYnJrLFxuICAgICAgICB9O1xuICAgICAgfSkudGhlbihSdW50aW1lID0+IHtcbiAgICAgICAgcmV0dXJuIGZldGNoQW5kSW5zdGFudGlhdGUod2FzbVVSTCwge2VudjogUnVudGltZX0pXG4gICAgICB9KS50aGVuKHdhc20gPT4ge1xuICAgICAgICBGRkkgPSB3YXNtLmluc3RhbmNlLmV4cG9ydHM7XG4gICAgICAgIHBvc3RNZXNzYWdlKHt0eXBlOiBcImluaXRcIiwgZGF0YTogbnVsbH0pO1xuICAgICAgfSkuY2F0Y2goZXJyID0+IHtcbiAgICAgICAgcG9zdE1lc3NhZ2Uoe3R5cGU6IFwiaW5pdC1lcnJvclwiLCBkYXRhOiBlcnIudG9TdHJpbmcoKX0pO1xuICAgICAgfSk7XG4gICAgICBicmVhaztcbiAgICBjYXNlIFwic3RhcnRcIjpcbiAgICAgIGlmICghdm1zZ19pbml0KG1zZy5kYXRhKSkgcmV0dXJuIHBvc3RNZXNzYWdlKHt0eXBlOiBcImVycm9yXCIsIGRhdGE6IFwidm1zZ19pbml0XCJ9KTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgXCJkYXRhXCI6XG4gICAgICBpZiAoIXZtc2dfZW5jb2RlKG1zZy5kYXRhKSkgcmV0dXJuIHBvc3RNZXNzYWdlKHt0eXBlOiBcImVycm9yXCIsIGRhdGE6IFwidm1zZ19lbmNvZGVcIn0pO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBcInN0b3BcIjpcbiAgICAgIGNvbnN0IGJsb2IgPSB2bXNnX2ZsdXNoKCk7XG4gICAgICBpZiAoIWJsb2IpIHJldHVybiBwb3N0TWVzc2FnZSh7dHlwZTogXCJlcnJvclwiLCBkYXRhOiBcInZtc2dfZmx1c2hcIn0pO1xuICAgICAgcG9zdE1lc3NhZ2Uoe3R5cGU6IFwic3RvcFwiLCBkYXRhOiBibG9ifSk7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH07XG59XG5cbmV4cG9ydCBjbGFzcyBSZWNvcmRlciB7XG4gIGNvbnN0cnVjdG9yKG9wdHMgPSB7fSwgb25TdG9wID0gbnVsbCkge1xuICAgIC8vIENhbid0IHVzZSByZWxhdGl2ZSBVUkwgaW4gYmxvYiB3b3JrZXIsIHNlZTpcbiAgICAvLyBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMjI1ODI2OTVcbiAgICB0aGlzLndhc21VUkwgPSBuZXcgVVJMKG9wdHMud2FzbVVSTCB8fCBcIi9zdGF0aWMvanMvdm1zZy53YXNtXCIsIGxvY2F0aW9uKS5ocmVmO1xuICAgIHRoaXMuc2hpbVVSTCA9IG5ldyBVUkwob3B0cy5zaGltVVJMIHx8IFwiL3N0YXRpYy9qcy93YXNtLXBvbHlmaWxsLmpzXCIsIGxvY2F0aW9uKS5ocmVmO1xuICAgIHRoaXMub25TdG9wID0gb25TdG9wO1xuICAgIHRoaXMucGl0Y2ggPSBvcHRzLnBpdGNoIHx8IDA7XG4gICAgdGhpcy5zdHJlYW0gPSBudWxsO1xuICAgIHRoaXMuYXVkaW9DdHggPSBudWxsO1xuICAgIHRoaXMuZ2Fpbk5vZGUgPSBudWxsO1xuICAgIHRoaXMucGl0Y2hGWCA9IG51bGw7XG4gICAgdGhpcy5lbmNOb2RlID0gbnVsbDtcbiAgICB0aGlzLndvcmtlciA9IG51bGw7XG4gICAgdGhpcy53b3JrZXJVUkwgPSBudWxsO1xuICAgIHRoaXMuYmxvYiA9IG51bGw7XG4gICAgdGhpcy5ibG9iVVJMID0gbnVsbDtcbiAgICB0aGlzLnJlc29sdmUgPSBudWxsO1xuICAgIHRoaXMucmVqZWN0ID0gbnVsbDtcbiAgICBPYmplY3Quc2VhbCh0aGlzKTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIGlmICh0aGlzLmVuY05vZGUpIHRoaXMuZW5jTm9kZS5kaXNjb25uZWN0KCk7XG4gICAgaWYgKHRoaXMuZW5jTm9kZSkgdGhpcy5lbmNOb2RlLm9uYXVkaW9wcm9jZXNzID0gbnVsbDtcbiAgICBpZiAodGhpcy5zdHJlYW0pIHRoaXMuc3RvcFRyYWNrcygpO1xuICAgIGlmICh0aGlzLmF1ZGlvQ3R4KSB0aGlzLmF1ZGlvQ3R4LmNsb3NlKCk7XG4gICAgaWYgKHRoaXMud29ya2VyKSB0aGlzLndvcmtlci50ZXJtaW5hdGUoKTtcbiAgICBpZiAodGhpcy53b3JrZXJVUkwpIFVSTC5yZXZva2VPYmplY3RVUkwodGhpcy53b3JrZXJVUkwpO1xuICAgIGlmICh0aGlzLmJsb2JVUkwpIFVSTC5yZXZva2VPYmplY3RVUkwodGhpcy5ibG9iVVJMKTtcbiAgfVxuXG4gIC8vIFdpdGhvdXQgcGl0Y2ggc2hpZnQ6XG4gIC8vICAgW3NvdXJjZU5vZGVdIC0+IFtnYWluTm9kZV0gLT4gW2VuY05vZGVdIC0+IFthdWRpb0N0eC5kZXN0aW5hdGlvbl1cbiAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtPiBbd29ya2VyXVxuICAvLyBXaXRoIHBpdGNoIHNoaWZ0OlxuICAvLyAgIFtzb3VyY2VOb2RlXSAtPiBbZ2Fpbk5vZGVdIC0+IFtwaXRjaEZYXSAtPiBbZW5jTm9kZV0gLT4gW2F1ZGlvQ3R4LmRlc3RpbmF0aW9uXVxuICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLT4gW3dvcmtlcl1cbiAgaW5pdEF1ZGlvKCkge1xuICAgIGNvbnN0IGdldFVzZXJNZWRpYSA9IG5hdmlnYXRvci5tZWRpYURldmljZXMgJiYgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWFcbiAgICAgID8gZnVuY3Rpb24oY29uc3RyYWludHMpIHtcbiAgICAgICAgICByZXR1cm4gbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEoY29uc3RyYWludHMpO1xuICAgICAgICB9XG4gICAgICA6IGZ1bmN0aW9uKGNvbnN0cmFpbnRzKSB7XG4gICAgICAgICAgY29uc3Qgb2xkR2V0VXNlck1lZGlhID0gbmF2aWdhdG9yLndlYmtpdEdldFVzZXJNZWRpYSB8fCBuYXZpZ2F0b3IubW96R2V0VXNlck1lZGlhO1xuICAgICAgICAgIGlmICghb2xkR2V0VXNlck1lZGlhKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKFwiZ2V0VXNlck1lZGlhIGlzIG5vdCBpbXBsZW1lbnRlZCBpbiB0aGlzIGJyb3dzZXJcIikpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICBvbGRHZXRVc2VyTWVkaWEuY2FsbChuYXZpZ2F0b3IsIGNvbnN0cmFpbnRzLCByZXNvbHZlLCByZWplY3QpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgcmV0dXJuIGdldFVzZXJNZWRpYSh7YXVkaW86IHRydWV9KS50aGVuKChzdHJlYW0pID0+IHtcbiAgICAgIHRoaXMuc3RyZWFtID0gc3RyZWFtO1xuICAgICAgY29uc3QgYXVkaW9DdHggPSB0aGlzLmF1ZGlvQ3R4ID0gbmV3ICh3aW5kb3cuQXVkaW9Db250ZXh0XG4gICAgICAgIHx8IHdpbmRvdy53ZWJraXRBdWRpb0NvbnRleHQpKCk7XG5cbiAgICAgIGNvbnN0IHNvdXJjZU5vZGUgPSBhdWRpb0N0eC5jcmVhdGVNZWRpYVN0cmVhbVNvdXJjZShzdHJlYW0pO1xuICAgICAgY29uc3QgZ2Fpbk5vZGUgPSB0aGlzLmdhaW5Ob2RlID0gKGF1ZGlvQ3R4LmNyZWF0ZUdhaW5cbiAgICAgICAgfHwgYXVkaW9DdHguY3JlYXRlR2Fpbk5vZGUpLmNhbGwoYXVkaW9DdHgpO1xuICAgICAgZ2Fpbk5vZGUuZ2Fpbi52YWx1ZSA9IDE7XG4gICAgICBzb3VyY2VOb2RlLmNvbm5lY3QoZ2Fpbk5vZGUpO1xuXG4gICAgICBjb25zdCBwaXRjaEZYID0gdGhpcy5waXRjaEZYID0gbmV3IEp1bmdsZShhdWRpb0N0eCk7XG4gICAgICBwaXRjaEZYLnNldFBpdGNoT2Zmc2V0KHRoaXMucGl0Y2gpO1xuXG4gICAgICBjb25zdCBlbmNOb2RlID0gdGhpcy5lbmNOb2RlID0gKGF1ZGlvQ3R4LmNyZWF0ZVNjcmlwdFByb2Nlc3NvclxuICAgICAgICB8fCBhdWRpb0N0eC5jcmVhdGVKYXZhU2NyaXB0Tm9kZSkuY2FsbChhdWRpb0N0eCwgMCwgMSwgMSk7XG4gICAgICBwaXRjaEZYLm91dHB1dC5jb25uZWN0KGVuY05vZGUpO1xuXG4gICAgICBnYWluTm9kZS5jb25uZWN0KHRoaXMucGl0Y2ggPT09IDAgPyBlbmNOb2RlIDogcGl0Y2hGWC5pbnB1dCk7XG4gICAgfSk7XG4gIH1cblxuICBpbml0V29ya2VyKCkge1xuICAgIGlmICghdGhpcy5zdHJlYW0pIHRocm93IG5ldyBFcnJvcihcIm1pc3NpbmcgYXVkaW8gaW5pdGlhbGl6YXRpb25cIik7XG4gICAgLy8gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9hLzE5MjAxMjkyXG4gICAgY29uc3QgYmxvYiA9IG5ldyBCbG9iKFxuICAgICAgW1wiKFwiLCBpbmxpbmVXb3JrZXIudG9TdHJpbmcoKSwgXCIpKClcIl0sXG4gICAgICB7dHlwZTogXCJhcHBsaWNhdGlvbi9qYXZhc2NyaXB0XCJ9KTtcbiAgICBjb25zdCB3b3JrZXJVUkwgPSB0aGlzLndvcmtlclVSTCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XG4gICAgY29uc3Qgd29ya2VyID0gdGhpcy53b3JrZXIgPSBuZXcgV29ya2VyKHdvcmtlclVSTCk7XG4gICAgY29uc3QgeyB3YXNtVVJMLCBzaGltVVJMIH0gPSB0aGlzO1xuICAgIHdvcmtlci5wb3N0TWVzc2FnZSh7dHlwZTogXCJpbml0XCIsIGRhdGE6IHt3YXNtVVJMLCBzaGltVVJMfX0pO1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICB3b3JrZXIub25tZXNzYWdlID0gKGUpID0+IHtcbiAgICAgICAgY29uc3QgbXNnID0gZS5kYXRhO1xuICAgICAgICBzd2l0Y2ggKG1zZy50eXBlKSB7XG4gICAgICAgIGNhc2UgXCJpbml0XCI6XG4gICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiaW5pdC1lcnJvclwiOlxuICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IobXNnLmRhdGEpKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgLy8gVE9ETyhLYWdhbWkpOiBFcnJvciBoYW5kbGluZy5cbiAgICAgICAgY2FzZSBcImVycm9yXCI6XG4gICAgICAgIGNhc2UgXCJpbnRlcm5hbC1lcnJvclwiOlxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJXb3JrZXIgZXJyb3I6XCIsIG1zZy5kYXRhKTtcbiAgICAgICAgICBpZiAodGhpcy5yZWplY3QpIHRoaXMucmVqZWN0KG1zZy5kYXRhKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcInN0b3BcIjpcbiAgICAgICAgICB0aGlzLmJsb2IgPSBtc2cuZGF0YTtcbiAgICAgICAgICB0aGlzLmJsb2JVUkwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKG1zZy5kYXRhKTtcbiAgICAgICAgICBpZiAodGhpcy5vblN0b3ApIHRoaXMub25TdG9wKCk7XG4gICAgICAgICAgaWYgKHRoaXMucmVzb2x2ZSkgdGhpcy5yZXNvbHZlKHRoaXMuYmxvYik7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGluaXQoKSB7XG4gICAgcmV0dXJuIHRoaXMuaW5pdEF1ZGlvKCkudGhlbih0aGlzLmluaXRXb3JrZXIuYmluZCh0aGlzKSk7XG4gIH1cblxuICBzdGFydFJlY29yZGluZygpIHtcbiAgICBpZiAoIXRoaXMuc3RyZWFtKSB0aHJvdyBuZXcgRXJyb3IoXCJtaXNzaW5nIGF1ZGlvIGluaXRpYWxpemF0aW9uXCIpO1xuICAgIGlmICghdGhpcy53b3JrZXIpIHRocm93IG5ldyBFcnJvcihcIm1pc3Npbmcgd29ya2VyIGluaXRpYWxpemF0aW9uXCIpO1xuICAgIHRoaXMuYmxvYiA9IG51bGw7XG4gICAgaWYgKHRoaXMuYmxvYlVSTCkgVVJMLnJldm9rZU9iamVjdFVSTCh0aGlzLmJsb2JVUkwpO1xuICAgIHRoaXMuYmxvYlVSTCA9IG51bGw7XG4gICAgdGhpcy5yZXNvbHZlID0gbnVsbDtcbiAgICB0aGlzLnJlamVjdCA9IG51bGw7XG4gICAgdGhpcy53b3JrZXIucG9zdE1lc3NhZ2Uoe3R5cGU6IFwic3RhcnRcIiwgZGF0YTogdGhpcy5hdWRpb0N0eC5zYW1wbGVSYXRlfSk7XG4gICAgdGhpcy5lbmNOb2RlLm9uYXVkaW9wcm9jZXNzID0gKGUpID0+IHtcbiAgICAgIGNvbnN0IHNhbXBsZXMgPSBlLmlucHV0QnVmZmVyLmdldENoYW5uZWxEYXRhKDApO1xuICAgICAgdGhpcy53b3JrZXIucG9zdE1lc3NhZ2Uoe3R5cGU6IFwiZGF0YVwiLCBkYXRhOiBzYW1wbGVzfSk7XG4gICAgfTtcbiAgICB0aGlzLmVuY05vZGUuY29ubmVjdCh0aGlzLmF1ZGlvQ3R4LmRlc3RpbmF0aW9uKTtcbiAgfVxuXG4gIHN0b3BSZWNvcmRpbmcoKSB7XG4gICAgaWYgKCF0aGlzLnN0cmVhbSkgdGhyb3cgbmV3IEVycm9yKFwibWlzc2luZyBhdWRpbyBpbml0aWFsaXphdGlvblwiKTtcbiAgICBpZiAoIXRoaXMud29ya2VyKSB0aHJvdyBuZXcgRXJyb3IoXCJtaXNzaW5nIHdvcmtlciBpbml0aWFsaXphdGlvblwiKTtcbiAgICB0aGlzLmVuY05vZGUuZGlzY29ubmVjdCgpO1xuICAgIHRoaXMuZW5jTm9kZS5vbmF1ZGlvcHJvY2VzcyA9IG51bGw7XG4gICAgdGhpcy5zdG9wVHJhY2tzKCk7XG4gICAgdGhpcy53b3JrZXIucG9zdE1lc3NhZ2Uoe3R5cGU6IFwic3RvcFwiLCBkYXRhOiBudWxsfSk7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIHRoaXMucmVzb2x2ZSA9IHJlc29sdmU7XG4gICAgICB0aGlzLnJlamVjdCA9IHJlamVjdDtcbiAgICB9KTtcbiAgfVxuXG4gIHN0b3BUcmFja3MoKSB7XG4gICAgLy8gTWlnaHQgYmUgbWlzc2VkIGluIFNhZmFyaSBhbmQgb2xkIEZGL0Nocm9tZSBwZXIgTUROLlxuICAgIGlmICh0aGlzLnN0cmVhbS5nZXRUcmFja3MpIHtcbiAgICAgIC8vIEhpZGUgYnJvd3NlcidzIHJlY29yZGluZyBpbmRpY2F0b3IuXG4gICAgICB0aGlzLnN0cmVhbS5nZXRUcmFja3MoKS5mb3JFYWNoKCh0cmFjaykgPT4gdHJhY2suc3RvcCgpKTtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIEZvcm0ge1xuICBjb25zdHJ1Y3RvcihvcHRzID0ge30sIHJlc29sdmUsIHJlamVjdCkge1xuICAgIHRoaXMucmVjb3JkZXIgPSBuZXcgUmVjb3JkZXIob3B0cywgdGhpcy5vblN0b3AuYmluZCh0aGlzKSk7XG4gICAgdGhpcy5yZXNvbHZlID0gcmVzb2x2ZTtcbiAgICB0aGlzLnJlamVjdCA9IHJlamVjdDtcbiAgICB0aGlzLmJhY2tkcm9wID0gbnVsbDtcbiAgICB0aGlzLnBvcHVwID0gbnVsbDtcbiAgICB0aGlzLnJlY29yZEJ0biA9IG51bGw7XG4gICAgdGhpcy5zdG9wQnRuID0gbnVsbDtcbiAgICB0aGlzLnRpbWVyID0gbnVsbDtcbiAgICB0aGlzLmF1ZGlvID0gbnVsbDtcbiAgICB0aGlzLnNhdmVCdG4gPSBudWxsO1xuICAgIHRoaXMudGlkID0gMDtcbiAgICB0aGlzLnN0YXJ0ID0gMDtcbiAgICBPYmplY3Quc2VhbCh0aGlzKTtcblxuICAgIHRoaXMucmVjb3JkZXIuaW5pdEF1ZGlvKClcbiAgICAgIC50aGVuKCgpID0+IHRoaXMuZHJhd0luaXQoKSlcbiAgICAgIC50aGVuKCgpID0+IHRoaXMucmVjb3JkZXIuaW5pdFdvcmtlcigpKVxuICAgICAgLnRoZW4oKCkgPT4gdGhpcy5kcmF3QWxsKCkpXG4gICAgICAuY2F0Y2goKGVycikgPT4gdGhpcy5kcmF3RXJyb3IoZXJyKSk7XG4gIH1cblxuICBkcmF3SW5pdCgpIHtcbiAgICBpZiAodGhpcy5iYWNrZHJvcCkgcmV0dXJuO1xuICAgIGNvbnN0IGJhY2tkcm9wID0gdGhpcy5iYWNrZHJvcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgYmFja2Ryb3AuY2xhc3NOYW1lID0gXCJ2bXNnLWJhY2tkcm9wXCI7XG4gICAgYmFja2Ryb3AuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuY2xvc2UobnVsbCkpO1xuXG4gICAgY29uc3QgcG9wdXAgPSB0aGlzLnBvcHVwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBwb3B1cC5jbGFzc05hbWUgPSBcInZtc2ctcG9wdXBcIjtcbiAgICBwb3B1cC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IGUuc3RvcFByb3BhZ2F0aW9uKCkpO1xuXG4gICAgY29uc3QgcHJvZ3Jlc3MgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIHByb2dyZXNzLmNsYXNzTmFtZSA9IFwidm1zZy1wcm9ncmVzc1wiO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMzsgaSsrKSB7XG4gICAgICBjb25zdCBwcm9ncmVzc0RvdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICBwcm9ncmVzc0RvdC5jbGFzc05hbWUgPSBcInZtc2ctcHJvZ3Jlc3MtZG90XCI7XG4gICAgICBwcm9ncmVzcy5hcHBlbmRDaGlsZChwcm9ncmVzc0RvdCk7XG4gICAgfVxuICAgIHBvcHVwLmFwcGVuZENoaWxkKHByb2dyZXNzKTtcblxuICAgIGJhY2tkcm9wLmFwcGVuZENoaWxkKHBvcHVwKTtcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGJhY2tkcm9wKTtcbiAgfVxuXG4gIGRyYXdUaW1lKG1zZWNzKSB7XG4gICAgY29uc3Qgc2VjcyA9IE1hdGgucm91bmQobXNlY3MgLyAxMDAwKTtcbiAgICB0aGlzLnRpbWVyLnRleHRDb250ZW50ID0gcGFkMihzZWNzIC8gNjApICsgXCI6XCIgKyBwYWQyKHNlY3MgJSA2MCk7XG4gIH1cblxuICBkcmF3QWxsKCkge1xuICAgIHRoaXMuZHJhd0luaXQoKTtcbiAgICB0aGlzLmNsZWFyQWxsKCk7XG5cbiAgICBjb25zdCByZWNvcmRSb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIHJlY29yZFJvdy5jbGFzc05hbWUgPSBcInZtc2ctcmVjb3JkLXJvd1wiO1xuICAgIHRoaXMucG9wdXAuYXBwZW5kQ2hpbGQocmVjb3JkUm93KTtcblxuICAgIGNvbnN0IHJlY29yZEJ0biA9IHRoaXMucmVjb3JkQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICByZWNvcmRCdG4uY2xhc3NOYW1lID0gXCJ2bXNnLWJ1dHRvbiB2bXNnLXJlY29yZC1idXR0b25cIjtcbiAgICByZWNvcmRCdG4udGV4dENvbnRlbnQgPSBcIuKXj1wiO1xuICAgIHJlY29yZEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5zdGFydFJlY29yZGluZygpKTtcbiAgICByZWNvcmRSb3cuYXBwZW5kQ2hpbGQocmVjb3JkQnRuKTtcblxuICAgIGNvbnN0IHN0b3BCdG4gPSB0aGlzLnN0b3BCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICAgIHN0b3BCdG4uY2xhc3NOYW1lID0gXCJ2bXNnLWJ1dHRvbiB2bXNnLXN0b3AtYnV0dG9uXCI7XG4gICAgc3RvcEJ0bi5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgc3RvcEJ0bi50ZXh0Q29udGVudCA9IFwi4pagXCI7XG4gICAgc3RvcEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5zdG9wUmVjb3JkaW5nKCkpO1xuICAgIHJlY29yZFJvdy5hcHBlbmRDaGlsZChzdG9wQnRuKTtcblxuICAgIGNvbnN0IGF1ZGlvID0gdGhpcy5hdWRpbyA9IG5ldyBBdWRpbygpO1xuICAgIGF1ZGlvLmF1dG9wbGF5ID0gdHJ1ZTtcblxuICAgIGNvbnN0IHRpbWVyID0gdGhpcy50aW1lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuICAgIHRpbWVyLmNsYXNzTmFtZSA9IFwidm1zZy10aW1lclwiO1xuICAgIHRpbWVyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICBpZiAoYXVkaW8ucGF1c2VkKSB7XG4gICAgICAgIGlmICh0aGlzLnJlY29yZGVyLmJsb2JVUkwpIHtcbiAgICAgICAgICBhdWRpby5zcmMgPSB0aGlzLnJlY29yZGVyLmJsb2JVUkw7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGF1ZGlvLnBhdXNlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgdGhpcy5kcmF3VGltZSgwKTtcbiAgICByZWNvcmRSb3cuYXBwZW5kQ2hpbGQodGltZXIpO1xuXG4gICAgY29uc3Qgc2F2ZUJ0biA9IHRoaXMuc2F2ZUJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgc2F2ZUJ0bi5jbGFzc05hbWUgPSBcInZtc2ctYnV0dG9uIHZtc2ctc2F2ZS1idXR0b25cIjtcbiAgICBzYXZlQnRuLnRleHRDb250ZW50ID0gXCLinJNcIjtcbiAgICBzYXZlQnRuLmRpc2FibGVkID0gdHJ1ZTtcbiAgICBzYXZlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLmNsb3NlKHRoaXMucmVjb3JkZXIuYmxvYikpO1xuICAgIHJlY29yZFJvdy5hcHBlbmRDaGlsZChzYXZlQnRuKTtcblxuICAgIGNvbnN0IGdhaW5XcmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBnYWluV3JhcHBlci5jbGFzc05hbWUgPSBcInZtc2ctc2xpZGVyLXdyYXBwZXIgdm1zZy1nYWluLXNsaWRlci13cmFwcGVyXCI7XG4gICAgY29uc3QgZ2FpblNsaWRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgICBnYWluU2xpZGVyLmNsYXNzTmFtZSA9IFwidm1zZy1zbGlkZXIgdm1zZy1nYWluLXNsaWRlclwiO1xuICAgIGdhaW5TbGlkZXIuc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcInJhbmdlXCIpO1xuICAgIGdhaW5TbGlkZXIubWluID0gMDtcbiAgICBnYWluU2xpZGVyLm1heCA9IDI7XG4gICAgZ2FpblNsaWRlci5zdGVwID0gMC4yO1xuICAgIGdhaW5TbGlkZXIudmFsdWUgPSAxO1xuICAgIGdhaW5TbGlkZXIub25jaGFuZ2UgPSAoKSA9PiB7XG4gICAgICBjb25zdCBnYWluID0gK2dhaW5TbGlkZXIudmFsdWU7XG4gICAgICB0aGlzLnJlY29yZGVyLmdhaW5Ob2RlLmdhaW4udmFsdWUgPSBnYWluO1xuICAgIH07XG4gICAgZ2FpbldyYXBwZXIuYXBwZW5kQ2hpbGQoZ2FpblNsaWRlcik7XG4gICAgdGhpcy5wb3B1cC5hcHBlbmRDaGlsZChnYWluV3JhcHBlcik7XG5cbiAgICBjb25zdCBwaXRjaFdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIHBpdGNoV3JhcHBlci5jbGFzc05hbWUgPSBcInZtc2ctc2xpZGVyLXdyYXBwZXIgdm1zZy1waXRjaC1zbGlkZXItd3JhcHBlclwiO1xuICAgIGNvbnN0IHBpdGNoU2xpZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICAgIHBpdGNoU2xpZGVyLmNsYXNzTmFtZSA9IFwidm1zZy1zbGlkZXIgdm1zZy1waXRjaC1zbGlkZXJcIjtcbiAgICBwaXRjaFNsaWRlci5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwicmFuZ2VcIik7XG4gICAgcGl0Y2hTbGlkZXIubWluID0gLTE7XG4gICAgcGl0Y2hTbGlkZXIubWF4ID0gMTtcbiAgICBwaXRjaFNsaWRlci5zdGVwID0gMC4yO1xuICAgIHBpdGNoU2xpZGVyLnZhbHVlID0gdGhpcy5yZWNvcmRlci5waXRjaDtcbiAgICBwaXRjaFNsaWRlci5vbmNoYW5nZSA9ICgpID0+IHtcbiAgICAgIGNvbnN0IHBpdGNoID0gK3BpdGNoU2xpZGVyLnZhbHVlO1xuICAgICAgdGhpcy5yZWNvcmRlci5waXRjaEZYLnNldFBpdGNoT2Zmc2V0KHBpdGNoKTtcbiAgICAgIHRoaXMucmVjb3JkZXIuZ2Fpbk5vZGUuZGlzY29ubmVjdCgpO1xuICAgICAgdGhpcy5yZWNvcmRlci5nYWluTm9kZS5jb25uZWN0KFxuICAgICAgICBwaXRjaCA9PT0gMCA/IHRoaXMucmVjb3JkZXIuZW5jTm9kZSA6IHRoaXMucmVjb3JkZXIucGl0Y2hGWC5pbnB1dFxuICAgICAgKTtcbiAgICB9O1xuICAgIHBpdGNoV3JhcHBlci5hcHBlbmRDaGlsZChwaXRjaFNsaWRlcik7XG4gICAgdGhpcy5wb3B1cC5hcHBlbmRDaGlsZChwaXRjaFdyYXBwZXIpO1xuICB9XG5cbiAgZHJhd0Vycm9yKGVycikge1xuICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICB0aGlzLmRyYXdJbml0KCk7XG4gICAgdGhpcy5jbGVhckFsbCgpO1xuICAgIGNvbnN0IGVycm9yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBlcnJvci5jbGFzc05hbWUgPSBcInZtc2ctZXJyb3JcIjtcbiAgICBlcnJvci50ZXh0Q29udGVudCA9IGVyci50b1N0cmluZygpO1xuICAgIHRoaXMucG9wdXAuYXBwZW5kQ2hpbGQoZXJyb3IpO1xuICB9XG5cbiAgY2xlYXJBbGwoKSB7XG4gICAgaWYgKCF0aGlzLnBvcHVwKSByZXR1cm47XG4gICAgdGhpcy5wb3B1cC5pbm5lckhUTUwgPSBcIlwiO1xuICB9XG5cbiAgY2xvc2UoYmxvYikge1xuICAgIGlmICh0aGlzLmF1ZGlvKSB0aGlzLmF1ZGlvLnBhdXNlKCk7XG4gICAgaWYgKHRoaXMudGlkKSBjbGVhclRpbWVvdXQodGhpcy50aWQpO1xuICAgIHRoaXMucmVjb3JkZXIuY2xvc2UoKTtcbiAgICB0aGlzLmJhY2tkcm9wLnJlbW92ZSgpO1xuICAgIGlmIChibG9iKSB7XG4gICAgICB0aGlzLnJlc29sdmUoYmxvYik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucmVqZWN0KG5ldyBFcnJvcihcIk5vIHJlY29yZCBtYWRlXCIpKTtcbiAgICB9XG4gIH1cblxuICBvblN0b3AoKSB7XG4gICAgdGhpcy5yZWNvcmRCdG4uc3R5bGUuZGlzcGxheSA9IFwiXCI7XG4gICAgdGhpcy5zdG9wQnRuLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICB0aGlzLnN0b3BCdG4uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICB0aGlzLnNhdmVCdG4uZGlzYWJsZWQgPSBmYWxzZTtcbiAgfVxuXG4gIHN0YXJ0UmVjb3JkaW5nKCkge1xuICAgIHRoaXMuYXVkaW8ucGF1c2UoKTtcbiAgICB0aGlzLnN0YXJ0ID0gRGF0ZS5ub3coKTtcbiAgICB0aGlzLnVwZGF0ZVRpbWUoKTtcbiAgICB0aGlzLnJlY29yZEJ0bi5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgdGhpcy5zdG9wQnRuLnN0eWxlLmRpc3BsYXkgPSBcIlwiO1xuICAgIHRoaXMuc2F2ZUJ0bi5kaXNhYmxlZCA9IHRydWU7XG4gICAgdGhpcy5yZWNvcmRlci5zdGFydFJlY29yZGluZygpO1xuICB9XG5cbiAgc3RvcFJlY29yZGluZygpIHtcbiAgICBjbGVhclRpbWVvdXQodGhpcy50aWQpO1xuICAgIHRoaXMudGlkID0gMDtcbiAgICB0aGlzLnN0b3BCdG4uZGlzYWJsZWQgPSB0cnVlO1xuICAgIHRoaXMucmVjb3JkZXIuc3RvcFJlY29yZGluZygpO1xuICB9XG5cbiAgdXBkYXRlVGltZSgpIHtcbiAgICAvLyBOT1RFKEthZ2FtaSk6IFdlIGNhbiBkbyB0aGlzIGluIGBvbmF1ZGlvcHJvY2Vzc2AgYnV0IHRoYXQgd291bGRcbiAgICAvLyBydW4gdG9vIG9mdGVuIGFuZCBjcmVhdGUgdW5uZWNlc3NhcnkgRE9NIHVwZGF0ZXMuXG4gICAgdGhpcy5kcmF3VGltZShEYXRlLm5vdygpIC0gdGhpcy5zdGFydCk7XG4gICAgdGhpcy50aWQgPSBzZXRUaW1lb3V0KCgpID0+IHRoaXMudXBkYXRlVGltZSgpLCAzMDApO1xuICB9XG59XG5cbmxldCBzaG93biA9IGZhbHNlO1xuXG4vKipcbiAqIFJlY29yZCBhIG5ldyB2b2ljZSBtZXNzYWdlLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0PX0gb3B0cyAtIE9wdGlvbnNcbiAqIEBwYXJhbSB7c3RyaW5nPX0gb3B0cy53YXNtVVJMIC0gVVJMIG9mIHRoZSBtb2R1bGVcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKFwiL3N0YXRpYy9qcy92bXNnLndhc21cIiBieSBkZWZhdWx0KVxuICogQHBhcmFtIHtzdHJpbmc9fSBvcHRzLnNoaW1VUkwgLSBVUkwgb2YgdGhlIFdlYkFzc2VtYmx5IHBvbHlmaWxsXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChcIi9zdGF0aWMvanMvd2FzbS1wb2x5ZmlsbC5qc1wiIGJ5IGRlZmF1bHQpXG4gKiBAcGFyYW0ge251bWJlcj19IG9wdHMucGl0Y2ggLSBJbml0aWFsIHBpdGNoIHNoaWZ0IChbLTEsIDFdLCAwIGJ5IGRlZmF1bHQpXG4gKiBAcmV0dXJuIHtQcm9taXNlLjxCbG9iPn0gQSBwcm9taXNlIHRoYXQgY29udGFpbnMgcmVjb3JkZWQgYmxvYiB3aGVuIGZ1bGZpbGxlZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlY29yZChvcHRzKSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgaWYgKHNob3duKSB0aHJvdyBuZXcgRXJyb3IoXCJSZWNvcmQgZm9ybSBpcyBhbHJlYWR5IG9wZW5lZFwiKTtcbiAgICBzaG93biA9IHRydWU7XG4gICAgbmV3IEZvcm0ob3B0cywgcmVzb2x2ZSwgcmVqZWN0KTtcbiAgLy8gVXNlIGAuZmluYWxseWAgb25jZSBpdCdzIGF2YWlsYWJsZSBpbiBTYWZhcmkgYW5kIEVkZ2UuXG4gIH0pLnRoZW4ocmVzdWx0ID0+IHtcbiAgICBzaG93biA9IGZhbHNlO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH0sIGVyciA9PiB7XG4gICAgc2hvd24gPSBmYWxzZTtcbiAgICB0aHJvdyBlcnI7XG4gIH0pO1xufVxuXG4vKipcbiAqIEFsbCBhdmFpbGFibGUgcHVibGljIGl0ZW1zLlxuICovXG5leHBvcnQgZGVmYXVsdCB7IFJlY29yZGVyLCBGb3JtLCByZWNvcmQgfTtcblxuLy8gQm9ycm93ZWQgZnJvbSBhbmQgc2xpZ2h0bHkgbW9kaWZpZWQ6XG4vLyBodHRwczovL2dpdGh1Yi5jb20vY3dpbHNvL0F1ZGlvLUlucHV0LUVmZmVjdHMvYmxvYi9tYXN0ZXIvanMvanVuZ2xlLmpzXG5cbi8vIENvcHlyaWdodCAyMDEyLCBHb29nbGUgSW5jLlxuLy8gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vXG4vLyBSZWRpc3RyaWJ1dGlvbiBhbmQgdXNlIGluIHNvdXJjZSBhbmQgYmluYXJ5IGZvcm1zLCB3aXRoIG9yIHdpdGhvdXRcbi8vIG1vZGlmaWNhdGlvbiwgYXJlIHBlcm1pdHRlZCBwcm92aWRlZCB0aGF0IHRoZSBmb2xsb3dpbmcgY29uZGl0aW9ucyBhcmVcbi8vIG1ldDpcbi8vXG4vLyAgICAgKiBSZWRpc3RyaWJ1dGlvbnMgb2Ygc291cmNlIGNvZGUgbXVzdCByZXRhaW4gdGhlIGFib3ZlIGNvcHlyaWdodFxuLy8gbm90aWNlLCB0aGlzIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyLlxuLy8gICAgICogUmVkaXN0cmlidXRpb25zIGluIGJpbmFyeSBmb3JtIG11c3QgcmVwcm9kdWNlIHRoZSBhYm92ZVxuLy8gY29weXJpZ2h0IG5vdGljZSwgdGhpcyBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lclxuLy8gaW4gdGhlIGRvY3VtZW50YXRpb24gYW5kL29yIG90aGVyIG1hdGVyaWFscyBwcm92aWRlZCB3aXRoIHRoZVxuLy8gZGlzdHJpYnV0aW9uLlxuLy8gICAgICogTmVpdGhlciB0aGUgbmFtZSBvZiBHb29nbGUgSW5jLiBub3IgdGhlIG5hbWVzIG9mIGl0c1xuLy8gY29udHJpYnV0b3JzIG1heSBiZSB1c2VkIHRvIGVuZG9yc2Ugb3IgcHJvbW90ZSBwcm9kdWN0cyBkZXJpdmVkIGZyb21cbi8vIHRoaXMgc29mdHdhcmUgd2l0aG91dCBzcGVjaWZpYyBwcmlvciB3cml0dGVuIHBlcm1pc3Npb24uXG4vL1xuLy8gVEhJUyBTT0ZUV0FSRSBJUyBQUk9WSURFRCBCWSBUSEUgQ09QWVJJR0hUIEhPTERFUlMgQU5EIENPTlRSSUJVVE9SU1xuLy8gXCJBUyBJU1wiIEFORCBBTlkgRVhQUkVTUyBPUiBJTVBMSUVEIFdBUlJBTlRJRVMsIElOQ0xVRElORywgQlVUIE5PVFxuLy8gTElNSVRFRCBUTywgVEhFIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkgQU5EIEZJVE5FU1MgRk9SXG4vLyBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBUkUgRElTQ0xBSU1FRC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIENPUFlSSUdIVFxuLy8gT1dORVIgT1IgQ09OVFJJQlVUT1JTIEJFIExJQUJMRSBGT1IgQU5ZIERJUkVDVCwgSU5ESVJFQ1QsIElOQ0lERU5UQUwsXG4vLyBTUEVDSUFMLCBFWEVNUExBUlksIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyAoSU5DTFVESU5HLCBCVVQgTk9UXG4vLyBMSU1JVEVEIFRPLCBQUk9DVVJFTUVOVCBPRiBTVUJTVElUVVRFIEdPT0RTIE9SIFNFUlZJQ0VTOyBMT1NTIE9GIFVTRSxcbi8vIERBVEEsIE9SIFBST0ZJVFM7IE9SIEJVU0lORVNTIElOVEVSUlVQVElPTikgSE9XRVZFUiBDQVVTRUQgQU5EIE9OIEFOWVxuLy8gVEhFT1JZIE9GIExJQUJJTElUWSwgV0hFVEhFUiBJTiBDT05UUkFDVCwgU1RSSUNUIExJQUJJTElUWSwgT1IgVE9SVFxuLy8gKElOQ0xVRElORyBORUdMSUdFTkNFIE9SIE9USEVSV0lTRSkgQVJJU0lORyBJTiBBTlkgV0FZIE9VVCBPRiBUSEUgVVNFXG4vLyBPRiBUSElTIFNPRlRXQVJFLCBFVkVOIElGIEFEVklTRUQgT0YgVEhFIFBPU1NJQklMSVRZIE9GIFNVQ0ggREFNQUdFLlxuXG5jb25zdCBkZWxheVRpbWUgPSAwLjEwMDtcbmNvbnN0IGZhZGVUaW1lID0gMC4wNTA7XG5jb25zdCBidWZmZXJUaW1lID0gMC4xMDA7XG5cbmZ1bmN0aW9uIGNyZWF0ZUZhZGVCdWZmZXIoY29udGV4dCwgYWN0aXZlVGltZSwgZmFkZVRpbWUpIHtcbiAgdmFyIGxlbmd0aDEgPSBhY3RpdmVUaW1lICogY29udGV4dC5zYW1wbGVSYXRlO1xuICB2YXIgbGVuZ3RoMiA9IChhY3RpdmVUaW1lIC0gMipmYWRlVGltZSkgKiBjb250ZXh0LnNhbXBsZVJhdGU7XG4gIHZhciBsZW5ndGggPSBsZW5ndGgxICsgbGVuZ3RoMjtcbiAgdmFyIGJ1ZmZlciA9IGNvbnRleHQuY3JlYXRlQnVmZmVyKDEsIGxlbmd0aCwgY29udGV4dC5zYW1wbGVSYXRlKTtcbiAgdmFyIHAgPSBidWZmZXIuZ2V0Q2hhbm5lbERhdGEoMCk7XG5cbiAgdmFyIGZhZGVMZW5ndGggPSBmYWRlVGltZSAqIGNvbnRleHQuc2FtcGxlUmF0ZTtcblxuICB2YXIgZmFkZUluZGV4MSA9IGZhZGVMZW5ndGg7XG4gIHZhciBmYWRlSW5kZXgyID0gbGVuZ3RoMSAtIGZhZGVMZW5ndGg7XG5cbiAgLy8gMXN0IHBhcnQgb2YgY3ljbGVcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGgxOyArK2kpIHtcbiAgICB2YXIgdmFsdWU7XG5cbiAgICBpZiAoaSA8IGZhZGVJbmRleDEpIHtcbiAgICAgICAgdmFsdWUgPSBNYXRoLnNxcnQoaSAvIGZhZGVMZW5ndGgpO1xuICAgIH0gZWxzZSBpZiAoaSA+PSBmYWRlSW5kZXgyKSB7XG4gICAgICAgIHZhbHVlID0gTWF0aC5zcXJ0KDEgLSAoaSAtIGZhZGVJbmRleDIpIC8gZmFkZUxlbmd0aCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdmFsdWUgPSAxO1xuICAgIH1cblxuICAgIHBbaV0gPSB2YWx1ZTtcbiAgfVxuXG4gIC8vIDJuZCBwYXJ0XG4gIGZvciAodmFyIGkgPSBsZW5ndGgxOyBpIDwgbGVuZ3RoOyArK2kpIHtcbiAgICBwW2ldID0gMDtcbiAgfVxuXG4gIHJldHVybiBidWZmZXI7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZURlbGF5VGltZUJ1ZmZlcihjb250ZXh0LCBhY3RpdmVUaW1lLCBmYWRlVGltZSwgc2hpZnRVcCkge1xuICB2YXIgbGVuZ3RoMSA9IGFjdGl2ZVRpbWUgKiBjb250ZXh0LnNhbXBsZVJhdGU7XG4gIHZhciBsZW5ndGgyID0gKGFjdGl2ZVRpbWUgLSAyKmZhZGVUaW1lKSAqIGNvbnRleHQuc2FtcGxlUmF0ZTtcbiAgdmFyIGxlbmd0aCA9IGxlbmd0aDEgKyBsZW5ndGgyO1xuICB2YXIgYnVmZmVyID0gY29udGV4dC5jcmVhdGVCdWZmZXIoMSwgbGVuZ3RoLCBjb250ZXh0LnNhbXBsZVJhdGUpO1xuICB2YXIgcCA9IGJ1ZmZlci5nZXRDaGFubmVsRGF0YSgwKTtcblxuICAvLyAxc3QgcGFydCBvZiBjeWNsZVxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDE7ICsraSkge1xuICAgIGlmIChzaGlmdFVwKVxuICAgICAgLy8gVGhpcyBsaW5lIGRvZXMgc2hpZnQtdXAgdHJhbnNwb3NlXG4gICAgICBwW2ldID0gKGxlbmd0aDEtaSkvbGVuZ3RoO1xuICAgIGVsc2VcbiAgICAgIC8vIFRoaXMgbGluZSBkb2VzIHNoaWZ0LWRvd24gdHJhbnNwb3NlXG4gICAgICBwW2ldID0gaSAvIGxlbmd0aDE7XG4gIH1cblxuICAvLyAybmQgcGFydFxuICBmb3IgKHZhciBpID0gbGVuZ3RoMTsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgcFtpXSA9IDA7XG4gIH1cblxuICByZXR1cm4gYnVmZmVyO1xufVxuXG5mdW5jdGlvbiBKdW5nbGUoY29udGV4dCkge1xuICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xuICAvLyBDcmVhdGUgbm9kZXMgZm9yIHRoZSBpbnB1dCBhbmQgb3V0cHV0IG9mIHRoaXMgXCJtb2R1bGVcIi5cbiAgdmFyIGlucHV0ID0gKGNvbnRleHQuY3JlYXRlR2FpbiB8fCBjb250ZXh0LmNyZWF0ZUdhaW5Ob2RlKS5jYWxsKGNvbnRleHQpO1xuICB2YXIgb3V0cHV0ID0gKGNvbnRleHQuY3JlYXRlR2FpbiB8fCBjb250ZXh0LmNyZWF0ZUdhaW5Ob2RlKS5jYWxsKGNvbnRleHQpO1xuICB0aGlzLmlucHV0ID0gaW5wdXQ7XG4gIHRoaXMub3V0cHV0ID0gb3V0cHV0O1xuXG4gIC8vIERlbGF5IG1vZHVsYXRpb24uXG4gIHZhciBtb2QxID0gY29udGV4dC5jcmVhdGVCdWZmZXJTb3VyY2UoKTtcbiAgdmFyIG1vZDIgPSBjb250ZXh0LmNyZWF0ZUJ1ZmZlclNvdXJjZSgpO1xuICB2YXIgbW9kMyA9IGNvbnRleHQuY3JlYXRlQnVmZmVyU291cmNlKCk7XG4gIHZhciBtb2Q0ID0gY29udGV4dC5jcmVhdGVCdWZmZXJTb3VyY2UoKTtcbiAgdGhpcy5zaGlmdERvd25CdWZmZXIgPSBjcmVhdGVEZWxheVRpbWVCdWZmZXIoY29udGV4dCwgYnVmZmVyVGltZSwgZmFkZVRpbWUsIGZhbHNlKTtcbiAgdGhpcy5zaGlmdFVwQnVmZmVyID0gY3JlYXRlRGVsYXlUaW1lQnVmZmVyKGNvbnRleHQsIGJ1ZmZlclRpbWUsIGZhZGVUaW1lLCB0cnVlKTtcbiAgbW9kMS5idWZmZXIgPSB0aGlzLnNoaWZ0RG93bkJ1ZmZlcjtcbiAgbW9kMi5idWZmZXIgPSB0aGlzLnNoaWZ0RG93bkJ1ZmZlcjtcbiAgbW9kMy5idWZmZXIgPSB0aGlzLnNoaWZ0VXBCdWZmZXI7XG4gIG1vZDQuYnVmZmVyID0gdGhpcy5zaGlmdFVwQnVmZmVyO1xuICBtb2QxLmxvb3AgPSB0cnVlO1xuICBtb2QyLmxvb3AgPSB0cnVlO1xuICBtb2QzLmxvb3AgPSB0cnVlO1xuICBtb2Q0Lmxvb3AgPSB0cnVlO1xuXG4gIC8vIGZvciBzd2l0Y2hpbmcgYmV0d2VlbiBvY3QtdXAgYW5kIG9jdC1kb3duXG4gIHZhciBtb2QxR2FpbiA9IChjb250ZXh0LmNyZWF0ZUdhaW4gfHwgY29udGV4dC5jcmVhdGVHYWluTm9kZSkuY2FsbChjb250ZXh0KTtcbiAgdmFyIG1vZDJHYWluID0gKGNvbnRleHQuY3JlYXRlR2FpbiB8fCBjb250ZXh0LmNyZWF0ZUdhaW5Ob2RlKS5jYWxsKGNvbnRleHQpO1xuICB2YXIgbW9kM0dhaW4gPSAoY29udGV4dC5jcmVhdGVHYWluIHx8IGNvbnRleHQuY3JlYXRlR2Fpbk5vZGUpLmNhbGwoY29udGV4dCk7XG4gIG1vZDNHYWluLmdhaW4udmFsdWUgPSAwO1xuICB2YXIgbW9kNEdhaW4gPSAoY29udGV4dC5jcmVhdGVHYWluIHx8IGNvbnRleHQuY3JlYXRlR2Fpbk5vZGUpLmNhbGwoY29udGV4dCk7XG4gIG1vZDRHYWluLmdhaW4udmFsdWUgPSAwO1xuXG4gIG1vZDEuY29ubmVjdChtb2QxR2Fpbik7XG4gIG1vZDIuY29ubmVjdChtb2QyR2Fpbik7XG4gIG1vZDMuY29ubmVjdChtb2QzR2Fpbik7XG4gIG1vZDQuY29ubmVjdChtb2Q0R2Fpbik7XG5cbiAgLy8gRGVsYXkgYW1vdW50IGZvciBjaGFuZ2luZyBwaXRjaC5cbiAgdmFyIG1vZEdhaW4xID0gKGNvbnRleHQuY3JlYXRlR2FpbiB8fCBjb250ZXh0LmNyZWF0ZUdhaW5Ob2RlKS5jYWxsKGNvbnRleHQpO1xuICB2YXIgbW9kR2FpbjIgPSAoY29udGV4dC5jcmVhdGVHYWluIHx8IGNvbnRleHQuY3JlYXRlR2Fpbk5vZGUpLmNhbGwoY29udGV4dCk7XG5cbiAgdmFyIGRlbGF5MSA9IChjb250ZXh0LmNyZWF0ZURlbGF5IHx8IGNvbnRleHQuY3JlYXRlRGVsYXlOb2RlKS5jYWxsKGNvbnRleHQpO1xuICB2YXIgZGVsYXkyID0gKGNvbnRleHQuY3JlYXRlRGVsYXkgfHwgY29udGV4dC5jcmVhdGVEZWxheU5vZGUpLmNhbGwoY29udGV4dCk7XG4gIG1vZDFHYWluLmNvbm5lY3QobW9kR2FpbjEpO1xuICBtb2QyR2Fpbi5jb25uZWN0KG1vZEdhaW4yKTtcbiAgbW9kM0dhaW4uY29ubmVjdChtb2RHYWluMSk7XG4gIG1vZDRHYWluLmNvbm5lY3QobW9kR2FpbjIpO1xuICBtb2RHYWluMS5jb25uZWN0KGRlbGF5MS5kZWxheVRpbWUpO1xuICBtb2RHYWluMi5jb25uZWN0KGRlbGF5Mi5kZWxheVRpbWUpO1xuXG4gIC8vIENyb3NzZmFkaW5nLlxuICB2YXIgZmFkZTEgPSBjb250ZXh0LmNyZWF0ZUJ1ZmZlclNvdXJjZSgpO1xuICB2YXIgZmFkZTIgPSBjb250ZXh0LmNyZWF0ZUJ1ZmZlclNvdXJjZSgpO1xuICB2YXIgZmFkZUJ1ZmZlciA9IGNyZWF0ZUZhZGVCdWZmZXIoY29udGV4dCwgYnVmZmVyVGltZSwgZmFkZVRpbWUpO1xuICBmYWRlMS5idWZmZXIgPSBmYWRlQnVmZmVyXG4gIGZhZGUyLmJ1ZmZlciA9IGZhZGVCdWZmZXI7XG4gIGZhZGUxLmxvb3AgPSB0cnVlO1xuICBmYWRlMi5sb29wID0gdHJ1ZTtcblxuICB2YXIgbWl4MSA9IChjb250ZXh0LmNyZWF0ZUdhaW4gfHwgY29udGV4dC5jcmVhdGVHYWluTm9kZSkuY2FsbChjb250ZXh0KTtcbiAgdmFyIG1peDIgPSAoY29udGV4dC5jcmVhdGVHYWluIHx8IGNvbnRleHQuY3JlYXRlR2Fpbk5vZGUpLmNhbGwoY29udGV4dCk7XG4gIG1peDEuZ2Fpbi52YWx1ZSA9IDA7XG4gIG1peDIuZ2Fpbi52YWx1ZSA9IDA7XG5cbiAgZmFkZTEuY29ubmVjdChtaXgxLmdhaW4pO1xuICBmYWRlMi5jb25uZWN0KG1peDIuZ2Fpbik7XG5cbiAgLy8gQ29ubmVjdCBwcm9jZXNzaW5nIGdyYXBoLlxuICBpbnB1dC5jb25uZWN0KGRlbGF5MSk7XG4gIGlucHV0LmNvbm5lY3QoZGVsYXkyKTtcbiAgZGVsYXkxLmNvbm5lY3QobWl4MSk7XG4gIGRlbGF5Mi5jb25uZWN0KG1peDIpO1xuICBtaXgxLmNvbm5lY3Qob3V0cHV0KTtcbiAgbWl4Mi5jb25uZWN0KG91dHB1dCk7XG5cbiAgLy8gU3RhcnRcbiAgdmFyIHQgPSBjb250ZXh0LmN1cnJlbnRUaW1lICsgMC4wNTA7XG4gIHZhciB0MiA9IHQgKyBidWZmZXJUaW1lIC0gZmFkZVRpbWU7XG4gIG1vZDEuc3RhcnQodCk7XG4gIG1vZDIuc3RhcnQodDIpO1xuICBtb2QzLnN0YXJ0KHQpO1xuICBtb2Q0LnN0YXJ0KHQyKTtcbiAgZmFkZTEuc3RhcnQodCk7XG4gIGZhZGUyLnN0YXJ0KHQyKTtcblxuICB0aGlzLm1vZDEgPSBtb2QxO1xuICB0aGlzLm1vZDIgPSBtb2QyO1xuICB0aGlzLm1vZDFHYWluID0gbW9kMUdhaW47XG4gIHRoaXMubW9kMkdhaW4gPSBtb2QyR2FpbjtcbiAgdGhpcy5tb2QzR2FpbiA9IG1vZDNHYWluO1xuICB0aGlzLm1vZDRHYWluID0gbW9kNEdhaW47XG4gIHRoaXMubW9kR2FpbjEgPSBtb2RHYWluMTtcbiAgdGhpcy5tb2RHYWluMiA9IG1vZEdhaW4yO1xuICB0aGlzLmZhZGUxID0gZmFkZTE7XG4gIHRoaXMuZmFkZTIgPSBmYWRlMjtcbiAgdGhpcy5taXgxID0gbWl4MTtcbiAgdGhpcy5taXgyID0gbWl4MjtcbiAgdGhpcy5kZWxheTEgPSBkZWxheTE7XG4gIHRoaXMuZGVsYXkyID0gZGVsYXkyO1xuXG4gIHRoaXMuc2V0RGVsYXkoZGVsYXlUaW1lKTtcbn1cblxuSnVuZ2xlLnByb3RvdHlwZS5zZXREZWxheSA9IGZ1bmN0aW9uKGRlbGF5VGltZSkge1xuICB0aGlzLm1vZEdhaW4xLmdhaW4uc2V0VGFyZ2V0QXRUaW1lKDAuNSpkZWxheVRpbWUsIDAsIDAuMDEwKTtcbiAgdGhpcy5tb2RHYWluMi5nYWluLnNldFRhcmdldEF0VGltZSgwLjUqZGVsYXlUaW1lLCAwLCAwLjAxMCk7XG59O1xuXG5KdW5nbGUucHJvdG90eXBlLnNldFBpdGNoT2Zmc2V0ID0gZnVuY3Rpb24obXVsdCkge1xuICBpZiAobXVsdD4wKSB7IC8vIHBpdGNoIHVwXG4gICAgdGhpcy5tb2QxR2Fpbi5nYWluLnZhbHVlID0gMDtcbiAgICB0aGlzLm1vZDJHYWluLmdhaW4udmFsdWUgPSAwO1xuICAgIHRoaXMubW9kM0dhaW4uZ2Fpbi52YWx1ZSA9IDE7XG4gICAgdGhpcy5tb2Q0R2Fpbi5nYWluLnZhbHVlID0gMTtcbiAgfSBlbHNlIHsgLy8gcGl0Y2ggZG93blxuICAgIHRoaXMubW9kMUdhaW4uZ2Fpbi52YWx1ZSA9IDE7XG4gICAgdGhpcy5tb2QyR2Fpbi5nYWluLnZhbHVlID0gMTtcbiAgICB0aGlzLm1vZDNHYWluLmdhaW4udmFsdWUgPSAwO1xuICAgIHRoaXMubW9kNEdhaW4uZ2Fpbi52YWx1ZSA9IDA7XG4gIH1cbiAgdGhpcy5zZXREZWxheShkZWxheVRpbWUqTWF0aC5hYnMobXVsdCkpO1xufTtcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/vmsg/vmsg.js\n");

/***/ })

}]);