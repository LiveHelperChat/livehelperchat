!function(t){function e(){return new Date(Date.UTC.apply(Date,arguments))}var i=function(e,i){var n=this;if(this.element=t(e),this.autoShow=null==i.autoShow||i.autoShow,this.appendTo=i.appendTo||"body",this.closeButton=i.closeButton,this.language=i.language||this.element.data("date-language")||"en",this.language=this.language in s?this.language:this.language.split("-")[0],this.language=this.language in s?this.language:"en",this.isRTL=s[this.language].rtl||!1,this.format=a.parseFormat(i.format||this.element.data("date-format")||s[this.language].format||"mm/dd/yyyy"),this.formatText=i.format||this.element.data("date-format")||s[this.language].format||"mm/dd/yyyy",this.isInline=!1,this.isInput=this.element.is("input"),this.component=!!this.element.is(".date")&&this.element.find(".prefix, .postfix"),this.hasInput=this.component&&this.element.find("input").length,this.disableDblClickSelection=i.disableDblClickSelection,this.onRender=i.onRender||function(){},this.component&&0===this.component.length&&(this.component=!1),this.linkField=i.linkField||this.element.data("link-field")||!1,this.linkFormat=a.parseFormat(i.linkFormat||this.element.data("link-format")||"yyyy-mm-dd hh:ii:ss"),this.minuteStep=i.minuteStep||this.element.data("minute-step")||5,this.pickerPosition=i.pickerPosition||this.element.data("picker-position")||"bottom-right",this.initialDate=i.initialDate||null,this.faCSSprefix=i.faCSSprefix||"fa",this.leftArrow=i.leftArrow||'<i class="'+this.faCSSprefix+" "+this.faCSSprefix+'-chevron-left fi-arrow-left"/>',this.rightArrow=i.rightArrow||'<i class="'+this.faCSSprefix+" "+this.faCSSprefix+'-chevron-right fi-arrow-right"/>',this.closeIcon=i.closeIcon||'<i class="'+this.faCSSprefix+" "+this.faCSSprefix+"-remove "+this.faCSSprefix+'-times fi-x"></i>',this.rangeType=t('input[name="'+this.element.attr("name")+'_type"]').val()||null,this.minView=0,"minView"in i?this.minView=i.minView:"minView"in this.element.data()&&(this.minView=this.element.data("min-view")),this.minView=a.convertViewMode(this.minView),this.maxView=a.modes.length-1,"maxView"in i?this.maxView=i.maxView:"maxView"in this.element.data()&&(this.maxView=this.element.data("max-view")),this.maxView=a.convertViewMode(this.maxView),this.nonMilitaryTime=!1,"nonMilitaryTime"in i&&(this.nonMilitaryTime=i.nonMilitaryTime),this.startViewMode="month","startView"in i?this.startViewMode=i.startView:"startView"in this.element.data()&&(this.startViewMode=this.element.data("start-view")),this.startViewMode=a.convertViewMode(this.startViewMode),this.viewMode=this.startViewMode,"minView"in i||"maxView"in i||this.element.data("min-view")||this.element.data("max-view")||(this.pickTime=!1,"pickTime"in i&&(this.pickTime=i.pickTime),1==this.pickTime?(this.minView=0,this.maxView=4):(this.minView=2,this.maxView=4)),this.forceParse=!0,"forceParse"in i?this.forceParse=i.forceParse:"dateForceParse"in this.element.data()&&(this.forceParse=this.element.data("date-force-parse")),this.picker=t(a.template(this.leftArrow,this.rightArrow,this.closeIcon)).appendTo(this.isInline?this.element:this.appendTo).on({click:t.proxy(this.click,this),mousedown:t.proxy(this.mousedown,this)}),this.closeButton?this.picker.find("a.datepicker-close").show():this.picker.find("a.datepicker-close").hide(),this.isInline?this.picker.addClass("datepicker-inline"):this.picker.addClass("datepicker-dropdown dropdown-menu"),this.isRTL&&(this.picker.addClass("datepicker-rtl"),this.picker.find(".date-switch").each((function(){t(this).parent().prepend(t(this).siblings(".next")),t(this).parent().append(t(this).siblings(".prev"))})),this.picker.find(".prev, .next").toggleClass("prev next")),t(document).on("mousedown",(function(e){n.isInput&&e.target===n.element[0]||0===t(e.target).closest(".datepicker.datepicker-inline, .datepicker.datepicker-dropdown").length&&n.hide()})),this.autoclose=!0,"autoclose"in i?this.autoclose=i.autoclose:"dateAutoclose"in this.element.data()&&(this.autoclose=this.element.data("date-autoclose")),this.keyboardNavigation=!0,"keyboardNavigation"in i?this.keyboardNavigation=i.keyboardNavigation:"dateKeyboardNavigation"in this.element.data()&&(this.keyboardNavigation=this.element.data("date-keyboard-navigation")),this.todayBtn=i.todayBtn||this.element.data("date-today-btn")||!0,this.todayHighlight=i.todayHighlight||this.element.data("date-today-highlight")||!1,this.calendarWeeks=!1,"calendarWeeks"in i?this.calendarWeeks=i.calendarWeeks:"dateCalendarWeeks"in this.element.data()&&(this.calendarWeeks=this.element.data("date-calendar-weeks")),this.calendarWeeks&&this.picker.find("tfoot th.today").attr("colspan",(function(t,e){return parseInt(e)+1})),this.weekStart=(i.weekStart||this.element.data("date-weekstart")||s[this.language].weekStart||0)%7,this.weekEnd=(this.weekStart+6)%7,this.startDate=-1/0,this.endDate=1/0,this.daysOfWeekDisabled=[],this.datesDisabled=[],this.setStartDate(i.startDate||this.element.data("date-startdate")),this.setEndDate(i.endDate||this.element.data("date-enddate")),this.setDaysOfWeekDisabled(i.daysOfWeekDisabled||this.element.data("date-days-of-week-disabled")),this.setDatesDisabled(i.datesDisabled||this.element.data("dates-disabled")),null!=this.initialDate&&(this.date=this.viewDate=a.parseDate(this.initialDate,this.format,this.language),this.setValue()),this.fillDow(),this.fillMonths(),this.update(),this.showMode(),this.isInline)this.show();else if("timefrom"==this.element.attr("name")){let t=document.getElementsByName("timefrom_type");1==t.length&&this._setDateRangeType(t[0].value)}this._attachEvents()};i.prototype={constructor:i,_events:[],_attachEvents:function(){this._detachEvents(),this.isInput?this.keyboardNavigation?this._events=[[this.element,{focus:this.autoShow?t.proxy(this.show,this):function(){},keyup:t.proxy(this.update,this),keydown:t.proxy(this.keydown,this),resetType:t.proxy(this.resetDateRange,this),click:this.element.attr("readonly")?t.proxy(this.show,this):function(){}}]]:this._events=[[this.element,{focus:this.autoShow?t.proxy(this.show,this):function(){}}]]:this.component&&this.hasInput?this._events=[[this.element.find("input"),{focus:this.autoShow?t.proxy(this.show,this):function(){},keyup:t.proxy(this.update,this),keydown:t.proxy(this.keydown,this)}],[this.component,{click:t.proxy(this.show,this)}]]:this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:t.proxy(this.show,this)}]],this.disableDblClickSelection&&(this._events[this._events.length]=[this.element,{dblclick:function(e){e.preventDefault(),e.stopPropagation(),t(this).blur()}}]);for(var e,i,s=0;s<this._events.length;s++)e=this._events[s][0],i=this._events[s][1],e.on(i)},_detachEvents:function(){for(var t,e,i=0;i<this._events.length;i++)t=this._events[i][0],e=this._events[i][1],t.off(e);this._events=[]},show:function(e){this.picker.show(),this.height=this.component?this.component.outerHeight():this.element.outerHeight(),this.update(),this.place(),t(window).on("resize",t.proxy(this.place,this)),e&&(e.stopPropagation(),e.preventDefault()),this.element.trigger({type:"show",date:this.date})},hide:function(e){this.isInline||this.picker.is(":visible")&&(this.picker.hide(),t(window).off("resize",this.place),this.viewMode=this.startViewMode,this.showMode(),this.isInput||t(document).off("mousedown",this.hide),this.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this.element.trigger({type:"hide",date:this.date}))},remove:function(){this._detachEvents(),this.picker.remove(),delete this.element.data().datepicker},getDate:function(){var t=this.getUTCDate();return new Date(t.getTime()+6e4*t.getTimezoneOffset())},getUTCDate:function(){return this.date},setDate:function(t){this.setUTCDate(new Date(t.getTime()-6e4*t.getTimezoneOffset()))},setUTCDate:function(t){this.date=t,this.setValue()},setValue:function(){var t=this.getFormattedDate();this.isInput?this.element.val(t):(this.component&&this.element.find("input").val(t),this.element.data("date",t))},getFormattedDate:function(t){return void 0===t&&(t=this.format),a.formatDate(this.date,t,this.language)},setStartDate:function(t){this.startDate=t||-1/0,this.startDate!==-1/0&&(this.startDate=a.parseDate(this.startDate,this.format,this.language)),this.update(),this.updateNavArrows()},setEndDate:function(t){this.endDate=t||1/0,this.endDate!==1/0&&(this.endDate=a.parseDate(this.endDate,this.format,this.language)),this.update(),this.updateNavArrows()},setDaysOfWeekDisabled:function(e){this.daysOfWeekDisabled=e||[],t.isArray(this.daysOfWeekDisabled)||(this.daysOfWeekDisabled=this.daysOfWeekDisabled.split(/,\s*/)),this.daysOfWeekDisabled=t.map(this.daysOfWeekDisabled,(function(t){return parseInt(t,10)})),this.update(),this.updateNavArrows()},setDatesDisabled:function(e){this.datesDisabled=e||[],t.isArray(this.datesDisabled)||(this.datesDisabled=this.datesDisabled.split(/,\s*/)),this.datesDisabled=t.map(this.datesDisabled,(function(t){return a.parseDate(t,this.format,this.language).valueOf()})),this.update(),this.updateNavArrows()},place:function(){if(!this.isInline){var e=[];this.element.parents().map((function(){"auto"!=t(this).css("z-index")&&e.push(parseInt(t(this).css("z-index")))}));var i=e.sort((function(t,e){return t-e})).pop()+10,s=this.component?this.component:this.element,a=s.offset(),n=s.outerHeight()+parseInt(s.css("margin-top")),h=s.outerWidth()+parseInt(s.css("margin-left")),r=a.top+n,o=a.left;this.picker.removeClass("datepicker-top datepicker-bottom");var d=t(window).scrollTop()<a.top-this.picker.outerHeight(),l=r+this.picker.outerHeight()<t(window).scrollTop()+t(window).height();!l&&d?(r=a.top-this.picker.outerHeight(),this.picker.addClass("datepicker-top")):(l||t(window).scrollTop(a.top),this.picker.addClass("datepicker-bottom")),a.left+this.picker.width()>=t(window).width()&&(o=a.left+h-this.picker.width()),this.picker.css({top:r,left:o,zIndex:i})}},update:function(){var t,e=!1,i=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val();arguments&&arguments.length&&("string"==typeof arguments[0]||arguments[0]instanceof Date)?(t=arguments[0],e=!0):t=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val(),this.date=a.parseDate(t,this.format,this.language),e?this.setValue():""==i&&this.element.trigger({type:"changeDate",date:null}),this.date<this.startDate?this.viewDate=new Date(this.startDate.valueOf()):this.date>this.endDate?this.viewDate=new Date(this.endDate.valueOf()):this.viewDate=new Date(this.date.valueOf()),this.fill()},fillDow:function(){var t=this.weekStart,e="<tr>";if(this.calendarWeeks){var i='<th class="cw">&nbsp;</th>';e+=i,this.picker.find(".datepicker-days thead tr:first-child").prepend(i)}for(;t<this.weekStart+7;)e+='<th class="dow">'+s[this.language].daysMin[t++%7]+"</th>";e+="</tr>",this.picker.find(".datepicker-days thead").append(e)},fillMonths:function(){for(var t="",e=0;e<12;)t+='<span class="month">'+s[this.language].monthsShort[e++]+"</span>";this.picker.find(".datepicker-months td").html(t)},fill:function(){if(null!=this.date&&null!=this.viewDate){var i=new Date(this.viewDate.valueOf()),n=i.getUTCFullYear(),h=i.getUTCMonth(),r=i.getUTCDate(),o=i.getUTCHours(),d=i.getUTCMinutes(),l=this.startDate!==-1/0?this.startDate.getUTCFullYear():-1/0,c=this.startDate!==-1/0?this.startDate.getUTCMonth():-1/0,u=this.endDate!==1/0?this.endDate.getUTCFullYear():1/0,g=this.endDate!==1/0?this.endDate.getUTCMonth():1/0,p=this.date&&e(this.date.getUTCFullYear(),this.date.getUTCMonth(),this.date.getUTCDate()).valueOf(),m=new Date;s[this.language].titleFormat||s.en.titleFormat;this.picker.find(".datepicker-days thead th:eq(1)").text(s[this.language].months[h]+" "+n),this.picker.find(".datepicker-hours thead th:eq(1)").text(r+" "+s[this.language].months[h]+" "+n),this.picker.find(".datepicker-minutes thead th:eq(1)").text(r+" "+s[this.language].months[h]+" "+n),this.picker.find("tfoot th.today").text(s[this.language].today).toggle(!1!==this.todayBtn),this.picker.find("tfoot th.range-yesterday").text(s[this.language].yesterday).toggle(!1!==this.todayBtn),this.picker.find("tfoot th.range-thisweek").text(s[this.language].thisweek).toggle(!1!==this.todayBtn),this.picker.find("tfoot th.range-previousweek").text(s[this.language].previousweek).toggle(!1!==this.todayBtn),this.picker.find("tfoot th.range-thismonth").text(s[this.language].thismonth).toggle(!1!==this.todayBtn),this.picker.find("tfoot th.range-previousmonth").text(s[this.language].previousmonth).toggle(!1!==this.todayBtn),this.picker.find("tfoot th.range-last2days").text(s[this.language].last2days).toggle(!1!==this.todayBtn),this.picker.find("tfoot th.range-last7days").text(s[this.language].last7days).toggle(!1!==this.todayBtn),this.picker.find("tfoot th.range-last15days").text(s[this.language].last15days).toggle(!1!==this.todayBtn),this.picker.find("tfoot th.range-last30days").text(s[this.language].last30days).toggle(!1!==this.todayBtn),this.updateNavArrows(),this.fillMonths();var f=e(n,h-1,28,0,0,0,0),D=a.getDaysInMonth(f.getUTCFullYear(),f.getUTCMonth());f.setUTCDate(D),f.setUTCDate(D-(f.getUTCDay()-this.weekStart+7)%7);var v=new Date(f.valueOf());v.setUTCDate(v.getUTCDate()+42),v=v.valueOf();for(var y,w=[];f.valueOf()<v;){if(f.getUTCDay()==this.weekStart&&(w.push("<tr>"),this.calendarWeeks)){var k=new Date(f.getUTCFullYear(),f.getUTCMonth(),f.getUTCDate()-f.getDay()+10-(this.weekStart&&this.weekStart%7<5&&7)),T=new Date(k.getFullYear(),0,4),M=~~((k-T)/864e5/7+1.5);w.push('<td class="cw">'+M+"</td>")}y=" "+this.onRender(f)+" ",f.getUTCFullYear()<n||f.getUTCFullYear()==n&&f.getUTCMonth()<h?y+=" old":(f.getUTCFullYear()>n||f.getUTCFullYear()==n&&f.getUTCMonth()>h)&&(y+=" new"),this.todayHighlight&&f.getUTCFullYear()==m.getFullYear()&&f.getUTCMonth()==m.getMonth()&&f.getUTCDate()==m.getDate()&&(y+=" today"),p&&f.valueOf()==p&&(y+=" active"),(f.valueOf()<this.startDate||f.valueOf()>this.endDate||-1!==t.inArray(f.getUTCDay(),this.daysOfWeekDisabled)||-1!==t.inArray(f.valueOf(),this.datesDisabled))&&(y+=" disabled"),w.push('<td class="day'+y+'">'+f.getUTCDate()+"</td>"),f.getUTCDay()==this.weekEnd&&w.push("</tr>"),f.setUTCDate(f.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(w.join("")),w=[];for(var C=0;C<24;C++){if(y="",(U=e(n,h,r,C)).valueOf()+36e5<this.startDate||U.valueOf()>this.endDate?y+=" disabled":o==C&&(y+=" active"),this.nonMilitaryTime){S=0==(S=C%12)?12:S;var b="AM";C>=12&&C<=23&&(b="PM"),w.push('<span class="hour nonMilitaryTime'+y+'">'+S+":00 "+b+"</span>")}else w.push('<span class="hour'+y+'">'+C+":00</span>")}this.picker.find(".datepicker-hours td").html(w.join("")),w=[];for(C=0;C<60;C+=this.minuteStep){var U;if(y="",(U=e(n,h,r,o,C)).valueOf()<this.startDate||U.valueOf()>this.endDate?y+=" disabled":Math.floor(d/this.minuteStep)==Math.floor(C/this.minuteStep)&&(y+=" active"),this.nonMilitaryTime){var S;S=0==(S=o%12)?12:S;b="AM";o>=12&&o<=23&&(b="PM"),w.push('<span class="minute nonMilitaryTime'+y+'">'+S+":"+(C<10?"0"+C:C)+" "+b+"</span>")}else w.push('<span class="minute'+y+'">'+o+":"+(C<10?"0"+C:C)+"</span>")}this.picker.find(".datepicker-minutes td").html(w.join(""));var x=this.date&&this.date.getUTCFullYear(),F=this.picker.find(".datepicker-months").find("th:eq(1)").text(n).end().find("span").removeClass("active");x&&x==n&&F.eq(this.date.getUTCMonth()).addClass("active"),(n<l||n>u)&&F.addClass("disabled"),n==l&&F.slice(0,c).addClass("disabled"),n==u&&F.slice(g+1).addClass("disabled"),w="",n=10*parseInt(n/10,10);var _=this.picker.find(".datepicker-years").find("th:eq(1)").text(n+"-"+(n+9)).end().find("td");n-=1;for(C=-1;C<11;C++)w+='<span class="year'+(-1==C||10==C?" old":"")+(x==n?" active":"")+(n<l||n>u?" disabled":"")+'">'+n+"</span>",n+=1;_.html(w)}},updateNavArrows:function(){var t=new Date(this.viewDate),e=t.getUTCFullYear(),i=t.getUTCMonth(),s=t.getUTCDate(),a=t.getUTCHours();switch(this.viewMode){case 0:this.startDate!==-1/0&&e<=this.startDate.getUTCFullYear()&&i<=this.startDate.getUTCMonth()&&s<=this.startDate.getUTCDate()&&a<=this.startDate.getUTCHours()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.endDate!==1/0&&e>=this.endDate.getUTCFullYear()&&i>=this.endDate.getUTCMonth()&&s>=this.endDate.getUTCDate()&&a>=this.endDate.getUTCHours()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:this.startDate!==-1/0&&e<=this.startDate.getUTCFullYear()&&i<=this.startDate.getUTCMonth()&&s<=this.startDate.getUTCDate()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.endDate!==1/0&&e>=this.endDate.getUTCFullYear()&&i>=this.endDate.getUTCMonth()&&s>=this.endDate.getUTCDate()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 2:this.startDate!==-1/0&&e<=this.startDate.getUTCFullYear()&&i<=this.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.endDate!==1/0&&e>=this.endDate.getUTCFullYear()&&i>=this.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 3:case 4:this.startDate!==-1/0&&e<=this.startDate.getUTCFullYear()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.endDate!==1/0&&e>=this.endDate.getUTCFullYear()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}},click:function(i){i.stopPropagation(),i.preventDefault(),(t(i.target).hasClass("datepicker-close")||t(i.target).parent().hasClass("datepicker-close"))&&this.hide();var s=t(i.target).closest("span, td, th");if(1==s.length){if(s.is(".disabled"))return void this.element.trigger({type:"outOfRange",date:this.viewDate,startDate:this.startDate,endDate:this.endDate});switch(s[0].nodeName.toLowerCase()){case"th":switch(s[0].className){case"date-switch":this.showMode(1);break;case"prev":case"next":var n=a.modes[this.viewMode].navStep*("prev"==s[0].className?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveHour(this.viewDate,n);break;case 1:this.viewDate=this.moveDate(this.viewDate,n);break;case 2:this.viewDate=this.moveMonth(this.viewDate,n);break;case 3:case 4:this.viewDate=this.moveYear(this.viewDate,n)}this.fill();break;case"today":h=e((h=new Date).getFullYear(),h.getMonth(),h.getDate(),h.getHours(),h.getMinutes(),h.getSeconds()),this.viewMode=this.startViewMode,this.showMode(0),this._setDate(h),this._setDateDependant(h),this._setDateRangeType("today");break;case"range-yesterday":var h=new Date,r=new Date;h=e(h.getFullYear(),h.getMonth(),h.getDate(),h.getHours()-24,h.getMinutes(),h.getSeconds()),r=e(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours()-24,r.getMinutes(),r.getSeconds()),this.viewMode=this.startViewMode,this.showMode(0),this._setDate(h),this._setDateDependant(h,r),this._setDateRangeType("range-yesterday");break;case"range-last2days":h=new Date,r=new Date;h=e(h.getFullYear(),h.getMonth(),h.getDate(),h.getHours()-48,h.getMinutes(),h.getSeconds()),r=e(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours()-24,r.getMinutes(),r.getSeconds()),this.viewMode=this.startViewMode,this.showMode(0),this._setDate(h),this._setDateDependant(h,r),this._setDateRangeType("range-last2days");break;case"range-last7days":h=new Date,r=new Date;h=e(h.getFullYear(),h.getMonth(),h.getDate(),h.getHours()-168,h.getMinutes(),h.getSeconds()),r=e(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours()-24,r.getMinutes(),r.getSeconds()),this.viewMode=this.startViewMode,this.showMode(0),this._setDate(h),this._setDateDependant(h,r),this._setDateRangeType("range-last7days");break;case"range-last15days":h=new Date,r=new Date;h=e(h.getFullYear(),h.getMonth(),h.getDate(),h.getHours()-360,h.getMinutes(),h.getSeconds()),r=e(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours()-24,r.getMinutes(),r.getSeconds()),this.viewMode=this.startViewMode,this.showMode(0),this._setDate(h),this._setDateDependant(h,r),this._setDateRangeType("range-last15days");break;case"range-last30days":h=new Date,r=new Date;h=e(h.getFullYear(),h.getMonth(),h.getDate(),h.getHours()-720,h.getMinutes(),h.getSeconds()),r=e(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours()-24,r.getMinutes(),r.getSeconds()),this.viewMode=this.startViewMode,this.showMode(0),this._setDate(h),this._setDateDependant(h,r),this._setDateRangeType("range-last30days");break;case"range-thisweek":h=new Date,r=new Date;h=e(h.getFullYear(),h.getMonth(),h.getDate(),h.getHours()-(0==h.getDay()?144:24*(h.getDay()-1)),h.getMinutes(),h.getSeconds()),this.viewMode=this.startViewMode,this.showMode(0),this._setDate(h),this._setDateDependant(h),this._setDateRangeType("range-thisweek");break;case"range-previousweek":h=new Date,r=new Date;h=e(h.getFullYear(),h.getMonth(),h.getDate(),h.getHours()-(0==h.getDay()?144:24*(h.getDay()-1))-168,h.getMinutes(),h.getSeconds()),r=e(h.getFullYear(),h.getMonth(),h.getDate(),h.getDay()+144,h.getMinutes(),r.getSeconds()),this.viewMode=this.startViewMode,this.showMode(0),this._setDate(h),this._setDateDependant(h,r),this._setDateRangeType("range-previousweek");break;case"range-thismonth":h=new Date,r=new Date;h=e(h.getFullYear(),h.getMonth(),1,h.getHours(),h.getMinutes(),h.getSeconds()),this.viewMode=this.startViewMode,this.showMode(0),this._setDate(h),this._setDateDependant(h),this._setDateRangeType("range-thismonth");break;case"range-previousmonth":h=new Date,r=new Date;h=e(h.getFullYear(),h.getMonth()-1,1,h.getHours(),h.getMinutes(),h.getSeconds()),r=e(r.getFullYear(),r.getMonth(),0,r.getHours(),r.getMinutes(),r.getSeconds()),this.viewMode=this.startViewMode,this.showMode(0),this._setDate(h),this._setDateDependant(h,r),this._setDateRangeType("range-previousmonth")}break;case"span":if(!s.is(".disabled")){if(s.is(".month"))if(3===this.minView){var o=s.parent().find("span").index(s)||0,d=this.viewDate.getUTCFullYear(),l=1,c=this.viewDate.getUTCHours(),u=this.viewDate.getUTCMinutes(),g=this.viewDate.getUTCSeconds();this._setDate(e(d,o,l,c,u,g,0))}else{this.viewDate.setUTCDate(1);o=s.parent().find("span").index(s);this.viewDate.setUTCMonth(o),this.element.trigger({type:"changeMonth",date:this.viewDate})}else if(s.is(".year"))if(4===this.minView){d=parseInt(s.text(),10)||0,o=0,l=1,c=this.viewDate.getUTCHours(),u=this.viewDate.getUTCMinutes(),g=this.viewDate.getUTCSeconds();this._setDate(e(d,o,l,c,u,g,0))}else{this.viewDate.setUTCDate(1);d=parseInt(s.text(),10)||0;this.viewDate.setUTCFullYear(d),this.element.trigger({type:"changeYear",date:this.viewDate})}else if(s.is(".hour")){c=this.nonMilitaryTime?s.text().indexOf("AM")>=0?parseInt(s.text(),10)||0:parseInt(s.text(),10)+12||0:parseInt(s.text(),10)||0;d=this.viewDate.getUTCFullYear(),o=this.viewDate.getUTCMonth(),l=this.viewDate.getUTCDate(),u=this.viewDate.getUTCMinutes(),g=this.viewDate.getUTCSeconds();this._setDate(e(d,o,l,c,u,g,0))}else if(s.is(".minute")){u=parseInt(s.text().substr(s.text().indexOf(":")+1),10)||0,d=this.viewDate.getUTCFullYear(),o=this.viewDate.getUTCMonth(),l=this.viewDate.getUTCDate(),c=this.viewDate.getUTCHours(),g=this.viewDate.getUTCSeconds();this._setDate(e(d,o,l,c,u,g,0))}if(0!=this.viewMode){var p=this.viewMode;this.showMode(-1),this.fill(),p==this.viewMode&&this.autoclose&&this.hide()}else this.fill(),this.autoclose&&this.hide()}break;case"td":if(s.is(".day")&&!s.is(".disabled")){l=parseInt(s.text(),10)||1,d=this.viewDate.getUTCFullYear(),o=this.viewDate.getUTCMonth(),c=this.viewDate.getUTCHours(),u=this.viewDate.getUTCMinutes(),g=this.viewDate.getUTCSeconds();s.is(".old")?0===o?(o=11,d-=1):o-=1:s.is(".new")&&(11==o?(o=0,d+=1):o+=1),this._setDate(e(d,o,l,c,u,g,0)),this._setDateDependant(this.date,null,!0),this._setDateRangeType(null)}p=this.viewMode;this.showMode(-1),this.fill(),p==this.viewMode&&this.autoclose&&this.hide()}}},resetDateRange:function(){null!=this.rangeType&&this._setDateRangeType(null)},_setDateRangeType:function(e){let i=document.getElementsByName("timefrom_type");if(this.picker.find("tfoot > tr.range-button > th").removeClass("selected-range"),"timefrom"==this.element.attr("name")){if(1==i.length&&e)return i[0].value=e,this.rangeType=e,t(".date-range-explain").addClass("hide"),t(".date-range-type-"+e).removeClass("hide"),void this.picker.find("tfoot > tr.range-button > th."+e).addClass("selected-range")}else t("#id_timefrom").trigger("resetType");1==i.length&&(i[0].value=""),this.rangeType=null,t(".date-range-explain").addClass("hide")},_setDateDependant:function(t,e,i){if("timefrom"==this.element.attr("name")){let t=document.getElementsByName("timefrom_hours");if(1==t.length&&(t[0].value=0),t=document.getElementsByName("timefrom_minutes"),1==t.length&&(t[0].value=0),t=document.getElementsByName("timefrom_seconds"),1==t.length&&(t[0].value=0),e){let t=document.getElementsByName("timeto_hours");1==t.length&&(t[0].value="23"),t=document.getElementsByName("timeto_minutes"),1==t.length&&(t[0].value="59"),t=document.getElementsByName("timeto_seconds"),1==t.length&&(t[0].value="59"),t=document.getElementsByName("timeto"),1==t.length&&(t[0].value=a.formatDate(e,this.format,this.language))}else if(!i){let t=document.getElementsByName("timeto_hours");1==t.length&&(t[0].value=""),t=document.getElementsByName("timeto_minutes"),1==t.length&&(t[0].value=""),t=document.getElementsByName("timeto_seconds"),1==t.length&&(t[0].value=""),t=document.getElementsByName("timeto"),1==t.length&&(t[0].value="")}}else if("timeto"==this.element.attr("name")){let t=document.getElementsByName("timeto_hours");1==t.length&&(t[0].value="23"),t=document.getElementsByName("timeto_minutes"),1==t.length&&(t[0].value="59"),t=document.getElementsByName("timeto_seconds"),1==t.length&&(t[0].value="59")}},_setDate:function(t,e){var i;e&&"date"!=e||(this.date=t),e&&"view"!=e||(this.viewDate=t),this.fill(),this.setValue(),this.element.trigger({type:"changeDate",date:this.date}),this.isInput?i=this.element:this.component&&(i=this.element.find("input")),i&&(i.change(),this.autoclose)},moveHour:function(t,e){if(!e)return t;var i=new Date(t.valueOf());return e=e>0?1:-1,i.setUTCHours(i.getUTCHours()+e),i},moveDate:function(t,e){if(!e)return t;var i=new Date(t.valueOf());return e=e>0?1:-1,i.setUTCDate(i.getUTCDate()+e),i},moveMonth:function(t,e){if(!e)return t;var i,s,a=new Date(t.valueOf()),n=a.getUTCDate(),h=a.getUTCMonth(),r=Math.abs(e);if(e=e>0?1:-1,1==r)s=-1==e?function(){return a.getUTCMonth()==h}:function(){return a.getUTCMonth()!=i},i=h+e,a.setUTCMonth(i),(i<0||i>11)&&(i=(i+12)%12);else{for(var o=0;o<r;o++)a=this.moveMonth(a,e);i=a.getUTCMonth(),a.setUTCDate(n),s=function(){return i!=a.getUTCMonth()}}for(;s();)a.setUTCDate(--n),a.setUTCMonth(i);return a},moveYear:function(t,e){return this.moveMonth(t,12*e)},dateWithinRange:function(t){return t>=this.startDate&&t<=this.endDate},keydown:function(t){if(!this.keyboardNavigation)return!0;if(this.picker.is(":not(:visible)"))27==t.keyCode&&this.show();else{var e,i,s,a,n=!1;switch(t.keyCode){case 27:case 13:this.hide(),t.preventDefault();break;case 37:case 39:if(!this.keyboardNavigation)break;e=37==t.keyCode?-1:1,t.ctrlKey?(i=this.moveYear(this.date,e),s=this.moveYear(this.viewDate,e)):t.shiftKey?(i=this.moveMonth(this.date,e),s=this.moveMonth(this.viewDate,e)):((i=new Date(this.date.valueOf())).setUTCDate(this.date.getUTCDate()+e),(s=new Date(this.viewDate.valueOf())).setUTCDate(this.viewDate.getUTCDate()+e)),this.dateWithinRange(i)&&(this.date=i,this.viewDate=s,this.setValue(),this.update(),t.preventDefault(),n=!0);break;case 38:case 40:if(!this.keyboardNavigation)break;e=38==t.keyCode?-1:1,t.ctrlKey?(i=this.moveYear(this.date,e),s=this.moveYear(this.viewDate,e)):t.shiftKey?(i=this.moveMonth(this.date,e),s=this.moveMonth(this.viewDate,e)):((i=new Date(this.date.valueOf())).setUTCDate(this.date.getUTCDate()+7*e),(s=new Date(this.viewDate.valueOf())).setUTCDate(this.viewDate.getUTCDate()+7*e)),this.dateWithinRange(i)&&(this.date=i,this.viewDate=s,this.setValue(),this.update(),t.preventDefault(),n=!0);break;case 9:this.hide()}if(n)this.element.trigger({type:"changeDate",date:this.date}),this.isInput?a=this.element:this.component&&(a=this.element.find("input")),a&&a.change();(n||-1!==[8,96,97,98,99,100,101,102,103,104,105,109,46].indexOf(t.keyCode))&&this._setDateRangeType(null)}},showMode:function(t){if(t){var e=Math.max(0,Math.min(a.modes.length-1,this.viewMode+t));e>=this.minView&&e<=this.maxView&&(this.viewMode=e)}this.picker.find(">div").hide().filter(".datepicker-"+a.modes[this.viewMode].clsName).css("display","block"),this.updateNavArrows()},changeViewDate:function(t){this.date=t,this.viewDate=t,this.fill()},reset:function(t){this._setDate(null,"date")}},t.fn.fdatepicker=function(e){var s=Array.apply(null,arguments);return s.shift(),this.each((function(){var a=t(this),n=a.data("datepicker"),h="object"==typeof e&&e;n||a.data("datepicker",n=new i(this,t.extend({},t.fn.fdatepicker.defaults,h))),"string"==typeof e&&"function"==typeof n[e]&&n[e].apply(n,s)}))},t.fn.fdatepicker.defaults={onRender:function(t){return""}},t.fn.fdatepicker.Constructor=i;var s=t.fn.fdatepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",yesterday:"Yesterday",thisweek:"This week",previousweek:"Previous week",thismonth:"This month",previousmonth:"Previous month",last2days:"Last 2 days",last7days:"Last 7 days",last15days:"Last 15 days",last30days:"Last 30 days",titleFormat:"MM yyyy"}},a={modes:[{clsName:"minutes",navFnc:"Hours",navStep:1},{clsName:"hours",navFnc:"Date",navStep:1},{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(t){return t%4==0&&t%100!=0||t%400==0},getDaysInMonth:function(t,e){return[31,a.isLeapYear(t)?29:28,31,30,31,30,31,31,30,31,30,31][e]},validParts:/hh?|ii?|ss?|dd?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(t){var e=t.replace(this.validParts,"\0").split("\0"),i=t.match(this.validParts);if(!e||!e.length||!i||0===i.length)throw new Error("Invalid date format.");return this.formatText=t,{separators:e,parts:i}},parseDate:function(i,a,n){if(i instanceof Date)return new Date(i.valueOf()-6e4*i.getTimezoneOffset());if(/^\d{4}\-\d{1,2}\-\d{1,2}$/.test(i)&&(a=this.parseFormat("yyyy-mm-dd")),/^\d{4}\-\d{1,2}\-\d{1,2}[T ]\d{1,2}\:\d{1,2}$/.test(i)&&(a=this.parseFormat("yyyy-mm-dd hh:ii")),/^\d{4}\-\d{1,2}\-\d{1,2}[T ]\d{1,2}\:\d{1,2}\:\d{1,2}[Z]{0,1}$/.test(i)&&(a=this.parseFormat("yyyy-mm-dd hh:ii:ss")),/^[-+]\d+[dmwy]([\s,]+[-+]\d+[dmwy])*$/.test(i)){var h,r=/([-+]\d+)([dmwy])/,o=i.match(/([-+]\d+)([dmwy])/g);i=new Date;for(var d=0;d<o.length;d++)switch(u=r.exec(o[d]),h=parseInt(u[1]),u[2]){case"d":i.setUTCDate(i.getUTCDate()+h);break;case"m":i=Datetimepicker.prototype.moveMonth.call(Datetimepicker.prototype,i,h);break;case"w":i.setUTCDate(i.getUTCDate()+7*h);break;case"y":i=Datetimepicker.prototype.moveYear.call(Datetimepicker.prototype,i,h)}return e(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate(),i.getUTCHours(),i.getUTCMinutes(),i.getUTCSeconds())}o=i&&i.match(this.nonpunctuation)||[],i=new Date;var l,c,u,g={},p=["hh","h","ii","i","ss","s","yyyy","yy","M","MM","m","mm","d","dd"],m={hh:function(t,e){return t.setUTCHours(e)},h:function(t,e){return t.setUTCHours(e)},ii:function(t,e){return t.setUTCMinutes(e)},i:function(t,e){return t.setUTCMinutes(e)},ss:function(t,e){return t.setUTCSeconds(e)},s:function(t,e){return t.setUTCSeconds(e)},yyyy:function(t,e){return t.setUTCFullYear(e)},yy:function(t,e){return t.setUTCFullYear(2e3+e)},m:function(t,e){for(e-=1;e<0;)e+=12;for(e%=12,t.setUTCMonth(e);t.getUTCMonth()!=e;)t.setUTCDate(t.getUTCDate()-1);return t},d:function(t,e){return t.setUTCDate(e)}};if(m.M=m.MM=m.mm=m.m,m.dd=m.d,i=e(i.getFullYear(),i.getMonth(),i.getDate(),0,0,0),o.length==a.parts.length){d=0;for(var f=a.parts.length;d<f;d++){if(l=parseInt(o[d],10),u=a.parts[d],isNaN(l))switch(u){case"MM":c=t(s[n].months).filter((function(){var t=this.slice(0,o[d].length);return t==o[d].slice(0,t.length)})),l=t.inArray(c[0],s[n].months)+1;break;case"M":c=t(s[n].monthsShort).filter((function(){var t=this.slice(0,o[d].length);return t==o[d].slice(0,t.length)})),l=t.inArray(c[0],s[n].monthsShort)+1}g[u]=l}var D;for(d=0;d<p.length;d++)(D=p[d])in g&&!isNaN(g[D])&&m[D](i,g[D])}return i},formatDate:function(e,i,a){if(null==e)return"";var n={h:e.getUTCHours(),i:e.getUTCMinutes(),s:e.getUTCSeconds(),d:e.getUTCDate(),m:e.getUTCMonth()+1,M:s[a].monthsShort[e.getUTCMonth()],MM:s[a].months[e.getUTCMonth()],yy:e.getUTCFullYear().toString().substring(2),yyyy:e.getUTCFullYear()};n.hh=(n.h<10?"0":"")+n.h,n.ii=(n.i<10?"0":"")+n.i,n.ss=(n.s<10?"0":"")+n.s,n.dd=(n.d<10?"0":"")+n.d,n.mm=(n.m<10?"0":"")+n.m;e=[];for(var h=t.extend([],i.separators),r=0,o=i.parts.length;r<o;r++)h.length&&e.push(h.shift()),e.push(n[i.parts[r]]);return e.join("")},convertViewMode:function(t){switch(t){case 4:case"decade":t=4;break;case 3:case"year":t=3;break;case 2:case"month":t=2;break;case 1:case"day":t=1;break;case 0:case"hour":t=0}return t},headTemplate:function(t,e){return'<thead><tr><th class="prev">'+t+'</th><th colspan="5" class="date-switch"></th><th class="next">'+e+"</th></tr></thead>"},contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr class="range-button"><th colspan="3" class="today"></th><th colspan="4" class="range-yesterday"></th></tr><tr class="range-button"><th colspan="3" class="range-last2days"></th><th colspan="4" class="range-last7days"></th></tr><tr class="range-button"><th colspan="3" class="range-last15days"></th><th colspan="4" class="range-last30days"></th></tr><tr class="range-button"><th colspan="3" class="range-thisweek"></th><th colspan="4" class="range-previousweek"></th></tr><tr class="range-button"><th colspan="3" class="range-thismonth"></th><th colspan="4" class="range-previousmonth"></th></tr></tfoot>',template:function(t,e,i){return'<div class="datepicker"><div class="datepicker-minutes"><table class=" table-condensed">'+a.headTemplate(t,e)+a.contTemplate+a.footTemplate+'</table></div><div class="datepicker-hours"><table class=" table-condensed">'+a.headTemplate(t,e)+a.contTemplate+a.footTemplate+'</table></div><div class="datepicker-days"><table class=" table-condensed">'+a.headTemplate(t,e)+"<tbody></tbody>"+a.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+a.headTemplate(t,e)+a.contTemplate+a.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+a.headTemplate(t,e)+a.contTemplate+a.footTemplate+'</table></div><a class="button datepicker-close tiny alert right" style="width:auto;">'+i+"</a></div>"}};t.fn.fdatepicker.DPGlobal=a}(window.jQuery);