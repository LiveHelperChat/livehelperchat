{"version":3,"file":"605.d50b99a2b4ea65b7e729.js","mappings":"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","sources":["webpack://LHCReactAPPAdmin/./src/components/parts/GroupChatMessage.js","webpack://LHCReactAPPAdmin/./src/components/lib/groupChatSync.js","webpack://LHCReactAPPAdmin/./src/components/GroupChat.js","webpack://LHCReactAPPAdmin/./src/components/lib/useInterval.js"],"sourcesContent":["import parse, { domToReact } from 'html-react-parser';\nimport React from \"react\";\n\nconst GroupChatMessage = ({message, index}) => {\n\n    var operatorChanged = false;\n\n    return parse(message['msg'], {\n\n        replace: domNode => {\n            if (domNode.attribs) {\n\n                var cloneAttr = Object.assign({}, domNode.attribs);\n\n                if (domNode.attribs.class) {\n                    domNode.attribs.className = domNode.attribs.class;\n\n                    // Animate only if it's not first sync call\n                    if (domNode.attribs.className.indexOf('message-row') !== -1 && index > 0) {\n                        domNode.attribs.className += ' fade-in-fast';\n                        if (message['msop'] > 0 && message['msop'] != message['lmsop'] && operatorChanged == false) {\n                            domNode.attribs.className += ' operator-changes';\n                            operatorChanged = true;\n                        }\n                    }\n\n                    delete domNode.attribs.class;\n                }\n\n                if (domNode.attribs.onclick) {\n                    delete domNode.attribs.onclick;\n                }\n\n                if (domNode.name && domNode.name === 'img') {\n                    return <img {...domNode.attribs} />\n                } else if (domNode.name && domNode.name === 'a') {\n                    if (cloneAttr.onclick) {\n                        return <a {...domNode.attribs}  >{domToReact(domNode.children)}</a>\n                    }\n                }\n            }\n        }\n    });\n}\n\nexport default React.memo(GroupChatMessage);","import axios from \"axios\";\n\nclass _groupChatSync {\n\n    constructor() {\n        this.eventEmitter = new EventEmitter();\n        this.chatsSynchro = [];\n        this.chatsSynchroMsg = [];\n        this.timeoutSync = null;\n        this.syncInProgress = false;\n        this.fetchStatus = false;\n    }\n\n    setFetchStatus(status) {\n        this.fetchStatus = status;\n    }\n\n    sync() {\n        if (this.syncInProgress == true) {return;}\n\n        this.syncInProgress = true;\n\n        axios.post(WWW_DIR_JAVASCRIPT  + \"groupchat/sync\" + (this.fetchStatus == true ? '/(opt)/status' : ''), this.chatsSynchroMsg).then(result => {\n\n            this.fetchStatus = false;\n\n            let groupedData = [];\n\n            result.data.result.forEach((chatData) => {\n                if (!groupedData[chatData.chat_id]) {\n                    groupedData[chatData.chat_id] = {};\n                }\n\n                groupedData[chatData.chat_id][\"msg\"] = chatData;\n\n                let index = this.chatsSynchro.indexOf(chatData.chat_id);\n                let parts = this.chatsSynchroMsg[index].split(\",\");\n                parts[1] = chatData.message_id;\n\n                this.chatsSynchroMsg[index] = parts.join(\",\");\n            });\n\n            result.data.result_status.forEach((chatData) => {\n                if (!groupedData[chatData.chat_id]) {\n                    groupedData[chatData.chat_id] = {};\n                }\n\n                groupedData[chatData.chat_id][\"status\"] = chatData;\n\n                let index = this.chatsSynchro.indexOf(chatData.chat_id);\n                let parts = this.chatsSynchroMsg[index].split(\",\");\n                parts[2] = chatData.lgsync;\n\n                this.chatsSynchroMsg[index] = parts.join(\",\");\n            })\n\n            groupedData.forEach((chatData, chatId) => {\n                this.eventEmitter.emitEvent('gchat_'+chatId, [chatData]);\n            });\n\n            this.syncInProgress = false;\n        });\n    }\n\n    startSync() {\n        clearTimeout(this.timeoutSync);\n        if (this.chatsSynchro.length > 0) {\n            this.timeoutSync = setInterval(() => { this.sync(); }, 2500);\n        }\n    }\n\n    addSubscriber(chatId, cb) {\n        this.chatsSynchro.push(parseInt(chatId));\n        this.chatsSynchroMsg.push(chatId+\",0,0\");\n        this.eventEmitter.addListener('gchat_'+chatId, cb);\n        this.startSync();\n    }\n\n    removeSubscriber(chatId, cb) {\n        var index = this.chatsSynchro.indexOf(parseInt(chatId));\n        if (index !== -1) {\n            this.chatsSynchro.splice(index, 1);\n            this.chatsSynchroMsg.splice(index, 1);\n            this.eventEmitter.removeListener('gchat_'+chatId, cb);\n            this.startSync();\n        }\n    }\n};\n\nconst groupChatSync = new _groupChatSync();\nexport { groupChatSync };","//https://medium.com/@MilkMan/read-this-before-refactoring-your-big-react-class-components-to-hooks-515437e9d96f\n//https://reactjs.org/docs/hooks-reference.html#usereducer\n\nimport React, { useEffect, useState, useReducer, useRef } from \"react\";\nimport axios from \"axios\";\nimport GroupChatMessage from \"./parts/GroupChatMessage\";\nimport useInterval from \"./lib/useInterval\";\nimport {groupChatSync} from \"./lib/groupChatSync\";\nimport {useTranslation} from 'react-i18next';\n\naxios.defaults.headers.common['X-CSRFToken'] = confLH.csrf_token;\n\nfunction reducer(state, action) {\n    switch (action.type) {\n        case 'increment':\n            return {count: state.count + 1};\n        case 'decrement':\n            return {count: state.count - 1};\n        case 'update': {\n            return { ...state, ...action.value }\n        }\n        case 'update_messages': {\n\n            // Set last operator from previous state\n            action.messages['lmsop'] = state.lmsop || action.value.lmsop;\n\n            // Update state\n            state = { ...state, ...action.value };\n\n            // Update message\n            state.messages.push(action.messages);\n\n            return state;\n        }\n        case 'update_history': {\n            state = { ...state, ...action.value };\n            if (action.history.msg != '') {\n                state.messages.unshift(action.history);\n            }\n            return state;\n        }\n        case 'init':\n            return {count: state.count - 1};\n        default:\n            throw new Error('Unknown action!');\n    }\n}\n\nconst GroupChat = props => {\n\n    const messageElement = useRef(null);\n    const messagesElement = useRef(null);\n    const tabsContainer = useRef(null);\n    const searchOperatorElement = useRef(null);\n\n    const [state, dispatch] = useReducer(reducer, {\n        messages: [],\n        operators: [],\n        supervistors: [],\n        operators_invite: [],\n        chat: {},\n        has_more_messages: false,\n        old_message_id: 0,\n        last_message: '',\n        error: '',\n        last_message_id: 0,\n        lmsop: 0,\n        lgsync: 0\n    });\n\n    const loadMainData = () => {\n        return axios.post(WWW_DIR_JAVASCRIPT  + \"groupchat/\" + (props.chatPublicId ? 'loadpublichat' : 'loadgroupchat') + \"/\" + (props.chatPublicId || props.chatId));\n    }\n\n    const loadPrevious = () => {\n        axios.get(WWW_DIR_JAVASCRIPT  + \"groupchat/loadpreviousmessages/\" + props.chatId+'/'+state.old_message_id).then(result => {\n            dispatch({\n                type: 'update_history',\n                value: {\n                    'has_more_messages' : result.data.has_messages,\n                    'old_message_id' : result.data.message_id\n                },\n                history: {\n                    \"msg\" : result.data.result,\n                    \"msop\" : result.data.msop,\n                    \"lmsop\" : result.data.lmsop\n                }\n            });\n        });\n    }\n\n    const startChatWithOperator = (operator) => {\n        ee.emitEvent('angularStartChatOperatorPublic',[operator.user_id]);\n    }\n\n    const setUnreadSupportChat = (chat_id, length) => {\n        var tab = document.getElementById('chat-tab-link-'+chat_id);\n        var whoisHot,hotSet = false;\n        if (tab !== null && length > 1 && !tab.classList.contains('active') && (whoisHot = tab.querySelector('.whatshot')) !== null) {\n            whoisHot.classList.remove(\"d-none\");\n            ee.emitEvent('supportUnreadChat', [{id:chat_id,unread:true}]);\n            playSoundMessage();\n            hotSet = true;\n        }\n\n        if (hotSet == false) {\n            tab = document.getElementById('private-chat-tab-link-'+chat_id);\n            if (tab !== null && length > 1 && !tab.classList.contains('active') && (whoisHot = tab.querySelector('.whatshot')) !== null) {\n                whoisHot.classList.remove(\"d-none\");\n                playSoundMessage();\n            }\n        }\n    }\n\n    const playSoundMessage = () => {\n        lhinst.playNewMessageSound();\n    }\n\n    useEffect(() => {\n        messagesElement.current.scrollTop = messagesElement.current.scrollHeight;\n\n        if (!props.chatPublicId) {\n            var tab = document.getElementById('chat-tab-link-gc'+props.chatId);\n            if (tab && state.messages.length > 1 && !tab.classList.contains('active')) {\n                tab.querySelector('.whatshot').classList.remove(\"d-none\");\n                playSoundMessage();\n            }\n        } else {\n            setUnreadSupportChat(props.chatPublicId, state.messages.length);\n        }\n\n    },[state.messages.length]);\n\n    const rememberChat = (chatId) => {\n        if (localStorage) {\n            try {\n                var achat_id_array = [];\n                var achat_id = localStorage.getItem('gachat_id');\n\n                if (achat_id !== null && achat_id !== '') {\n                    achat_id_array = achat_id.split(',');\n                }\n\n                if (achat_id_array.indexOf(chatId) === -1){\n                    achat_id_array.push(chatId);\n                    localStorage.setItem('gachat_id',achat_id_array.join(','));\n                }\n\n            } catch(e) {\n\n            }\n        }\n    }\n\n    const leaveGroup = () => {\n        axios.get(WWW_DIR_JAVASCRIPT  + \"groupchat/leave/\" + props.chatId).then(result => {\n            lhinst.removeDialogTabGroup('gc'+props.chatId,$('#tabs'),true)\n        });\n    }\n\n    var searchTimeout = null\n    const searchOpeartors = () => {\n        clearTimeout(searchTimeout);\n        searchTimeout = setTimeout(() => {\n            axios.get(WWW_DIR_JAVASCRIPT  + \"groupchat/searchoperator/\"+props.chatId+\"?\"+(props.chatPublicId ? \"id=\"+props.chatPublicId+\"&\" : '')+\"q=\" + escape(searchOperatorElement.current.value)).then(result => {\n                dispatch({\n                    type: 'update',\n                    value: {\n                        \"operators_invite\" : result.data\n                    }\n                });\n            });\n        },200);\n    }\n\n    const cancelSearch = () => {\n        dispatch({\n            type: 'update',\n            value: {\n                \"operators_invite\" : []\n            }\n        });\n    }\n\n    const forgetChat = (chatId) => {\n        if (localStorage) {\n            try {\n                var achat_id_array = [];\n                var achat_id = localStorage.getItem('gachat_id');\n\n                if (achat_id !== null && achat_id !== '') {\n                    achat_id_array = achat_id.split(',');\n                }\n\n                if (achat_id_array.indexOf(chatId) !== -1) {\n                    achat_id_array.splice(achat_id_array.indexOf(chatId),1);\n                }\n\n                localStorage.setItem('gachat_id',achat_id_array.join(','));\n            } catch(e) {\n\n            }\n        }\n    }\n\n    useEffect(() => {\n\n        const chatSynced = (e) => {\n            if (e.msg) {\n                dispatch({\n                    type: 'update_messages',\n                    messages : {\n                        'msg':e.msg.content,\n                        'msop': e.msg.msop,\n                    },\n                    value: {\n                        'last_message_id' : e.msg.message_id,\n                        'lmsop': e.msg.lmsop\n                    }\n                });\n            }\n\n            if (e.status) {\n                let valueUpdate = {\n                    'operators': e.status.operators,\n                    'lgsync': e.status.lgsync\n                };\n\n                if (e.status.old_message_id) {\n                    valueUpdate['has_more_messages'] = e.status.has_more_messages;\n                    valueUpdate['old_message_id'] = e.status.old_message_id;\n                }\n\n                dispatch({\n                    type: 'update',\n                    value: valueUpdate\n                });\n            }\n        }\n\n        const subTabClicked = (e) => {\n            tabClicked(props.chatPublicId, null, true);\n        }\n\n        loadMainData().then(result => {\n\n            if (!props.chatPublicId) {\n                rememberChat(props.chatId);\n            } else {\n                var div = document.createElement('div');\n                div.innerHTML = \"<i class=\\\"whatshot blink-ani d-none text-warning material-icons\\\">whatshot</i>\";\n                document.getElementById('chat-tab-link-'+props.chatPublicId).prepend(div.firstChild);\n                document.getElementById('private-chat-tab-link-'+props.chatPublicId).addEventListener('click',subTabClicked);\n             }\n\n            var subTab = document.getElementById('private-chat-tab-link-'+props.chatPublicId);\n\n            if ((props.paramsStart && props.paramsStart.unread) || (subTab !== null && subTab.getAttribute('data-unread') == 'true')) {\n                setUnreadSupportChat(props.chatPublicId,2);\n            }\n\n            if (props.paramsStart && props.paramsStart.default_message && messageElement.current !== null) {\n                messageElement.current.focus();\n                messageElement.current.value = '[quote]'+props.paramsStart.default_message+'[/quote]'+\"\\n\";\n            }\n\n            props.chatId = String(result.data.chat.id);\n            groupChatSync.addSubscriber(props.chatId, chatSynced);\n            groupChatSync.sync();\n\n            if (!props.chatPublicId){\n                var container = tabsContainer.current;\n                var bsn = require(\"bootstrap.native/dist/bootstrap-native-v4\");\n                var tabs = container.querySelectorAll('[data-bs-toggle=\"tab\"]');\n\n                if (tabs.length > 0) {\n                    Array.prototype.forEach.call(tabs, function(element){ new bsn.Tab( element) });\n                }\n            }\n\n            dispatch({\n                type: 'update',\n                value: {\n                    'chat': result.data.chat,\n                    'supervisors': result.data.supervisors || []\n                }\n            });\n\n        }).catch((error) => {\n           !props.chatPublicId && lhinst.removeDialogTabGroup('gc'+props.chatId,$('#tabs'),true);\n            if (error.response && error.response.data && error.response.data.error) {\n                dispatch({\n                    type: 'update',\n                    value: {\n                        \"error\" : error.response.data.error\n                    }\n                });\n            }\n        })\n\n        const tabClicked = (e, elm, forceFocus) => {\n            if ((props.chatPublicId && e == props.chatPublicId) || (!props.chatPublicId && e == props.chatId)) {\n\n                if (messagesElement.current !== null){\n                    setTimeout(() => {\n                        if (messagesElement.current !== null){\n                            (!props.chatPublicId || forceFocus) && messageElement.current.focus();\n                            if (messagesElement.current.scrollHeight - (messagesElement.current.scrollTop + messagesElement.current.offsetHeight) < (messagesElement.current.offsetHeight - 50)) {\n                                messagesElement.current.scrollTop = messagesElement.current.scrollHeight;\n                            }\n                        }\n                    },2);\n                }\n\n                var tab = document.getElementById(!props.chatPublicId ? 'chat-tab-link-gc'+props.chatId : 'chat-tab-link-'+props.chatPublicId);\n\n                if (tab !== null) {\n                    var tabHot = tab.querySelector('.whatshot');\n                    if (tabHot !== null && !tabHot.classList.contains(\"d-none\")) {\n                        tabHot.classList.add(\"d-none\");\n                        // Activate private chat subtab if it was pending\n                        if (props.chatPublicId) {\n                            document.getElementById('private-chat-tab-link-'+props.chatPublicId).click();\n                        }\n                    }\n                }\n\n                if (props.chatPublicId){\n                    var tab = document.getElementById('private-chat-tab-link-'+props.chatPublicId);\n                    if (tab !== null) {\n                        var tabHot = tab.querySelector('.whatshot');\n                        if (tabHot !== null && !tabHot.classList.contains(\"d-none\")) {\n                            tabHot.classList.add(\"d-none\");\n                        }\n                    }\n                }\n            }\n        }\n\n        const prefillMessage = (chatId, message) => {\n            if (props.chatPublicId && chatId == props.chatPublicId) {\n                if (messageElement && messageElement.current) {\n                    messageElement.current.value = '[quote]'+message+'[/quote]'+\"\\n\";\n                    messageElement.current.focus();\n                }\n            }\n        }\n\n        if (props.chatPublicId){\n            ee.addListener('groupChatPrefillMessage',prefillMessage);\n        }\n\n        ee.addListener((!props.chatPublicId ? 'groupChatTabClicked' : 'chatTabClicked'),tabClicked)\n\n        !props.chatPublicId && messageElement.current.focus();\n\n        return function cleanup() {\n\n            forgetChat(props.chatId)\n\n            if (!props.chatPublicId) {\n                ee.removeListener('groupChatTabClicked',tabClicked);\n            } else {\n                ee.removeListener('chatTabClicked',tabClicked);\n                ee.removeListener('prefillMessage',prefillMessage);\n            }\n\n            groupChatSync.removeSubscriber(props.chatId, chatSynced);\n        };\n    },[]);\n\n    const addMessage = (e, doSearch) => {\n        if (e.keyCode == 13) {\n\n            axios.post(WWW_DIR_JAVASCRIPT  + \"groupchat/addmessage/\" + props.chatId,{msg: messageElement.current.value}).then(result => {\n                if (result.data.result.indexOf('status') !== -1) {\n                    groupChatSync.setFetchStatus(true);\n                }\n                groupChatSync.sync();\n            });\n\n            messageElement.current.value = '';\n\n            e.preventDefault();\n            e.stopPropagation();\n            return;\n        }\n    }\n\n    const inviteOperator = (e) => {\n        axios.get(WWW_DIR_JAVASCRIPT  + \"groupchat/inviteoperator/\" + props.chatId + \"/\" + e.id).then(result => {\n            groupChatSync.setFetchStatus(true);\n            groupChatSync.sync();\n            e.invited = true;\n            dispatch({\n                type: 'update',\n                value: {\n                    \"operators_invite\" : state.operators_invite\n                }\n            });\n        });\n    }\n\n    const cancelInvite = (e) => {\n        axios.get(WWW_DIR_JAVASCRIPT  + \"groupchat/cancelinvite/\" + props.chatId + \"/\" + e.id).then(result => {\n            groupChatSync.setFetchStatus(true);\n            groupChatSync.sync();\n            e.invited = false;\n            dispatch({\n                type: 'update',\n                value: {\n                    \"operators_invite\" : state.operators_invite\n                }\n            });\n        });\n    }\n\n    const { t, i18n } = useTranslation('group_chat');\n\n    if (state.error != '') {\n        return (<React.Fragment>\n            <div className=\"row\">\n                <div className=\"col-12\">\n                    <div className=\"alert alert-info\" role=\"alert\">\n                        {state.error}\n                    </div>\n                </div>\n            </div>\n        </React.Fragment>)\n    }\n\n    return (\n\n\n\n        <React.Fragment>\n            <div className={\"row group-chat-\"+(props.chatPublicId ? \"public\" : \"private\")}>\n\n                {props.chatPublicId && state.chat.type == 2 && <div className=\"col-12 pb-1\">\n\n                    {state.operators.map((operator, index) => (\n                        <button className=\"btn btn-sm fs12 btn-outline-secondary mb-1 me-1\">{props.userId != operator.user_id && <i title=\"Start chat with an operator directly\" onClick={(e) => startChatWithOperator(operator)} className=\"material-icons action-image\">chat</i>} {state.chat.user_id == operator.user_id && <i title=\"Group owner\" className=\"material-icons\">account_balance</i>} {operator.n_off_full}\n                                            {!operator.jtime && <span className=\"ms-1 badge badge-info fs11\">{t('operator.pending_join')}</span>} <i className=\"material-icons\">{operator.hide_online ? 'flash_off' : 'flash_on'}</i>{operator.last_activity_ago}</button>\n                    ))}\n\n                </div>}\n\n                <div className={(props.chatPublicId ? \"col-12\" : \"col-7\")}>\n                    <div className=\"message-block\">\n\n                        {state.has_more_messages && <a className=\"load-prev-btn\"  title=\"Load more...\" onClick={(e) => loadPrevious()}><i className=\"material-icons\">&#xE889;</i></a>}\n\n                        <div className=\"msgBlock msgBlock-admin msgBlock-group-admin\" ref={messagesElement}>\n                           {state.messages.map((message, index) => (\n                                <GroupChatMessage key={'msg_' + props.chatId + '_' + index} index={index} message={message} />\n                            ))}\n                        </div>\n                    </div>\n                    <div className=\"message-container-admin mt-2\">\n                        <textarea ref={messageElement} placeholder={t('message.enter_message')} onKeyDown={(e) => addMessage(e)} className=\"form-control form-control-sm form-group\" rows=\"2\"></textarea>\n                    </div>\n                </div>\n                {!props.chatPublicId && <div className=\"chat-main-right-column col-5\">\n                    <div role=\"tabpanel\">\n                        <ul className=\"nav nav-pills\" role=\"tablist\" ref={tabsContainer}>\n                            <li role=\"presentation\" className=\"nav-item\"><a className=\"nav-link active\" href={\"#group-chat-\"+props.chatId} aria-controls={\"#group-chat-\"+props.chatId} role=\"tab\" data-bs-toggle=\"tab\" title=\"Operators\"><i className=\"material-icons me-0\">face</i></a></li>\n                            <li className=\"nav-item\" role=\"presentation\"><a className=\"nav-link \" href={\"#group-chat-info-\"+props.chatId} aria-controls={\"#group-chat-info-\"+props.chatId} title=\"Information\" role=\"tab\" data-bs-toggle=\"tab\"><i className=\"material-icons me-0\">info_outline</i></a></li>\n                        </ul>\n                        <div className=\"tab-content\">\n                            <div role=\"tabpanel\" className=\"tab-pane active\" id={\"group-chat-\"+props.chatId}>\n\n                                <ul className=\"list-group list-group-flush border-0 mw-100 mx275\">\n                                    {state.operators.map((operator, index) => (\n                                        <li className=\"list-group-item ps-1 py-1\">{props.userId != operator.user_id && <i title=\"Start chat with an operator directly\" onClick={(e) => startChatWithOperator(operator)} className=\"material-icons action-image\">chat</i>} {state.chat.user_id == operator.user_id && <i title=\"Group owner\" className=\"material-icons\">account_balance</i>} {operator.n_off_full}<span className=\"float-end fs11\">\n                                            {!operator.jtime && <span className=\"badge badge-info fs11\">{t('operator.pending_join')}</span>} {operator.last_activity_ago} <i className=\"material-icons\">{operator.hide_online ? 'flash_off' : 'flash_on'}</i>\n                                        </span>\n                                        </li>\n                                    ))}\n                                </ul>\n                            </div>\n\n                            <div role=\"tabpanel\" className=\"tab-pane\" id={\"group-chat-info-\"+props.chatId}>\n\n                                {state.chat.type == 1 && <div>\n                                    <div className=\"row\">\n                                        <div className=\"col-9\">\n                                            <input ref={searchOperatorElement} onKeyUp={searchOpeartors} type=\"text\" placeholder={t('operator.search_tip')} className=\"form-control form-control-sm\" />\n                                        </div>\n                                        <div className=\"col-3\">\n                                            <div className=\"btn-group w-100\" role=\"group\" aria-label=\"Basic example\">\n                                                <button onClick={searchOpeartors} className=\"btn d-block btn-secondary btn-sm\"><span className=\"material-icons\">search</span></button>\n                                                <button disabled={state.operators_invite.length == 0} onClick={cancelSearch} className=\"btn d-block btn-secondary btn-sm\"><span className=\"material-icons\">delete</span></button>\n                                            </div>\n                                        </div>\n                                    </div>\n\n                                    <ul className=\"m-0 p-0 mt-2 mx275\">\n                                        {state.operators_invite.map((operator, index) => (\n                                            <li className=\"list-group-item p-2 fs13\" title={operator.id}>\n                                                {operator.name_official}\n                                                {!operator.member && !operator.invited && <button className=\"float-end btn btn-xs btn-secondary\" onClick={(e) => inviteOperator(operator)}>{t('operator.invite')}</button>}\n                                                {!operator.member && operator.invited && <button className=\"float-end btn btn-xs btn-warning\" onClick={(e) => cancelInvite(operator)}>{t('operator.cancel_invite')}</button>}\n                                                {operator.member && <button disabled=\"disabled\" className=\"float-end btn btn-xs btn-success\">{t('operator.already_member')}</button>}\n                                            </li>\n                                        ))}\n                                    </ul>\n                                    <hr/>\n                                </div>}\n\n                                <button className=\"btn btn-xs btn-danger\" title={t('operator.leave_group_tip')} onClick={(e) => leaveGroup()}>{t('operator.leave_group')}</button>\n                            </div>\n\n                        </div>\n                    </div>\n                </div>}\n\n                {props.chatPublicId && <div className=\"col-12\">\n\n                    <div className=\"pb-1\">\n                    {props.chatPublicId && state.chat.type == 2 && state.supervisors.length > 0 && state.supervisors.map((operator, index) => (\n                            <React.Fragment>\n                                {!operator.member && !operator.invited && <button className=\"btn btn-xs btn-secondary\" onClick={(e) => inviteOperator(operator)}>{operator.nick} | {t('operator.invite')}</button>}\n                            </React.Fragment>\n                        ))}\n                    </div>\n\n                    <div className=\"row\">\n                        <div className=\"col-9\">\n                            <input ref={searchOperatorElement} onKeyUp={searchOpeartors} type=\"text\" placeholder={t('operator.search_tip')} className=\"form-control form-control-sm\" />\n                        </div>\n                        <div className=\"col-3\">\n                            <div className=\"btn-group w-100\" role=\"group\" aria-label=\"Basic example\">\n                                <button onClick={searchOpeartors} className=\"btn d-block btn-secondary btn-sm\"><span className=\"material-icons\">search</span></button>\n                                <button disabled={state.operators_invite.length == 0} onClick={cancelSearch} className=\"btn d-block btn-secondary btn-sm\"><span className=\"material-icons\">delete</span></button>\n                            </div>\n                        </div>\n                    </div>\n\n                    <ul className=\"m-0 p-0 mt-2 mx275\">\n                        {state.operators_invite.map((operator, index) => (\n                            <li className=\"list-group-item p-2 fs13\" title={operator.id}>\n                                {operator.name_official}\n                                {!operator.member && !operator.invited && <button className=\"float-end btn btn-xs btn-secondary\" onClick={(e) => inviteOperator(operator)}>{t('operator.invite')}</button>}\n                                {!operator.member && operator.invited && <button className=\"float-end btn btn-xs btn-warning\" onClick={(e) => cancelInvite(operator)}>{t('operator.cancel_invite')}</button>}\n                                {operator.member && <button disabled=\"disabled\" className=\"float-end btn btn-xs btn-success\">{t('operator.already_member')}</button>}\n                            </li>\n                        ))}\n                    </ul>\n\n                </div>}\n\n            </div>\n        </React.Fragment>\n    );\n}\n\nexport default GroupChat","import { useEffect, useRef } from \"react\";\n\nfunction useInterval(callback, delay) {\n    const savedCallback = useRef();\n\n    // Remember the latest callback.\n    useEffect(() => {\n        savedCallback.current = callback;\n    }, [callback]);\n\n    // Set up the interval.\n    useEffect(() => {\n        function tick() {\n            savedCallback.current();\n        }\n        if (delay !== null) {\n            let id = setInterval(tick, delay);\n            return () => clearInterval(id);\n        }\n    }, [delay]);\n}\n\nexport default useInterval;"],"names":["GroupChatMessage","_ref","message","index","operatorChanged","parse","replace","domNode","attribs","cloneAttr","Object","assign","className","indexOf","onclick","name","React","domToReact","children","groupChatSync","_createClass","_groupChatSync","_classCallCheck","this","eventEmitter","EventEmitter","chatsSynchro","chatsSynchroMsg","timeoutSync","syncInProgress","fetchStatus","key","value","status","_this","axios","post","WWW_DIR_JAVASCRIPT","then","result","groupedData","data","forEach","chatData","chat_id","parts","split","message_id","join","result_status","lgsync","chatId","emitEvent","_this2","clearTimeout","length","setInterval","sync","cb","push","parseInt","addListener","startSync","splice","removeListener","reducer","state","action","type","count","_objectSpread","messages","lmsop","history","msg","unshift","Error","defaults","headers","common","confLH","csrf_token","props","messageElement","useRef","messagesElement","tabsContainer","searchOperatorElement","_useReducer","useReducer","operators","supervistors","operators_invite","chat","has_more_messages","old_message_id","last_message","error","last_message_id","_useReducer2","_slicedToArray","dispatch","startChatWithOperator","operator","ee","user_id","setUnreadSupportChat","whoisHot","tab","document","getElementById","hotSet","classList","contains","querySelector","remove","id","unread","playSoundMessage","lhinst","playNewMessageSound","useEffect","current","scrollTop","scrollHeight","chatPublicId","searchTimeout","searchOpeartors","setTimeout","get","escape","cancelSearch","chatSynced","e","content","msop","valueUpdate","subTabClicked","tabClicked","div","createElement","innerHTML","prepend","firstChild","addEventListener","localStorage","achat_id_array","achat_id","getItem","setItem","rememberChat","subTab","paramsStart","getAttribute","default_message","focus","String","addSubscriber","container","bsn","require","tabs","querySelectorAll","Array","prototype","call","element","Tab","supervisors","removeDialogTabGroup","$","response","elm","forceFocus","tabHot","offsetHeight","add","click","prefillMessage","forgetChat","removeSubscriber","inviteOperator","setFetchStatus","invited","cancelInvite","_useTranslation","useTranslation","t","i18n","role","map","userId","title","onClick","n_off_full","jtime","hide_online","last_activity_ago","has_messages","ref","placeholder","onKeyDown","keyCode","preventDefault","stopPropagation","addMessage","rows","href","onKeyUp","disabled","name_official","member","nick","callback","delay","savedCallback","clearInterval"],"sourceRoot":""}