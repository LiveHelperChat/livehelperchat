webpackJsonp([2],[,,function(t,i,e){function n(t){return e(s(t))}function s(t){return o[t]||function(){throw new Error("Cannot find module '"+t+"'.")}()}var o={"./lhc.speak.js":4};n.keys=function(){return Object.keys(o)},n.resolve=s,t.exports=n,n.id=2},,function(t){var i=function(){function t(t){this.recognizing=!1,this.startOnEnd=!1,this.final_transcript="",this.chat_id=t.chat_id,this.recognition=t.recognition,this.originText=""!=$("#CSChatMessage-"+this.chat_id).val()?$("#CSChatMessage-"+this.chat_id).val()+" ":""}return t.prototype.onstart=function(){$("#CSChatMessage-"+this.chat_id).addClass("admin-chat-mic"),$("#user-chat-status-"+this.chat_id).removeClass("icon-user").addClass("icon-mic"),$("#mic-chat-"+this.chat_id).addClass("icon-mic-recording").html(this.recognition.lang),$("#user-is-typing-"+this.chat_id).html("Speak now.").css("visibility","visible")},t.prototype.onend=function(){$("#user-chat-status-"+this.chat_id).addClass("icon-user").removeClass("icon-mic"),$("#CSChatMessage-"+this.chat_id).removeClass("admin-chat-mic"),$("#mic-chat-"+this.chat_id).removeClass("icon-mic-recording").html(""),$("#user-is-typing-"+this.chat_id).html(""),this.startOnEnd===!0&&(this.originText="",this.final_transcript="",this.startOnEnd=!1,this.recognition.start())},t.prototype.onerror=function(t){"no-speech"==t.error&&$("#user-is-typing-"+this.chat_id).html("No speech was detected.").css("visibility","visible"),"audio-capture"==t.error&&$("#user-is-typing-"+this.chat_id).html("No microphone was found.").css("visibility","visible"),"not-allowed"==t.error&&$("#user-is-typing-"+this.chat_id).html("Permission to use microphone was denied.").css("visibility","visible")},t.prototype.onresult=function(t){if(this.startOnEnd===!1){for(var i="",e=t.resultIndex;e<t.results.length;++e)t.results[e].isFinal?this.final_transcript+=t.results[e][0].transcript:i+=t.results[e][0].transcript;""!=i?$("#user-is-typing-"+this.chat_id).html(i).css("visibility","visible"):$("#user-is-typing-"+this.chat_id).html("").css("visibility","hidden"),$("#CSChatMessage-"+this.chat_id).val(this.originText+this.final_transcript+i).focus(),lhinst.operatorTypingCallback(this.chat_id)}},t}();t.exports=function(){function t(){"webkitSpeechRecognition"in window?(this.recognizing=!1,this.browserSupported=!0,this.final_transcript="",this.chat_id=!1,this.chatDialect=[]):(alert("Sorry but only chrome is supported"),this.browserSupported=!1)}return t.prototype.stopSpeech=function(){this.browserSupported===!0&&this.recognizing===!0&&(this.recognizing=!1,this.recognition.stop())},t.prototype.messageSend=function(){this.browserSupported===!0&&(this.recognition.callbackHandler.startOnEnd=!0,this.recognition.stop())},t.prototype.setChatDialect=function(t,i){this.chatDialect[t]=i},t.prototype.getChatDialectAndStart=function(){var t=this;$.getJSON(WWW_DIR_JAVASCRIPT+"speech/getchatdialect/"+this.chat_id,function(i){i.error===!1?(t.chatDialect[t.chat_id]=i.dialect,t.recognition.lang=t.chatDialect[t.chat_id],t.recognition.start()):alert(i.result)})},t.prototype.getDialect=function(t){$.get(WWW_DIR_JAVASCRIPT+"speech/getdialect/"+t.val(),function(t){$("#id_select_dialect").replaceWith(t)})},t.prototype.setChatLanguageRecognition=function(t){return $.postJSON(WWW_DIR_JAVASCRIPT+"speech/setchatspeechlanguage/"+t.chat_id,{select_language:$("#id_select_language").val(),select_dialect:$("#id_select_dialect").val()},function(i){"false"==i.error&&(t.lhinst.speechHandler!==!1&&t.lhinst.speechHandler.setChatDialect(t.chat_id,i.dialect),$("#myModal").modal("hide"))}),!1},t.prototype.listen=function(t){if(this.browserSupported===!0)if(this.chat_id!==!1&&this.chat_id!=t.chat_id&&this.stopSpeech(),this.chat_id=t.chat_id,this.recognizing===!1){this.recognition=new webkitSpeechRecognition,this.recognition.continuous=!0,this.recognition.interimResults=!0;var e=new i({chat_id:this.chat_id,recognition:this.recognition});this.recognition.onresult=function(t){e.onresult(t)},this.recognition.onstart=function(){e.onstart()},this.recognition.onend=function(){e.onend()},this.recognition.onerror=function(t){e.onerror(t)},this.recognition.callbackHandler=e,this.recognizing=!0,void 0!=this.chatDialect[this.chat_id]?(this.recognition.lang=this.chatDialect[this.chat_id],this.recognition.start()):this.getChatDialectAndStart()}else this.stopSpeech()},new t}()}]);