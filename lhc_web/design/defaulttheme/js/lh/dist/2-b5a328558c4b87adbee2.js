webpackJsonp([2],[,,function(e,t,i){function r(e){return i(a(e))}function a(e){return o[e]||function(){throw new Error("Cannot find module '"+e+"'.")}()}var o={"./lhc.speak.js":4,"./lhc.translation.js":5};r.keys=function(){return Object.keys(o)},r.resolve=a,e.exports=r,r.id=2},,function(e){var t=function(){function e(e){this.recognizing=!1,this.startOnEnd=!1,this.final_transcript="",this.chat_id=e.chat_id,this.recognition=e.recognition,this.originText=""!=$("#CSChatMessage-"+this.chat_id).val()?$("#CSChatMessage-"+this.chat_id).val()+" ":""}return e.prototype.onstart=function(){$("#CSChatMessage-"+this.chat_id).addClass("admin-chat-mic"),$("#user-chat-status-"+this.chat_id).removeClass("icon-user").addClass("icon-mic"),$("#mic-chat-"+this.chat_id).addClass("icon-mic-recording").find(".mic-lang").text(this.recognition.lang),$("#user-is-typing-"+this.chat_id).html("Speak now.").css("visibility","visible")},e.prototype.onend=function(){$("#user-chat-status-"+this.chat_id).addClass("icon-user").removeClass("icon-mic"),$("#CSChatMessage-"+this.chat_id).removeClass("admin-chat-mic"),$("#mic-chat-"+this.chat_id).removeClass("icon-mic-recording").find(".mic-lang").text(""),$("#user-is-typing-"+this.chat_id).html(""),this.startOnEnd===!0&&(this.originText="",this.final_transcript="",this.startOnEnd=!1,this.recognition.start())},e.prototype.onerror=function(e){"no-speech"==e.error&&$("#user-is-typing-"+this.chat_id).html("No speech was detected.").css("visibility","visible"),"audio-capture"==e.error&&$("#user-is-typing-"+this.chat_id).html("No microphone was found.").css("visibility","visible"),"not-allowed"==e.error&&$("#user-is-typing-"+this.chat_id).html("Permission to use microphone was denied.").css("visibility","visible")},e.prototype.onresult=function(e){if(this.startOnEnd===!1){for(var t="",i=e.resultIndex;i<e.results.length;++i)e.results[i].isFinal?this.final_transcript+=e.results[i][0].transcript:t+=e.results[i][0].transcript;""!=t?$("#user-is-typing-"+this.chat_id).html(t).css("visibility","visible"):$("#user-is-typing-"+this.chat_id).html("").css("visibility","hidden"),$("#CSChatMessage-"+this.chat_id).val(this.originText+this.final_transcript+t).focus(),lhinst.operatorTypingCallback(this.chat_id)}},e}();e.exports=function(){function e(){"webkitSpeechRecognition"in window?(this.recognizing=!1,this.browserSupported=!0,this.final_transcript="",this.chat_id=!1,this.chatDialect=[]):(alert("Sorry but only chrome is supported"),this.browserSupported=!1)}return e.prototype.stopSpeech=function(){this.browserSupported===!0&&this.recognizing===!0&&(this.recognizing=!1,this.recognition.stop())},e.prototype.messageSend=function(){this.browserSupported===!0&&(this.recognition.callbackHandler.startOnEnd=!0,this.recognition.stop())},e.prototype.setChatDialect=function(e,t){this.chatDialect[e]=t},e.prototype.getChatDialectAndStart=function(){var e=this;$.getJSON(WWW_DIR_JAVASCRIPT+"speech/getchatdialect/"+this.chat_id,function(t){t.error===!1?(e.chatDialect[e.chat_id]=t.dialect,e.recognition.lang=e.chatDialect[e.chat_id],e.recognition.start()):alert(t.result)})},e.prototype.getDialect=function(e){$.get(WWW_DIR_JAVASCRIPT+"speech/getdialect/"+e.val(),function(e){$("#id_select_dialect").replaceWith(e)})},e.prototype.setChatLanguageRecognition=function(e){return $.postJSON(WWW_DIR_JAVASCRIPT+"speech/setchatspeechlanguage/"+e.chat_id,{select_language:$("#id_select_language").val(),select_dialect:$("#id_select_dialect").val()},function(t){"false"==t.error&&(e.lhinst.speechHandler!==!1&&e.lhinst.speechHandler.setChatDialect(e.chat_id,t.dialect),$("#myModal").modal("hide"))}),!1},e.prototype.listen=function(e){if(this.browserSupported===!0)if(this.chat_id!==!1&&this.chat_id!=e.chat_id&&this.stopSpeech(),this.chat_id=e.chat_id,this.recognizing===!1){this.recognition=new webkitSpeechRecognition,this.recognition.continuous=!0,this.recognition.interimResults=!0;var i=new t({chat_id:this.chat_id,recognition:this.recognition});this.recognition.onresult=function(e){i.onresult(e)},this.recognition.onstart=function(){i.onstart()},this.recognition.onend=function(){i.onend()},this.recognition.onerror=function(e){i.onerror(e)},this.recognition.callbackHandler=i,this.recognizing=!0,void 0!=this.chatDialect[this.chat_id]?(this.recognition.lang=this.chatDialect[this.chat_id],this.recognition.start()):this.getChatDialectAndStart(),lhinst.speechHandler===!1&&(lhinst.speechHandler=this)}else this.stopSpeech(),lhinst.speechHandler=!1},new e}()},function(e){e.exports=function(){function e(){}return e.prototype.startTranslation=function(e){e.btn.prop("disabled","disabled"),e.btn.button("loading"),jQuery.getJSON(WWW_DIR_JAVASCRIPT+"translation/starttranslation/"+e.chat_id+"/"+jQuery("#id_chat_locale_"+e.chat_id).val()+"/"+jQuery("#id_chat_locale_to_"+e.chat_id).val(),function(t){jQuery("#main-user-info-translation-"+e.chat_id+" > div.alert").remove(),jQuery("#main-user-info-translation-"+e.chat_id).prepend(t.result),t.error===!1?t.translation_status===!0?(jQuery("#id_chat_locale_"+e.chat_id+' option[value="'+t.chat_locale+'"]').prop("selected",!0),jQuery("#id_chat_locale_to_"+e.chat_id+' option[value="'+t.chat_locale_to+'"]').prop("selected",!0),jQuery("#messagesBlock-"+e.chat_id).html(""),lhinst.updateChatLastMessageID(e.chat_id,0),lhinst.syncadmincall(),jQuery(".translate-button-"+e.chat_id).addClass("btn-success")):(jQuery(".translate-button-"+e.chat_id).removeClass("btn-success"),jQuery("#id_chat_locale_"+e.chat_id+' option[value="0"]').prop("selected",!0),jQuery("#id_chat_locale_to_"+e.chat_id+' option[value="0"]').prop("selected",!0)):jQuery("#chat-tab-items-"+e.chat_id+' a[href="#main-user-info-translation-'+e.chat_id+'"]').tab("show"),e.btn.button("reset"),e.btn.prop("disabled","")})},new e}()}]);