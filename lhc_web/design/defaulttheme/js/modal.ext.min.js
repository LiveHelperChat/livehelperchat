window.lhcHelperfunctions.eventEmitter.addListener("modal_ext.init",(function(e,t,a){if(void 0===e.cmd||"close"!=e.cmd)setTimeout((function(){if(null===document.querySelector(".modal-backdrop")){var t=document.getElementById("root"),r=document.createElement("div");r.id="modal_ext-modal";var n=function(){var e=window.parent.LHCChatOptions;argumentsQuery=new Array;var t="";if(void 0!==e){if(void 0!==e.attr&&e.attr.length>0)for(var r in e.attr)void 0!==e.attr[r]&&void 0!==e.attr[r].type&&argumentsQuery.push("name[]="+encodeURIComponent(e.attr[r].name)+"&encattr[]="+(void 0!==e.attr[r].encrypted&&1==e.attr[r].encrypted?"t":"f")+"&value[]="+encodeURIComponent(e.attr[r].value)+"&type[]="+encodeURIComponent(e.attr[r].type)+"&size[]="+encodeURIComponent(e.attr[r].size)+"&req[]="+(void 0!==e.attr[r].req&&1==e.attr[r].req?"t":"f")+"&sh[]="+(void 0===e.attr[r].show||"on"!=e.attr[r].show&&"off"!=e.attr[r].show?"b":e.attr[r].show));if(void 0!==e.attr_prefill&&e.attr_prefill.length>0)for(var r in e.attr_prefill)void 0!==e.attr_prefill[r]&&void 0!==e.attr_prefill[r].name&&(argumentsQuery.push("prefill["+e.attr_prefill[r].name+"]="+encodeURIComponent(e.attr_prefill[r].value)),void 0!==e.attr_prefill[r].hidden&&argumentsQuery.push("hattr[]="+encodeURIComponent(e.attr_prefill[r].name)));if(void 0!==e.attr_prefill_admin&&e.attr_prefill_admin.length>0)for(var r in e.attr_prefill_admin)void 0!==e.attr_prefill_admin[r]&&(argumentsQuery.push("value_items_admin["+e.attr_prefill_admin[r].index+"]="+encodeURIComponent(e.attr_prefill_admin[r].value)),void 0!==e.attr_prefill_admin[r].hidden&&argumentsQuery.push("via_hidden["+e.attr_prefill_admin[r].index+"]="+encodeURIComponent(1==e.attr_prefill_admin[r].hidden?"t":"f")),void 0!==e.attr_prefill_admin[r].encrypted&&argumentsQuery.push("via_encrypted["+e.attr_prefill_admin[r].index+"]="+encodeURIComponent(1==e.attr_prefill_admin[r].encrypted?"t":"f")));argumentsQuery.length>0&&(t="&"+argumentsQuery.join("&"))}var n=a(),d=[],i=n.chatwidget.get("jsVars");return Object.keys(i).forEach((e=>{d.push("jsvar["+e+"]="+encodeURIComponent(i[e]))})),d.length>0&&(t=t+"&"+d.join("&")),n.chatwidget.hasIn(["chatData","id"])&&(t=t+"&chat_id="+n.chatwidget.getIn(["chatData","id"])+"&hash="+n.chatwidget.getIn(["chatData","hash"])),t}();r.innerHTML='<div class="fade modal-backdrop show"></div><div role="dialog" id="dialog-content" aria-modal="true" class="fade modal show d-block" tabindex="-1">\n    <div class="modal-dialog modal-lg h-100 d-flex m-0 p-1">\n        <div class="modal-content">\n            <div class="modal-body p-0" id="modal_ext-body"><iframe allowtransparency="true" src='+e.url+"?"+n+' frameBorder="0" class="flex-grow-1 position-relative iframe-modal"/>\n            </div>\n        </div>\n    </div>\n</div>',t.prepend(r)}}),void 0!==e.delay?1e3*parseInt(e.delay):0);else{var r=document.getElementById("modal_ext-modal");r.parentNode.removeChild(r)}}));