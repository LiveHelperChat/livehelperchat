{"version":3,"sources":["7860b2322693217000e499b70447fa0c.js"],"names":["services","factory","t","e","this","loadOnlineUsers","n","i","defer","get","WWW_DIR_JAVASCRIPT","timeout","department_dpgroups","length","join","department","max_rows","country","time_on_site","encodeURIComponent","then","resolve","data","promise","setLocalSettings","o","post","attr","val","reject","status","deleteOnlineUser","user_id","confLH","csrf_token","error_url","document","location","lhcAppControllers","controller","r","s","a","l","onlineusers","onlineusers_tt","onlineusersPreviousID","onlineusersGrouped","updateTimeout","userTimeout","maxRows","predicate","reverse","wasInitiated","online_connected","attrf_key_1","attrf_val_1","attrf_key_2","attrf_val_2","attrf_key_3","attrf_val_3","attrf_key_4","attrf_val_4","attrf_key_5","attrf_val_5","forbiddenVisitors","soundEnabled","notificationEnabled","lastSyncSkipped","_","forEach","getElementById","MutationObserver","classList","contains","updateList","observe","attributes","attributeFilter","childList","characterData","groupByField","groupBy","sort","label","id","ou","push","lhinst","disableSync","list","tt","ee","emitEvent","angular","indexOf","Modernizr","audio","Audio","src","ogg","WWW_DIR_JAVASCRIPT_FILES","mp3","load","setTimeout","play","window","webkitNotifications","Notification","checkPermission","createNotification","WWW_DIR_JAVASCRIPT_FILES_NOTIFICATION","ip","user_country_name","page_title","referrer","onclick","cancel","show","permission","icon","body","close","$watch","changeUserSettingsIndifferent","departmentChanged","productChanged","showOnlineUserInfo","lhc","revealModal","url","previewChat","chat_id","can_view_chat","sendMessage","deleteUser","confirm","splice","disableNewUserBNotif","changeUserSettings","showConnected","disableNewUserSound","initController","onlineAttributeFilter","$on"],"mappings":"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","file":"7860b2322693217000e499b70447fa0c.js","sourcesContent":["services.factory(\"OnlineUsersFactory\",[\"$http\",\"$q\",function(t,e){return this.loadOnlineUsers=function(n){var i=e.defer();return t.get(WWW_DIR_JAVASCRIPT+\"chat/onlineusers/(method)/ajax/(timeout)/\"+n.timeout+(n.department_dpgroups.length>0?\"/(department_dpgroups)/\"+n.department_dpgroups.join(\"/\"):\"\")+(n.department.length>0?\"/(department)/\"+n.department.join(\"/\"):\"\")+(n.max_rows>0?\"/(maxrows)/\"+n.max_rows:\"\")+(\"\"!=n.country?\"/(country)/\"+n.country:\"\")+(\"\"!=n.time_on_site?\"/(timeonsite)/\"+encodeURIComponent(n.time_on_site):\"\")).then((function(t){i.resolve(t.data)})),i.promise},this.setLocalSettings=function(n,i){var o=e.defer();return t.post(WWW_DIR_JAVASCRIPT+\"front/settings\",{attr:n,val:i}).then((function(t){o.resolve(t.data)}),(function(t){o.reject(void 0!==t.status?\"[\"+t.status+\"]\":\"[0]\")})),o.promise},this.deleteOnlineUser=function(n){var i=e.defer();return t.post(WWW_DIR_JAVASCRIPT+\"chat/onlineusers/(deletevisitor)/\"+n.user_id+\"/(csfr)/\"+confLH.csrf_token).then((function(t){void 0!==t.error_url?document.location=t.data.error_url:i.resolve(t.data)})),i.promise},this}]),lhcAppControllers.controller(\"OnlineCtrl\",[\"$scope\",\"$http\",\"$location\",\"$rootScope\",\"$log\",\"$interval\",\"$window\",\"OnlineUsersFactory\",function(t,e,n,i,o,r,s,a){var l;this.onlineusers=[],this.onlineusers_tt=0,this.onlineusersPreviousID=[],t.onlineusersGrouped=[],this.updateTimeout=\"10\",this.userTimeout=\"3600\",this.maxRows=\"50\",this.department=[],this.department_dpgroups=[],this.country=\"none\",this.predicate=\"last_visit\",this.time_on_site=\"\",this.reverse=!0,this.wasInitiated=!1,this.online_connected=!1,this.attrf_key_1=\"\",this.attrf_val_1=\"\",this.attrf_key_2=\"\",this.attrf_val_2=\"\",this.attrf_key_3=\"\",this.attrf_val_3=\"\",this.attrf_key_4=\"\",this.attrf_val_4=\"\",this.attrf_key_5=\"\",this.attrf_val_5=\"\",this.forbiddenVisitors=!1,this.soundEnabled=!1,this.notificationEnabled=!1,this.lastSyncSkipped=!1;var _=this;!0!==_.forbiddenVisitors&&[\"onlineusers\",\"widget-onvisitors\",\"map\",\"dashboard\"].forEach((function(t){var e=document.getElementById(t);null!==e&&new MutationObserver((function(t){e.classList.contains(\"active\")&&1==_.lastSyncSkipped&&_.updateList()})).observe(e,{attributes:!0,attributeFilter:[\"class\"],childList:!1,characterData:!1})})),t.groupByField=\"none\",t.groupBy=function(e){var n,i;t.onlineusersGrouped=[],n=_.onlineusers,i=e,n.sort((function(t,e){return t[i]<=e[i]?-1:1}));for(var o=\"_INVALID_GROUP_VALUE_\",r=0;r<_.onlineusers.length;r++){var s=_.onlineusers[r];if(s[e]!==o){var a={label:s[e],id:r,ou:[]};o=a.label,t.onlineusersGrouped.push(a)}a.ou.push(s)}},this.updateList=function(){if(1!=lhinst.disableSync&&1!=_.forbiddenVisitors){var e=!1,n=document.getElementById(\"onlineusers\");if(null!==n&&(e=n.classList.contains(\"active\")),0==e){var i=document.getElementById(\"map\");null!==i&&(e=i.classList.contains(\"active\"))}if(0==e)if(null!==document.getElementById(\"widget-onvisitors-body\")){var o=document.getElementById(\"dashboard\");null!==o&&o.classList.contains(\"active\")&&(e=!0)}!1!==e?(_.lastSyncSkipped=!1,a.loadOnlineUsers({department_dpgroups:_.department_dpgroups,timeout:_.userTimeout,time_on_site:_.time_on_site,department:_.department,country:_.country,max_rows:_.maxRows}).then((function(e){if(_.onlineusers=e.list,_.onlineusers_tt=e.tt,\"none\"!=t.groupByField?t.groupBy(t.groupByField):(t.onlineusersGrouped=[],t.onlineusersGrouped.push({label:\"\",id:0,ou:_.onlineusers})),ee.emitEvent(\"chatAdminSyncOnlineVisitors\",[e.list]),_.notificationEnabled||_.soundEnabled){var n=!1,i=[];if(angular.forEach(_.onlineusers,(function(t,e){var o=!0;-1==_.onlineusersPreviousID.indexOf(t.id)&&(o=!1,_.onlineusersPreviousID.push(t.id)),1==_.wasInitiated&&0==o&&(n=!0,i.push(t))})),1==n){if(_.soundEnabled&&Modernizr.audio){var o=new Audio;o.src=Modernizr.audio.ogg?WWW_DIR_JAVASCRIPT_FILES+\"/new_visitor.ogg\":Modernizr.audio.mp3?WWW_DIR_JAVASCRIPT_FILES+\"/new_visitor.mp3\":WWW_DIR_JAVASCRIPT_FILES+\"/new_visitor.wav\",o.load(),setTimeout((function(){o.play()}),500)}_.notificationEnabled&&(window.webkitNotifications||window.Notification)&&angular.forEach(i,(function(t,e){if(window.webkitNotifications)0==window.webkitNotifications.checkPermission()&&((n=window.webkitNotifications.createNotification(WWW_DIR_JAVASCRIPT_FILES_NOTIFICATION+\"/notification.png\",t.ip+(\"\"!=t.user_country_name?\", \"+t.user_country_name:\"\"),(\"\"!=t.page_title?t.page_title+\"\\n-----\\n\":\"\")+(\"\"!=t.referrer?t.referrer+\"\\n-----\\n\":\"\"))).onclick=function(){n.cancel()},n.show(),setTimeout((function(){n.cancel()}),15e3));else if(window.Notification){var n;if(\"granted\"==window.Notification.permission)(n=new Notification(t.ip+(\"\"!=t.user_country_name?\", \"+t.user_country_name:\"\"),{icon:WWW_DIR_JAVASCRIPT_FILES_NOTIFICATION+\"/notification.png\",body:(\"\"!=t.page_title?t.page_title+\"\\n-----\\n\":\"\")+(\"\"!=t.referrer?t.referrer+\"\\n-----\\n\":\"\")})).onclick=function(){n.close()},setTimeout((function(){n.close()}),15e3)}}))}_.wasInitiated=!0,_.onlineusersPreviousID.length>100&&(_.wasInitiated=!1,_.onlineusersPreviousID=[])}}))):_.lastSyncSkipped=!0}},l=r((function(){0==_.forbiddenVisitors?_.updateList():r.cancel(l)}),1e3*this.updateTimeout),t.$watch(\"online.updateTimeout\",(function(t,e){t!=e&&(r.cancel(l),l=r((function(){_.updateList()}),1e3*t),lhinst.changeUserSettingsIndifferent(\"oupdate_timeout\",t))})),t.$watch(\"online.userTimeout\",(function(t,e){t!=e&&lhinst.changeUserSettingsIndifferent(\"ouser_timeout\",t)})),t.$watch(\"online.country\",(function(t,e){t!=e&&lhinst.changeUserSettingsIndifferent(\"ocountry\",t)})),t.$watch(\"online.time_on_site\",(function(t,e){t!=e&&lhinst.changeUserSettingsIndifferent(\"otime_on_site\",\"\"==t?\"none\":t)})),t.$watch(\"online.maxRows\",(function(t,e){t!=e&&lhinst.changeUserSettingsIndifferent(\"omax_rows\",t)})),t.$watch(\"online.attrf_key_1\",(function(t,e){t!=e&&lhinst.changeUserSettingsIndifferent(\"oattrf_key_1\",t)})),t.$watch(\"online.attrf_val_1\",(function(t,e){t!=e&&lhinst.changeUserSettingsIndifferent(\"oattrf_val_1\",t)})),t.$watch(\"online.attrf_key_2\",(function(t,e){t!=e&&lhinst.changeUserSettingsIndifferent(\"oattrf_key_2\",t)})),t.$watch(\"online.attrf_val_2\",(function(t,e){t!=e&&lhinst.changeUserSettingsIndifferent(\"oattrf_val_2\",t)})),t.$watch(\"online.attrf_key_3\",(function(t,e){t!=e&&lhinst.changeUserSettingsIndifferent(\"oattrf_key_3\",t)})),t.$watch(\"online.attrf_val_3\",(function(t,e){t!=e&&lhinst.changeUserSettingsIndifferent(\"oattrf_val_3\",t)})),t.$watch(\"online.attrf_key_4\",(function(t,e){t!=e&&lhinst.changeUserSettingsIndifferent(\"oattrf_key_4\",t)})),t.$watch(\"online.attrf_val_4\",(function(t,e){t!=e&&lhinst.changeUserSettingsIndifferent(\"oattrf_val_4\",t)})),t.$watch(\"online.attrf_key_5\",(function(t,e){t!=e&&lhinst.changeUserSettingsIndifferent(\"oattrf_key_5\",t)})),t.$watch(\"online.attrf_val_5\",(function(t,e){t!=e&&lhinst.changeUserSettingsIndifferent(\"oattrf_val_5\",t)})),this.departmentChanged=function(t){a.setLocalSettings(t+\"_online\",this[t])},this.productChanged=function(t){a.setLocalSettings(t+\"_online\",this[t])},t.$watch(\"groupByField\",(function(t,e){t!=e&&lhinst.changeUserSettingsIndifferent(\"ogroup_by\",t)})),t.$watch(\"online.userTimeout + online.department + online.department_dpgroups + online.maxRows + groupByField + online.country + online.time_on_site + online.attrf_key_1 + online.attrf_val_1 + online.attrf_key_2 + online.attrf_val_2 + online.attrf_key_3 + online.attrf_val_3 + online.attrf_key_4 + online.attrf_val_4 + online.attrf_key_5 + online.attrf_val_5\",(function(t,e){setTimeout((function(){_.updateList()}),500)})),this.showOnlineUserInfo=function(t){lhc.revealModal({url:WWW_DIR_JAVASCRIPT+\"chat/getonlineuserinfo/\"+t})},this.previewChat=function(t){t.chat_id>0&&1==t.can_view_chat&&lhc.revealModal({url:WWW_DIR_JAVASCRIPT+\"chat/previewchat/\"+t.chat_id})},this.sendMessage=function(t){lhc.revealModal({url:WWW_DIR_JAVASCRIPT+\"chat/sendnotice/\"+t})},this.deleteUser=function(t,e){confirm(e)&&a.deleteOnlineUser({user_id:t.id}).then((function(e){_.onlineusers.splice(_.onlineusers.indexOf(t),1)}))},this.disableNewUserBNotif=function(){_.notificationEnabled=!_.notificationEnabled,lhinst.changeUserSettings(\"new_user_bn\",1==_.notificationEnabled?1:0)},this.showConnected=function(){_.online_connected=!_.online_connected,lhinst.changeUserSettings(\"online_connected\",1==_.online_connected?1:0)},this.disableNewUserSound=function(){_.soundEnabled=!_.soundEnabled,lhinst.changeUserSettings(\"new_user_sound\",1==_.soundEnabled?1:0)},this.initController=function(){s.onlineAttributeFilter&&(this.attrf_key_1=s.onlineAttributeFilter.attrf_key_1,this.attrf_val_1=s.onlineAttributeFilter.attrf_val_1,this.attrf_key_2=s.onlineAttributeFilter.attrf_key_2,this.attrf_val_2=s.onlineAttributeFilter.attrf_val_2,this.attrf_key_3=s.onlineAttributeFilter.attrf_key_3,this.attrf_val_3=s.onlineAttributeFilter.attrf_val_3,this.attrf_key_4=s.onlineAttributeFilter.attrf_key_4,this.attrf_val_4=s.onlineAttributeFilter.attrf_val_4,this.attrf_key_5=s.onlineAttributeFilter.attrf_key_5,this.attrf_val_5=s.onlineAttributeFilter.attrf_val_5)},t.$on(\"$destroy\",(function(){r.cancel(l)}))}]);\n"]}