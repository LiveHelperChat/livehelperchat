import{n as t,s as n,z as e,r as o,A as s}from"./index.DKABnuqJ.js";const r=[];function c(e,o=t){let s;const c=new Set;function a(t){if(n(e,t)&&(e=t,s)){const t=!r.length;for(const t of c)t[1](),r.push(t,e);if(t){for(let t=0;t<r.length;t+=2)r[t][0](r[t+1]);r.length=0}}}function i(t){a(t(e))}return{set:a,update:i,subscribe:function(n,r=t){const l=[n,r];return c.add(l),1===c.size&&(s=o(a,i)||t),n(e),()=>{c.delete(l),0===c.size&&s&&(s(),s=null)}}}}function a(n,r,a){const i=!Array.isArray(n),l=i?[n]:n;if(!l.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const u=r.length<2;return f=(n,c)=>{let a=!1;const f=[];let p=0,d=t;const h=()=>{if(p)return;d();const e=r(i?f[0]:f,n,c);u?n(e):d=s(e)?e:t},g=l.map(((t,n)=>e(t,(t=>{f[n]=t,p&=~(1<<n),a&&h()}),(()=>{p|=1<<n}))));return a=!0,h(),function(){o(g),d(),a=!1}},{subscribe:c(a,f).subscribe};var f}function i(t){const n=c({});let e=!1;return{t:a(n,(t=>(n,e={})=>function(t,n,e){if(!n)throw new Error("no key provided to $t()");let o=t[n];return o?(Object.keys(e).map((t=>{const n=new RegExp(`{{${t}}}`,"g");o=o.replace(n,e[t])})),o):n}(t,n,e))),translations:n,initTranslations:async function(){if(!e)try{const o=await fetch(WWW_DIR_JAVASCRIPT+"restapi/lang/"+t+"/v13",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json","X-CSRFToken":confLH.csrf_token}}),s=await o.json();n.set(s),e=!0}catch(n){console.log(`Translations for scope "${t}" could not be loaded!`)}}}}export{i as c,c as w};
//# sourceMappingURL=createI18n.dbi3yoQO.js.map
