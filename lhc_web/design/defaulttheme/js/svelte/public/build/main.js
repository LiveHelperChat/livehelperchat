import{A as t,$ as e,a3 as a,a4 as i,a5 as n,a6 as s,a7 as o,a8 as r,a9 as l,aa as c,ab as d,ac as _,ad as u,ae as g,e as p,C as h,a1 as m,W as v,af as f,ag as b,t as w,a2 as y,ah as x,b as C,f as j,n as k,X as L,o as W,k as S,j as A,m as E,q as I,r as T,G as D,H as $,h as R,g as P,u as O,v as N,K as H,F as M,I as V,z as B,B as G,J,D as q,E as Q,O as F,N as U,ai as K,aj as z,L as X,V as Y,x as Z,y as tt,T as et,P as at,U as it,ak as nt,al as st,am as ot,w as rt,Q as lt,an as ct,ao as dt}from"./custom-element.D-YWh2og.js";import{e as _t,s as ut,t as gt,c as pt,b as ht,a as mt}from"./i18n.IpqkmuO5.js";import{l as vt,W as ft,L as bt}from"./onlinevisitors.Cb0P1cN3.js";import{b as wt}from"./select.B5Dt1AnC.js";import"./createI18n.EohZDCQy.js";function yt(p,h,m=!1,v=!1,f=!1){var b=p,w="";t((()=>{var t=i;if(w!==(w=h()??"")){if(null!==t.nodes&&(n(t.nodes.start,t.nodes.end),t.nodes=null),""!==w){if(e){s.data;for(var p=a(),f=p;null!==p&&(p.nodeType!==o||""!==p.data);)f=p,p=r(p);if(null===p)throw l(),c;return d(s,f),void(b=_(p))}var y=w+"";m?y=`<svg>${y}</svg>`:v&&(y=`<math>${y}</math>`);var x=u(y);if((m||v)&&(x=g(x)),d(g(x),x.lastChild),m||v)for(;g(x);)b.before(g(x));else b.before(x)}}else e&&a()}))}function xt(t,e,a){var i=b(t,e);i&&i.set&&(t[e]=a,w((()=>{t[e]=null})))}function Ct(t,e){return t===e||t?.[x]===e}function jt(t,e,a,i=a){e.addEventListener("input",(()=>{i(e[t])})),m((()=>{var n=a();if(e[t]!==n)if(null==n){var s=e[t];i(s)}else e[t]=n+""}))}function kt(t,e){j(e,!1);const a=()=>k(_t,"$lhcList",i),[i,n]=$(),s=E(),o=E(),r=E(),l=E(),c=E(),d=E();function _(){let t=document.getElementById("menu-rmtoggle");t&&(a().rmtoggle?t.classList.add("hide"):t.classList.remove("hide")),t=document.getElementById("wrapper"),t&&(a().lmtoggle?t.classList.add("toggled"):t.classList.remove("toggled"))}function u(t){if(!document.getElementById(t))return;let e=document.getElementById(t).getElementsByTagName("i")[0];!0===a().toggleWidgetData[t]?(e.classList.remove("chat-closed"),e.classList.add("chat-active")):(e.classList.remove("chat-active"),e.classList.add("chat-closed"))}window.$_LHC_API={};let g={timeoutActivity:null,timeoutActivityTime:300,blockSync:!1,timeoutControl:null,setTimeoutEnabled:!0,isListLoaded:!1,lastd_activity:Math.round((new Date).getTime()/1e3),lhcListRequestInProgress:!1,lhcSettingUpdateProgress:[],lhcSettingAllSelected:!1,channel:null,abortController:new AbortController};lhinst.channel=g.channel=new BroadcastChannel("lhc_dashboard"),"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",(function(t){"lhc_open_chat"===t.data.action?J(t.data.chat_id):"lhc_open_url"===t.data.action&&t.data.url&&(document.location=t.data.url)})),g.channel.addEventListener("message",(function(t){if(t.isTrusted&&t.data.action){if("went_active"===t.data.action)return jQuery("#myModal").modal("hide"),void m();var e=jQuery("#tabs");t.data.args.chat_id&&-1!==lhinst.chatsSynchronising.indexOf(t.data.args.chat_id)?"close_chat"===t.data.action?e.length>0&&lhinst.removeDialogTab(t.data.args.chat_id,e,!0):"update_chat"===t.data.action||"startbackground_chat"===t.data.action?e.length>0&&lhinst.updateVoteStatus(t.data.args.chat_id,!0):"reload_chat"===t.data.action&&(lhinst.addOpenTrace("channel_message_reload"),e.length>0&&lhinst.reloadTab(t.data.args.chat_id,e,t.data.args.nick,!0)):"startbackground_chat"===t.data.action?(lhinst.addOpenTrace("channel_message_open"),e.length>0&&lhinst.startChatBackground(t.data.args.chat_id,e,t.data.args.nick)||ee.emitEvent("chatTabPreload",[t.data.args.chat_id,{focus:!1}])):"close_chat"===t.data.action?ee.emitEvent("removeSynchroChat",[parseInt(t.data.args.chat_id)]):t.data.args.mail_id&&"close_mail"==t.data.action&&lhinst.removeDialogTabMail(t.data.args.mail_id,jQuery("#tabs"),!0,!0)}})),ee.addListener("svelteWentActive",(function(){jQuery("#myModal").modal("hide"),m()})),ee.addListener("angularStartChatbyId",(function(t){lhinst.addOpenTrace("view_clicked"),J(t)})),ee.addListener("svelteOpenChat",(function(t){lhinst.addOpenTrace("click"),J(t,a().isCTRLPressed)})),ee.addListener("svelteOpenMail",(function(t,e){lhinst.startMailChat(t,jQuery("#tabs"),O(e,10),a().isCTRLPressed)})),ee.addListener("svelteAction",(function(t){N(t)})),ee.addListener("svelteDebug",(function(){console.log(a()),console.log(g)})),ee.addListener("angularLoadChatList",(function(){g.isListLoaded=!1,g.lhcListRequestInProgress=!1,G()})),ee.addListener("svelteTestNotification",(function(t){vt.getNotificationsData(t).then((function(t){t.forEach((function(t){lhinst.playSoundNewAction(t.last_id_identifier,parseInt(t.last_id),t.nick?t.nick:"Live Help",t.msg?t.msg:confLH.transLation.new_chat,t.nt)}))}))})),ee.addListener("svelteOptionsPanelLoaded",(function(t){if(void 0!==a().optionsPanels[t]){const e=a().optionsPanels[t];e.custom_filters&&Array.isArray(e.custom_filters)&&e.custom_filters.forEach((function(e){const i=t+"_"+e.field;L(_t,h(a)[i]="false"!=vt.restoreLocalSetting(i,"false",!1),h(a))}))}})),ee.addListener("svelteResetTimeoutActivity",(function(){V()})),ee.addListener("angularStartChatOperatorPublic",(function(t){vt.startChatOperator(t)})),ee.addListener("svelteallDepartmentsChanged",(function(t,e){w(t,e)})),ee.addListener("svelteProductChanged",(function(t){H(t)})),ee.addListener("svelteDepartmentChanged",(function(t){v(t)})),ee.addListener("svelteLimitChanged",(function(t){vt.setLocalSettings(t,a()[t]),G()})),ee.addListener("angularSyncDisabled",(function(t){var e;e=t,g.blockSync=e,1==g.blockSync&&(g.abortController.abort(),g.abortController=new AbortController)})),ee.addListener("svelteToggleList",(function(t){!function(t){if(L(_t,h(a)[t]=!a()[t],h(a)),localStorage)try{localStorage.setItem(t,a()[t])}catch(t){}}(t)})),ee.addListener("svelteToggleWidget",(function(t,e){vt.toggleWidget(_t,t,e)})),ee.addListener("svelteRemoveLocalSetting",(function(t){vt.removeLocalSetting(t)})),ee.addListener("svelteStoreLocalSetting",(function(t,e){vt.storeLocalSetting(t,e)})),ee.addListener("svelteNoticeUpdated",(function(){!async function(){const t=await fetch(WWW_DIR_JAVASCRIPT+"chat/loadinitialdata",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}}),e=await t.json();if(e.logout||e.error_url)return void document.location.reload();e.notice?L(_t,h(a).lhcNotice=e.notice,h(a)):L(_t,h(a).lhcNotice={message:"",level:"primary"},h(a))}()})),ee.addListener("svelteAppendActiveChats",(function(){vt.loadActiveChats().then((function(t){let e=jQuery("#tabs");t.result.forEach((function(t){lhinst.startChatBackground(t.id,e,vt.truncate(t.nick||"Visitor",10))})),setTimeout((function(){ee.emitEvent("angularLoadChatList")}),1e3)}))}));let p=[];function m(){vt.setInactive("false"),g.isListLoaded=!1,g.blockSync=!1,g.lhcListRequestInProgress=!1,V(),lhinst.disableSync=!1,G(),L(_t,h(a).inActive=!1,h(a))}function v(t){if(-1===g.lhcSettingUpdateProgress.indexOf(t)){if(g.lhcSettingUpdateProgress.push(t),a()[t].length>0){!1===g.lhcSettingAllSelected&&(L(_t,h(a)[t+"_all_departments"]=!1,h(a)),w(t,!1)),g.lhcSettingAllSelected=!1;var e=a()[t].join("/");""!==e?(y(t,e),C(t)):x(t)}else y(t,null);g.isListLoaded=!1,G()}}function f(t,e){if(localStorage)try{localStorage.setItem(t,e)}catch(t){}}function b(t){if(localStorage)try{localStorage.removeItem(t)}catch(t){}}function w(t,e){if(!0===a()[t+"_all_departments"]?f(t+"_all_departments",!0):b(t+"_all_departments"),!0===a()[t+"_hide_hidden"]?f(t+"_hide_hidden",!0):b(t+"_hide_hidden"),!0===a()[t+"_hide_disabled"]?f(t+"_hide_disabled",!0):b(t+"_hide_disabled"),!0===a()[t+"_only_online"]?f(t+"_only_online",!0):b(t+"_only_online"),void 0!==a()[t+"_hide_dep"]&&(!0===a()[t+"_hide_dep"]?f(t+"_hide_dep",!0):b(t+"_hide_dep")),void 0!==a()[t+"_hide_dgroup"]&&(!0===a()[t+"_hide_dgroup"]?f(t+"_hide_dgroup",!0):b(t+"_hide_dgroup")),void 0!==a().optionsPanels[t]){const e=a().optionsPanels[t];e.custom_filters&&Array.isArray(e.custom_filters)&&e.custom_filters.forEach((function(e){const i=t+"_"+e.field;void 0!==a()[i]&&(!0===a()[i]?f(i,!0):b(i))}))}if(!0===a()[t+"_all_departments"]){let e=[];a().userDepartments.forEach((function(i){(!1===a()[t+"_only_explicit_online"]||!0===a()[t+"_only_explicit_online"]&&!0===i.oexp)&&(!1===a()[t+"_hide_hidden"]||!0===a()[t+"_hide_hidden"]&&!1===i.hidden)&&(!1===a()[t+"_hide_disabled"]||!0===a()[t+"_hide_disabled"]&&!1===i.disabled)&&(!1===a()[t+"_only_online"]||!0===a()[t+"_only_online"]&&!0===i.ogen)&&e.push(i.id)})),0===e.length&&e.push(-1),g.lhcSettingAllSelected=!0,L(_t,h(a)[t]=e,h(a))}else!0===e&&L(_t,h(a)[t]=[],h(a));!0===e&&(g.isListLoaded=!1,G())}function y(t,e){vt.setLocalSettings(t,e).then((function(){x(t)})).catch((function(){x(t)}))}function x(t){g.lhcSettingUpdateProgress.splice(g.lhcSettingUpdateProgress.indexOf(t),1)}function C(t){L(_t,h(a)[t+"Names"]=[],h(a)),a()[t].forEach((function(e){void 0!==a().userDepartmentsNames&&void 0!==a().userDepartmentsNames[e]?a()[t+"Names"].push(a().userDepartmentsNames[e]):void 0!==a().userDepartmentsNames&&(a()[t].splice(a()[t].indexOf(e),1),v(t))}))}function P(t){if(localStorage)try{var e=localStorage.getItem(t);if(null!==e&&""!==e)return e.split(",")}catch(t){}return[]}function O(t,e,a){return isNaN(e)&&(e=10),void 0===a&&(a="..."),t.length<=e||t.length-a.length<=e?t:String(t).substring(0,e-a.length)+a}function N(t){a().last_actions.unshift(t),L(_t,h(a).last_actions=a().last_actions.slice(0,5),h(a))}function H(t){if(a()[t].length>0){var e=a()[t].join("/");""!==e&&vt.setLocalSettings(t,e)}else vt.setLocalSettings(t,null);g.isListLoaded=!1,G()}p.push("actived"),p.push("departmentd"),p.push("unreadd"),p.push("pendingd"),p.push("operatord"),p.push("closedd"),p.push("mcd"),p.push("botd"),p.push("subjectd"),p.push("pendingmd"),p.push("activemd"),p.push("alarmmd"),p.push("mmd"),p.push("department_online"),p.forEach((function(t){L(_t,h(a)[t+"_all_departments"]="false"!=vt.restoreLocalSetting(t+"_all_departments","false",!1),h(a)),L(_t,h(a)[t+"_hide_hidden"]="false"!=vt.restoreLocalSetting(t+"_hide_hidden","false",!1),h(a)),L(_t,h(a)[t+"_hide_disabled"]="false"!=vt.restoreLocalSetting(t+"_hide_disabled","false",!1),h(a)),L(_t,h(a)[t+"_only_online"]="false"!=vt.restoreLocalSetting(t+"_only_online","false",!1),h(a)),L(_t,h(a)[t+"_only_explicit_online"]="false"!=vt.restoreLocalSetting(t+"_only_explicit_online","false",!1),h(a)),L(_t,h(a)[t+"_m_h"]=vt.restoreLocalSetting(t+"_m_h",null,!1),h(a))})),L(_t,h(a).onlineusers_m_h=vt.restoreLocalSetting("onlineusers_m_h",null,!1),h(a)),W((async()=>{const t=jQuery('.nav-tabs[data-remember="true"], .nav-pills[data-remember="true"]'),e=()=>{const e=window.location.hash;if(e&&t.length){const a=e.replace("#!#","#").replace("#/","#"),i=t.find('.nav-link[href="'+a+'"]');if(i.length)try{if("function"==typeof i.tab)i.tab("show");else{new bootstrap.Tab(i[0]).show()}}catch(t){console.warn("Could not activate tab:",t)}}};e(),t.find(".nav-link").on("shown.bs.tab",(function(t){history.replaceState(null,null,t.target.hash)})),window.addEventListener("hashchange",e),L(_t,h(a).departmentd_hide_dep="false"!=vt.restoreLocalSetting("departmentd_hide_dep","false",!1),h(a)),L(_t,h(a).departmentd_hide_dgroup="false"!=vt.restoreLocalSetting("departmentd_hide_dgroup","false",!1),h(a)),L(_t,h(a).lmtoggle="false"!=vt.restoreLocalSetting("lmtoggle","false",!1),h(a)),L(_t,h(a).rmtoggle="false"!=vt.restoreLocalSetting("rmtoggle","false",!1),h(a)),vt.getToggleWidget(_t,"track_open_chats"),vt.getToggleWidget(_t,"group_offline_chats"),document.addEventListener("keydown",(function(t){("Control"===t.key||t.ctrlKey||"Meta"===t.key||t.metaKey)&&L(_t,h(a).isCTRLPressed=!0,h(a))})),document.addEventListener("keyup",(function(t){("Control"===t.key||t.ctrlKey||"Meta"===t.key||t.metaKey)&&L(_t,h(a).isCTRLPressed=!1,h(a))})),window.addEventListener("blur",(function(){L(_t,h(a).isCTRLPressed=!1,h(a))}));var i,n,s="",o=P("achat_id"),r=P("gachat_id"),l=P("machat_id"),c=0,d=0,_=window.location.hash;""!==_&&(null!==(i=_.match(/id-\d+$/))&&i[0]&&(c=parseInt(i[0].replace("id-","")),-1===o.indexOf(c)&&o.push(c)),null==i&&null!==(i=_.match(/mc\d+$/))&&i[0]&&(d=parseInt(i[0].replace("mc","")),-1===l.indexOf(d)&&l.push(d)));(n=document.getElementById("load_chat_id"))&&-1===o.indexOf(n.value)&&(c=parseInt(n.value),o.push(n.value),window.location.hash="#!#chat-id-"+n.value),(n=document.getElementById("load_mail_id"))&&-1===l.indexOf(n.value)&&(d=parseInt(n.value),l.push(n.value),window.location.hash="#!#chat-id-mc"+n.value);let u=jQuery("#tabs").length;u>0&&!1===lhinst.disableremember&&o.length>0&&(s="/(chatopen)/"+o.join("/")),u>0&&!1===lhinst.disableremember&&r.length>0&&(s+="/(chatgopen)/"+r.join("/")),jQuery("#tabs").length>0&&0==lhinst.disableremember&&l.length>0&&(s+="/(chatmopen)/"+l.join("/"));const m=await fetch(WWW_DIR_JAVASCRIPT+"chat/loadinitialdata"+s,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}}),v=await m.json();if(v.logout||v.error_url)return void document.location.reload();_t.update((t=>(t.userDepartmentsNames=v.dp_names,t.userDepartments=v.dep_list,t.userProductNames=v.pr_names,t.userDepartmentsGroups=v.dp_groups,t.userGroups=v.user_groups,t.hideInvisible=v.im,t.hideOnline=v.ho,t.lhcVersion=v.v,v.notice&&(t.lhcNotice=v.notice),v.message_connection&&(t.lhcMessageConnection=v.message_connection),t.alwaysOnline=v.a_on,t.additionalColumns=v.col,t.widgetsActive=v.widgets,t.bot_st=v.bot_st,t.excludeIcons=v.exc_ic,t.notifIcons=v.not_ic,t)));let f=["subjectd","subjectd_products","subjectd_dpgroups","subjectd_ugroups","activeu","pendingu","oopu","subjectu","closedd","closedd_products","closedd_dpgroups","botd","botd_products","botd_dpgroups","botd_ugroups","pendingd","pendingd_products","pendingd_dpgroups","pendingd_ugroups","unreadd","unreadd_products","unreadd_dpgroups","mcd","mcd_products","mcd_dpgroups","actived","actived_products","actived_dpgroups","actived_ugroups","departmentd_dpgroups","departmentd","operatord_dpgroups","operatord_ugroups","operatord","mmd","mmd_dpgroups","alarmmd","alarmmd_products","alarmmd_dpgroups","alarmmd_ugroups","activemd","activemd_products","activemd_dpgroups","activemd_ugroups","pendingmd","pendingmd_products","pendingmd_dpgroups","pendingmd_ugroups","pendingmu","activemu","alarmmu","department_online","department_online_dpgroups"];var b,w=["limitb","limita","limitu","limitp","limito","limitc","limitd","limitmc","limitgc","limits","limitpm","limitam","limitalm","limitmm"];v.dw_filters&&Object.keys(v.dw_filters).forEach((t=>{var e,i,n;-1!==f.indexOf(t)?L(_t,h(a)[t]=(e=v.dw_filters[t],i=e.split("/"),n=[],i.forEach((function(t){n.push(parseInt(t))})),n),h(a)):-1!==w.indexOf(t)&&L(_t,h(a)[t]=v.dw_filters[t],h(a))})),p.forEach((function(t){C(t)})),1===v.track_activity&&(g.timeoutActivityTime=v.timeout_activity,b=function(){V()},M(window,"mousemove",b),M(document,"mousemove",b),M(window,"mousedown",b),M(window,"click",b),M(window,"scroll",b),M(window,"keypress",b),M(window,"load",b),M(document,"scroll",b),M(document,"touchstart",b),M(document,"touchend",b),V()),v.copen.forEach((function(t){lhinst.addOpenTrace("opened_chats"),lhinst.ignoreAdminSync=!0,lhinst.startChat(t.id,jQuery("#tabs"),O(t.nick||"Visitor",10),t.id===c,0,t.status),lhinst.ignoreAdminSync=!1,N({type:"mac_history",chat_id:t.id,nick:t.nick}),t.id===c&&document.getElementById("tabs").classList.add("chat-tab-selected")})),v.cgopen.forEach((function(t){lhinst.startGroupChat(t.id,jQuery("#tabs"),O(t.nick||"Visitor",10),!0)})),v.cmopen.forEach((function(t){lhinst.startMailChat(t.id,jQuery("#tabs"),O(t.subject||"Mail",10),!(t.id===d))})),v.cmdel.forEach((function(t){lhinst.forgetChat(t,"machat_id")})),v.cdel.forEach((function(t){lhinst.forgetChat(t,"achat_id")})),v.cgdel.forEach((function(t){lhinst.forgetChat(t,"gachat_id")})),ee.emitEvent("eventLoadInitialData",[v,a(),vt]),window.$_LHC_API.initial_data=v,_t.update((t=>(t.lhcCoreLoaded=!0,t))),async function(){var t=[],e=[],i=[],n=[];a().userGroups.forEach((function(t){e.push(t.id)})),a().userDepartmentsGroups.forEach((function(t){i.push(t.id)})),a().userProductNames.forEach((function(t){n.push(t.id)}));const s=await fetch(WWW_DIR_JAVASCRIPT+"chat/searchprovider/users_ids/?exclude_disabled=1&q="+a().pendingu.join(",")+","+a().activeu.join(",")+","+a().subjectu.join(",")+","+a().oopu.join(",")+","+a().pendingmu.join(",")+","+a().activemu.join(",")+","+a().alarmmu.join(","),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json","X-CSRFToken":confLH.csrf_token}}).catch((t=>{})),o=await s.json();L(_t,h(a).userList=o.items,h(a)),a().userList.forEach((function(e){t.push(e.id)}));var r={activeu:t,actived_products:n,actived_ugroups:e,actived_dpgroups:i,pendingu:t,oopu:t,pendingd_ugroups:e,operatord_ugroups:e,pendingd_dpgroups:i,pendingd_products:n,botd_dpgroups:i,botd_products:n,departmentd_dpgroups:i,closedd_products:n,closedd_dpgroups:i,unreadd_dpgroups:i,unreadd_products:n,mcd_products:n,mcd_dpgroups:i,mmd_dpgroups:i,operatord_dpgroups:i};for(const[t,e]of Object.entries(r)){[...a()[t]].forEach((function(i){-1===e.indexOf(i)&&(a()[t].splice(a()[t].indexOf(i),1),H(t))}))}}(),G()}));let M=document.addEventListener?function(t,e,a){if(t&&t.nodeName||t===window)t.addEventListener(e,a,!1);else if(t&&t.length)for(var i=0;i<t.length;i++)M(t[i],e,a)}:function(t,e,a){if(t&&t.nodeName||t===window)t.attachEvent("on"+e,(function(){return a.call(t,window.event)}));else if(t&&t.length)for(var i=0;i<t.length;i++)M(t[i],e,a)};function V(){var t=window.opener;if(t)try{t.ee.emitEvent("svelteResetTimeoutActivity")}catch(t){console.log(t)}else!1===g.blockSync&&(g.lastd_activity=Math.round((new Date).getTime()/1e3),clearTimeout(g.timeoutActivity),g.timeoutActivity=setTimeout((function(){vt.setInactive("true").then((function(t){if(!0===t.active)return V(),void(g.lastd_activity=0);lhinst.disableSync=g.blockSync=!0,g.lhcListRequestInProgress=!1,lhc.revealModal({url:WWW_DIR_JAVASCRIPT+"user/wentinactive/false",backdrop:!0,hidecallback(){m(),g.channel.postMessage({action:"went_active",args:{}})}})}))}),1e3*g.timeoutActivityTime))}function B(t){if((1==a()[t+"_only_explicit_online"]||1==a()[t+"_hide_hidden"]||1==a()[t+"_hide_disabled"]||1==a()[t+"_only_online"])&&a().userDepartments.length>0){var e=[];return a().userDepartments.forEach((function(i){(0==a()[t+"_only_explicit_online"]||1==a()[t+"_only_explicit_online"]&&1==i.oexp)&&(0==a()[t+"_hide_hidden"]||1==a()[t+"_hide_hidden"]&&0==i.hidden)&&(0==a()[t+"_hide_disabled"]||1==a()[t+"_hide_disabled"]&&0==i.disabled)&&(0==a()[t+"_only_online"]||1==a()[t+"_only_online"]&&1==i.ogen)&&e.push(i.id)})),0==e.length&&e.push(-1),e}return[]}async function G(){if(localStorage)try{L(_t,h(a).pending_chats_expanded="false"!=localStorage.getItem("pending_chats_expanded"),h(a)),L(_t,h(a).active_chats_expanded="false"!=localStorage.getItem("active_chats_expanded"),h(a)),L(_t,h(a).my_active_chats_expanded="false"!=localStorage.getItem("my_active_chats_expanded"),h(a)),L(_t,h(a).closed_chats_expanded="false"!=localStorage.getItem("closed_chats_expanded"),h(a)),L(_t,h(a).unread_chats_expanded="false"!=localStorage.getItem("unread_chats_expanded"),h(a)),L(_t,h(a).my_chats_expanded="false"!=localStorage.getItem("my_chats_expanded"),h(a)),L(_t,h(a).pending_mails_expanded="false"!=localStorage.getItem("pending_mails_expanded"),h(a)),L(_t,h(a).active_mails_expanded="false"!=localStorage.getItem("pending_mails_expanded"),h(a)),L(_t,h(a).my_mails_expanded="false"!=localStorage.getItem("my_mails_expanded"),h(a)),L(_t,h(a).custom_list_1_expanded="false"!=localStorage.getItem("custom_list_1_expanded"),h(a)),L(_t,h(a).custom_list_2_expanded="false"!=localStorage.getItem("custom_list_2_expanded"),h(a)),L(_t,h(a).custom_list_3_expanded="false"!=localStorage.getItem("custom_list_3_expanded"),h(a)),L(_t,h(a).custom_list_4_expanded="false"!=localStorage.getItem("custom_list_4_expanded"),h(a))}catch(t){}if(!0===g.blockSync)return clearTimeout(g.timeoutControl),g.timeoutControl=setTimeout((function(){g.isListLoaded=!1,g.lhcListRequestInProgress=!1,G()}),confLH.back_office_sinterval),void(g.lhcListRequestInProgress=!1);if(!0!==g.lhcListRequestInProgress){L(_t,h(a).lhcListRequestInProgress=g.lhcListRequestInProgress=!0,h(a)),clearTimeout(g.timeoutControl);try{const d=await fetch(WWW_DIR_JAVASCRIPT+"chat/syncadmininterface"+function(){L(_t,h(a).custom_extension_filter="",h(a));var t,e="/(limita)/"+parseInt(a().limita);if(e+="/(limitu)/"+parseInt(a().limitu),e+="/(limitp)/"+parseInt(a().limitp),e+="/(limito)/"+parseInt(a().limito),e+="/(limitc)/"+parseInt(a().limitc),e+="/(limitd)/"+parseInt(a().limitd),e+="/(limits)/"+parseInt(a().limits),e+="/(limitmc)/"+parseInt(a().limitmc),e+="/(limitb)/"+parseInt(a().limitb),e+="/(limitgc)/"+parseInt(a().limitgc),e+="/(limitmm)/"+parseInt(a().limitmm),e+="/(limitpm)/"+parseInt(a().limitpm),e+="/(limitam)/"+parseInt(a().limitam),e+="/(limitalm)/"+parseInt(a().limitalm),"object"==typeof a().widgetsActive&&a().widgetsActive.length>0){let t={my_chats:0,online_operators:1,group_chats:2,pending_chats:3,online_visitors:4,unread_chats:5,active_chats:6,bot_chats:7,transfered_chats:8,departments_stats:9,subject_chats:20,pmails:10,amails:11,malarms:12,my_mails:30},i=[];a().widgetsActive.forEach((function(e){t[e]&&i.push(t[e])})),e+="/(w)/"+i.join("/")}if("object"==typeof a().activeu&&a().activeu.length>0&&(e+="/(activeu)/"+a().activeu.join("/")),"object"==typeof a().pendingu&&a().pendingu.length>0&&(e+="/(pendingu)/"+a().pendingu.join("/")),"object"==typeof a().pendingmu&&a().pendingmu.length>0&&(e+="/(pendingmu)/"+a().pendingmu.join("/")),"object"==typeof a().activemu&&a().activemu.length>0&&(e+="/(activemu)/"+a().activemu.join("/")),"object"==typeof a().alarmmu&&a().alarmmu.length>0&&(e+="/(alarmmu)/"+a().alarmmu.join("/")),"object"==typeof a().oopu&&a().oopu.length>0&&(e+="/(oopu)/"+a().oopu.join("/")),"object"==typeof a().subjectu&&a().subjectu.length>0&&(e+="/(subjectu)/"+a().subjectu.join("/")),"object"==typeof a().actived_dpgroups&&a().actived_dpgroups.length>0&&(e+="/(adgroups)/"+a().actived_dpgroups.join("/")),"object"==typeof a().pendingmd_dpgroups&&a().pendingmd_dpgroups.length>0&&(e+="/(pmd)/"+a().pendingmd_dpgroups.join("/")),"object"==typeof a().activemd_dpgroups&&a().activemd_dpgroups.length>0&&(e+="/(amd)/"+a().activemd_dpgroups.join("/")),"object"==typeof a().alarmmd_dpgroups&&a().alarmmd_dpgroups.length>0&&(e+="/(almd)/"+a().alarmmd_dpgroups.join("/")),"object"==typeof a().pendingd_dpgroups&&a().pendingd_dpgroups.length>0&&(e+="/(pdgroups)/"+a().pendingd_dpgroups.join("/")),"object"==typeof a().subjectd_dpgroups&&a().subjectd_dpgroups.length>0&&(e+="/(sdgroups)/"+a().subjectd_dpgroups.join("/")),"object"==typeof a().closedd_dpgroups&&a().closedd_dpgroups.length>0&&(e+="/(cdgroups)/"+a().closedd_dpgroups.join("/")),"object"==typeof a().botd_dpgroups&&a().botd_dpgroups.length>0&&(e+="/(bdgroups)/"+a().botd_dpgroups.join("/")),"object"==typeof a().mcd_dpgroups&&a().mcd_dpgroups.length>0&&(e+="/(mdgroups)/"+a().mcd_dpgroups.join("/")),"object"==typeof a().mmd_dpgroups&&a().mmd_dpgroups.length>0&&(e+="/(mmdgroups)/"+a().mmd_dpgroups.join("/")),"object"==typeof a().unreadd_dpgroups&&a().unreadd_dpgroups.length>0&&(e+="/(udgroups)/"+a().unreadd_dpgroups.join("/")),"object"==typeof a().departmentd_dpgroups&&a().departmentd_dpgroups.length>0&&(e+="/(ddgroups)/"+a().departmentd_dpgroups.join("/")),"object"==typeof a().operatord_dpgroups&&a().operatord_dpgroups.length>0&&(e+="/(odpgroups)/"+a().operatord_dpgroups.join("/")),"object"==typeof a().actived)if(a().actived.length>0)e+="/(actived)/"+a().actived.join("/");else{let t=B("actived");t.length>0&&(e+="/(actived)/"+t.join("/"))}if("object"==typeof a().subjectd)if(a().subjectd.length>0)e+="/(subjectd)/"+a().subjectd.join("/");else{let t=B("subjectd");t.length>0&&(e+="/(subjectd)/"+t.join("/"))}if("object"==typeof a().mcd)if(a().mcd.length>0)e+="/(mcd)/"+a().mcd.join("/");else{let t=B("mcd");t.length>0&&(e+="/(mcd)/"+t.join("/"))}if("object"==typeof a().mmd&&(a().mmd.length>0?e+="/(mmd)/"+a().mmd.join("/"):(t=B("mmd")).length>0&&(e+="/(mmd)/"+t.join("/"))),"object"==typeof a().pendingmd&&(a().pendingmd.length>0?e+="/(pendingmd)/"+a().pendingmd.join("/"):(t=B("pendingmd")).length>0&&(e+="/(pendingmd)/"+t.join("/"))),"object"==typeof a().activemd&&(a().activemd.length>0?e+="/(activemd)/"+a().activemd.join("/"):(t=B("activemd")).length>0&&(e+="/(activemd)/"+t.join("/"))),"object"==typeof a().alarmmd&&(a().alarmmd.length>0?e+="/(alarmmd)/"+a().alarmmd.join("/"):(t=B("alarmmd")).length>0&&(e+="/(alarmmd)/"+t.join("/"))),"object"==typeof a().unreadd)if(a().unreadd.length>0)e+="/(unreadd)/"+a().unreadd.join("/");else{let t=B("unreadd");t.length>0&&(e+="/(unreadd)/"+t.join("/"))}if("object"==typeof a().botd)if(a().botd.length>0)e+="/(botd)/"+a().botd.join("/");else{let t=B("botd");t.length>0&&(e+="/(botd)/"+t.join("/"))}if("object"==typeof a().pendingd){if(a().pendingd.length>0)e+="/(pendingd)/"+a().pendingd.join("/");else{let t=B("pendingd");t.length>0&&(e+="/(pendingd)/"+t.join("/"))}void 0!==a().toggleWidgetData.pending_chats_sort&&""!==a().toggleWidgetData.pending_chats_sort&&(e+="/(psort)/"+a().toggleWidgetData.pending_chats_sort)}if("object"==typeof a().operatord)if(a().operatord.length>0)e+="/(operatord)/"+a().operatord.join("/");else{let t=B("operatord");t.length>0&&(e+="/(operatord)/"+t.join("/"))}if("object"==typeof a().closedd&&a().closedd.length>0&&(e+="/(closedd)/"+a().closedd.join("/")),"object"==typeof a().departmentd)if(a().departmentd.length>0)e+="/(departmentd)/"+a().departmentd.join("/");else{let t=B("departmentd");t.length>0&&(e+="/(departmentd)/"+t.join("/"))}if("object"==typeof a().actived_products&&a().actived_products.length>0&&(e+="/(activedprod)/"+a().actived_products.join("/")),"object"==typeof a().pendingd_ugroups&&a().pendingd_ugroups.length>0&&(e+="/(pugroups)/"+a().pendingd_ugroups.join("/")),"object"==typeof a().operatord_ugroups&&a().operatord_ugroups.length>0&&(e+="/(oopugroups)/"+a().operatord_ugroups.join("/")),"object"==typeof a().subjectd_ugroups&&a().subjectd_ugroups.length>0&&(e+="/(sugroups)/"+a().subjectd_ugroups.join("/")),"object"==typeof a().actived_ugroups&&a().actived_ugroups.length>0&&(e+="/(augroups)/"+a().actived_ugroups.join("/")),"object"==typeof a().pendingmd_ugroups&&a().pendingmd_ugroups.length>0&&(e+="/(pmug)/"+a().pendingmd_ugroups.join("/")),"object"==typeof a().activemd_ugroups&&a().activemd_ugroups.length>0&&(e+="/(amug)/"+a().activemd_ugroups.join("/")),"object"==typeof a().alarmmd_ugroups&&a().alarmmd_ugroups.length>0&&(e+="/(almug)/"+a().alarmmd_ugroups.join("/")),"object"==typeof a().mcd_products&&a().mcd_products.length>0&&(e+="/(mcdprod)/"+a().mcd_products.join("/")),"object"==typeof a().unreadd_products&&a().unreadd_products.length>0&&(e+="/(unreaddprod)/"+a().unreadd_products.join("/")),"object"==typeof a().pendingd_products&&a().pendingd_products.length>0&&(e+="/(pendingdprod)/"+a().pendingd_products.join("/")),"object"==typeof a().subjectd_products&&a().subjectd_products.length>0&&(e+="/(subjectdprod)/"+a().subjectd_products.join("/")),"object"==typeof a().botd_products&&a().botd_products.length>0&&(e+="/(botdprod)/"+a().botd_products.join("/")),"object"==typeof a().closedd_products&&a().closedd_products.length>0&&(e+="/(closeddprod)/"+a().closedd_products.join("/")),void 0!==a().toggleWidgetData.track_open_chats&&1==a().toggleWidgetData.track_open_chats&&(e+="/(topen)/true",a()),void 0!==a().toggleWidgetData.active_chats_sort&&""!==a().toggleWidgetData.active_chats_sort&&(e+="/(acs)/"+a().toggleWidgetData.active_chats_sort),void 0!==a().toggleWidgetData.bot_chats_sort&&""!==a().toggleWidgetData.bot_chats_sort&&(e+="/(bcs)/"+a().toggleWidgetData.bot_chats_sort),void 0!==a().toggleWidgetData.closed_chats_sort&&""!==a().toggleWidgetData.closed_chats_sort&&(e+="/(clcs)/"+a().toggleWidgetData.closed_chats_sort),void 0!==a().toggleWidgetData.onop_sort&&""!==a().toggleWidgetData.onop_sort&&(e+="/(onop)/"+a().toggleWidgetData.onop_sort),void 0!==a().optionsPanels)for(const[t,i]of Object.entries(a().optionsPanels))i.custom_filters&&Array.isArray(i.custom_filters)&&i.custom_filters.forEach((function(i){const n=t+"_"+i.field,s=vt.restoreLocalSetting(n,"false",!1);L(_t,h(a)[n]="false"!=s,h(a)),!0===a()[n]&&(e+="/("+i.field+")/1")}));var i=[];return!0===a().departmentd_hide_dep&&i.push("dhdep"),!0===a().departmentd_hide_dgroup&&i.push("dhdepg"),i.length>0&&(e+="/(hsub)/"+i.join("/")),g.lastd_activity>0&&(e+="/(lda)/"+g.lastd_activity),g.lastd_activity=0,ee.emitEvent("eventGetSyncFilterSvelte",[a()]),e+=a().custom_extension_filter}(),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},signal:g.abortController.signal});if(!d.ok)throw new Error("Network response was not OK ["+d.status+"] ["+d.statusText+"]");const _=await d.json();if(g.lhcListRequestInProgress=!1,_.logout||_.error_url)return void document.location.reload();if(1==g.blockSync)return L(_t,h(a).lhcBLockSync=!0,h(a)),clearTimeout(g.timeoutControl),void(g.timeoutControl=setTimeout((function(){g.isListLoaded=!1,G()}),confLH.back_office_sinterval));if(1==a().lhcConnectivityProblem&&L(_t,h(a).lhcConnectivityProblem=!1,h(a)),ee.emitEvent("eventLoadChatListSvelte",[_,a(),g]),void 0===_.items_processed){var t=[],e=[],i=[],n=[],s=jQuery("#tabs");for(const[l,c]of Object.entries(_.result))if(-1===a().suspend_widgets.indexOf(l)&&(L(_t,h(a)[l]=c,h(a)),0!=s.length||"pending_chat"!=l&&"my_chats"!=l||c.list.forEach((function(t){void 0!==t.user_id&&t.user_id==confLH.user_id&&1==confLH.accept_chats&&(1!==t.status||1===t.status&&!0===t.hum)&&ee.emitEvent("chatTabPreload",[t.id,{focus:!1}])})),s.length>0&&("pending_chat"==l||"my_chats"==l?c.list.forEach((function(t){void 0!==t.user_id&&t.user_id==confLH.user_id&&1==confLH.accept_chats&&(1!==t.status||1===t.status&&!0===t.hum)&&0==jQuery("#chat-tab-link-"+t.id).length&&(s.length>0&&0==lhinst.disableremember&&(lhinst.addOpenTrace("auto_accept"),lhinst.removeSynchroChat(t.id),lhinst.startChatBackground(t.id,s,O(t.nick||"Visitor",10)),g.channel.postMessage({action:"startbackground_chat",args:{nick:O(t.nick||"Visitor",10),chat_id:parseInt(t.id)}}),ee.emitEvent("eventLoadChatListSvelteAutoOpen",[t,g])),0==lhinst.disableremember&&n.push(t.id))})):"transfer_chats"==l?c.list.forEach((function(t){void 0!==t.user_id&&t.user_id==confLH.user_id&&(1==confLH.accept_chats||jQuery("#chat-tab-link-"+t.id).length>0)&&(s.length>0&&0==lhinst.disableremember&&(lhinst.addOpenTrace("auto_accept_transfer"),lhinst.startChatTransfer(t.id,s,O(t.nick||"Visitor",10),t.transfer_id,0==jQuery("#chat-tab-link-"+t.id).length),g.channel.postMessage({action:"startbackground_chat",args:{nick:O(t.nick||"Visitor",10),chat_id:parseInt(t.id)}})),0==lhinst.disableremember&&n.push(t.id))})):"group_chats"==l?s.length>0&&1==confLH.auto_join_private&&c.list.forEach((function(t){1==t.type&&0==t.jtime&&0==jQuery("#chat-tab-link-gc"+t.id).length&&lhinst.startGroupChat(t.id,s,O(t.name,10),!0)})):"support_chats"==l?s.length>0&&1==confLH.auto_join_private&&c.list.forEach((function(t){null===document.getElementById("chat-tab-li-"+t.chat_id)?(lhinst.addOpenTrace("support_chat"),J(t.chat_id,!0)):jQuery("#private-chat-tab-link-"+t.chat_id).attr("private-loaded")?jQuery("#chat-tab-link-"+t.chat_id).hasClass("active")?jQuery("#private-chat-tab-link-"+t.chat_id).hasClass("active")||jQuery("#private-chat-tab-link-"+t.chat_id+" > .whatshot").removeClass("d-none"):jQuery("#chat-tab-link-"+t.chat_id+" > .whatshot").removeClass("d-none"):(jQuery("#private-chat-tab-link-"+t.chat_id).attr("private-loaded",!0),ee.emitEvent("privateChatStart",[t.chat_id,{unread:!0}]))})):"pending_mails"!=l&&"my_mails"!=l||s.length>0&&c.list.forEach((function(t){void 0!==t.user_id&&t.user_id==confLH.user_id&&1==confLH.accept_mails&&1!==t.status&&null===document.getElementById("chat-tab-li-mc"+t.id)&&lhinst.startMailChat(t.id,s,O(t.subject_front,10),!0)}))),c.last_id_identifier)){e=[],t=[];var o=0,r=c.list;"pending_chat"==c.last_id_identifier&&void 0!==a().toggleWidgetData.pending_chats_sort&&"id_asc"==a().toggleWidgetData.pending_chats_sort&&(r=c.list.slice().reverse()),r.forEach((function(i){var n=void 0!==i.user_id?i.user_id:0,s=i.id+"_"+n;if(("bot_chats"!=c.last_id_identifier||i.msg_v&&i.msg_v>a().bot_st.msg_nm&&1==a().bot_st.bot_notifications||i.aalert)&&"transfer_chat_dep"!=c.last_id_identifier){var r=[];if("active_chats"==c.last_id_identifier&&i.aicons&&(s+="_"+(r=Object.keys(i.aicons)).join("_")),t.push(s),void 0===a().statusNotifications[c.last_id_identifier]&&L(_t,h(a).statusNotifications[c.last_id_identifier]=[],h(a)),1==g.isListLoaded&&"subject_chats"==c.last_id_identifier)-1==a().statusNotifications[c.last_id_identifier].indexOf(s)&&-1===lhinst.chatsSynchronising.indexOf(parseInt(i.id))&&e.push(i.id);else if(1==g.isListLoaded&&"active_chats"==c.last_id_identifier){if(-1==a().statusNotifications[c.last_id_identifier].indexOf(s)&&r.length>0&&a().notifIcons.length>0){var l=a().notifIcons.filter((function(t){return-1===a().excludeIcons.indexOf(t)&&-1!==r.indexOf(t)}));l.length>0&&e.push(i.id+"__"+l.join("__"))}}else 1!=g.isListLoaded||0!=o&&2!==i.status_sub_sub||(-1!=a().statusNotifications[c.last_id_identifier].indexOf(s)||0!=n&&"amails"!=c.last_id_identifier||0!=confLH.ownntfonly)&&(-1!=a().statusNotifications[c.last_id_identifier].indexOf(s)||n!=confLH.user_id)?o++:-1===lhinst.chatsSynchronising.indexOf(parseInt(i.id))&&e.push(i.id)}})),e.length>0&&(e.unshift(c.last_id_identifier),i.push(e.join("/"))),!0===g.isListLoaded&&q(a().statusNotifications[c.last_id_identifier],t,c.last_id_identifier),L(_t,h(a).statusNotifications[c.last_id_identifier]=t,h(a))}n.length>0&&(n.unshift("active_chat"),vt.getNotificationsData(n.join("/")).then((function(t){t.forEach((function(t){lhinst.removeBackgroundChat(parseInt(t.last_id)),lhinst.playSoundNewAction(t.last_id_identifier,parseInt(t.last_id),t.nick?t.nick:"Live Help",t.msg?t.msg:confLH.transLation.new_chat,t.nt),lhinst.backgroundChats.push(parseInt(t.last_id))}))}))),i.length>0&&vt.getNotificationsData(i.join("/")).then((function(t){t.forEach((function(t){lhinst.playSoundNewAction(t.last_id_identifier,parseInt(t.last_id),t.nick?t.nick:"Live Help",t.msg?t.msg:confLH.transLation.new_chat,t.nt)}))}))}if(void 0!==_.ou&&1==_.ou){jQuery("#lhc_op_operation").remove();var l=document.getElementsByTagName("head")[0],c=document.createElement("script");c.setAttribute("id","lhc_op_operation"),c.setAttribute("type","text/javascript"),c.setAttribute("src",WWW_DIR_JAVASCRIPT+"chat/loadoperatorjs"),l.appendChild(c)}if(void 0!==_.fs&&_.fs.length>0&&_.fs.forEach((function(t){lhinst.playSoundNewAction("pending_transfered",parseInt(t.id),t.nick?t.nick:"Live Help",confLH.transLation.transfered,t.nt,t.uid)})),void 0!==_.mac&&_.mac.length>0)(s=jQuery("#tabs")).length>0&&0==lhinst.disableremember&&_.mac.forEach((function(t){lhinst.startChatBackground(t.id,s,O(t.nick||"Visitor",10),!1),N({type:"mac",chat_id:t.id,nick:t.nick})}));_t.update((t=>(t.lhcUpdatedAt=_.uat,t.lhcVersion=_.v,t.hideOnline=1===_.ho,t.hideInvisible=1===_.im,t.alwaysOnline=1===_.a_on,t.inActive=1===_.ina,t.lhcListRequestInProgress=!1,t.lhcBLockSync=!1,_.aus.update_required?0===_.aus.updated?(t.lhcConnectivityProblem=!0,t.lhcConnectivityProblemExplain="Last activity update failed!"):(t.lhcConnectivityProblem=!1,t.lhcUpdatedAtActivity=_.aus.updated):t.lhcUpdatedAtActivity=_.aus.updated,t))),!0===g.setTimeoutEnabled&&(g.timeoutControl=setTimeout((function(){G()}),confLH.back_office_sinterval)),g.isListLoaded=!0}catch(t){t instanceof DOMException?(L(_t,h(a).lhcConnectivityProblem=!0,h(a)),L(_t,h(a).lhcConnectivityProblemExplain="DOM Exception",h(a))):(L(_t,h(a).lhcConnectivityProblem=!0,h(a)),L(_t,h(a).lhcConnectivityProblemExplain=t,h(a)),console.error("There has been a problem with your fetch operation:",t)),g.lhcListRequestInProgress=!1,g.timeoutControl=setTimeout((function(){G()}),confLH.back_office_sinterval)}}}function J(t,e){isNaN(t)||jQuery("#tabs").length>0&&vt.getChatData(t).then((function(a){a.r?document.location=WWW_DIR_JAVASCRIPT+a.r:(lhinst.addOpenTrace("start_chat_by_id"),e?lhinst.startChatBackground(parseInt(t),jQuery("#tabs"),O(a.nick||"Visitor",10),"backgroundid"):function(t,e){if(jQuery("#tabs").length>0)return lhinst.addOpenTrace("click"),lhinst.startChat(t,jQuery("#tabs"),O(e||"Visitor",10));lhinst.startChatNewWindow(t,e)}(parseInt(t),O(a.nick||"Visitor",10)))}))}function q(t,e,a){if(void 0!==t)for(var i=t.length-1;i>=0;i--){var n=t[i];-1===e.indexOf(n)&&lhinst.hideNotification(n.split("_")[0],a)}}S((()=>a()),(()=>{R(s,a().userFilterText)})),S((()=>a()),(()=>{R(o,a().depFilterText)})),S((()=>a()),(()=>{R(r,a().lmtoggle)})),S((()=>a()),(()=>{R(l,a().rmtoggle)})),S((()=>a()),(()=>{R(c,a().toggleWidgetData.track_open_chats)})),S((()=>a()),(()=>{R(d,a().toggleWidgetData.group_offline_chats)})),S((()=>A(s)),(()=>{A(s),vt.searchProvider("users",a().userFilterText).then((function(t){L(_t,h(a).userList=t.items,h(a))})).catch((function(){L(_t,h(a).userList=[],h(a))}))})),S((()=>A(o)),(()=>{A(o),vt.searchProvider("depswidget",a().depFilterText).then((function(t){L(_t,h(a).userDepartments=t.items,h(a)),L(_t,h(a).userDepartmentsNames=t.items_names,h(a))})).catch((function(){L(_t,h(a).userDepartments=[],h(a)),L(_t,h(a).userDepartmentsNames=[],h(a))}))})),S((()=>A(r)),(()=>{A(r),_()})),S((()=>A(l)),(()=>{A(l),_()})),S((()=>A(c)),(()=>{A(c),u("track_open_chats")})),S((()=>A(d)),(()=>{A(d),u("group_offline_chats")})),I(),T(),D(),n()}customElements.define("lhc-app",C(kt,{},[],[],!1));var Lt=O("<div><i>brand_awareness</i> </div>"),Wt=O('<div><i class="material-icons">update</i> </div>'),St=O("<div>You have weak internet connection or the server has problems. Try to refresh the  page. Error code - <b> </b></div>"),At=O("<div>You went offline because of inactivity. Please close other chat windows if you have any</div>"),Et=O('<div ng-non-bindable="" class="version-updated float-start"><!> <!> <!> <!></div>'),It=O('<span class="material-icons action-image">expand_more</span>'),Tt=O('<span class="material-icons action-image">expand_less</span>'),Dt=O('<span class="material-icons">hourglass_full</span>'),$t=O("<span><b> </b> - <i> </i> </span>"),Rt=O("<span><b> </b> - <i> </i> </span>"),Pt=O("<span><b> </b> </span>"),Ot=O("<span><b> </b> </span>"),Nt=O("<span> </span>"),Ht=O('<div ng-non-bindable="" class="text-muted float-start fs12 abbr-list d-none d-sm-block"><!> <!> <!> <!> <!> <!> <!> <!></div>'),Mt=O("<!> <!>",1);function Vt(e,a){j(a,!1);const i=()=>k(_t,"$lhcList",n),[n,s]=$(),o=E(),r=E();let l=P(a,"hide_quick_notification",12,0),c=E(8),d=0;S((()=>i()),(()=>{R(o,i().lhcVersion)})),S((()=>i()),(()=>{R(r,i().lhcNotice)})),S((()=>A(o)),(()=>{A(o),0==d&&(d=A(o)),d>0&&A(o)>0&&d!=A(o)&&(L(_t,h(i).lhcPendingRefresh=!0,h(i)),setInterval((()=>{R(c,A(c)-1),0==A(c)&&document.location.reload(!0)}),1e3))})),I();var _={get hide_quick_notification(){return l()},set hide_quick_notification(t){l(t),V()}};T();var u=Mt(),g=N(u),p=e=>{var a=Et(),n=G(a),s=e=>{var a=Lt(),n=G(a),s=B(n,1,!0);J(a),t((()=>{ut(a,1,(i(),h((()=>"text-"+i().lhcNotice.level)))),ut(n,1,(i(),h((()=>"material-icons text-"+i().lhcNotice.level)))),q(s,(i(),h((()=>i().lhcNotice.message))))})),M(e,a)};H(n,(t=>{i(),h((()=>i().lhcNotice.message&&!i().inActive&&!i().lhcPendingRefresh&&!i().lhcConnectivityProblem))&&t(s)}));var o=B(n,2),r=e=>{var a=Wt(),i=B(G(a));J(a),t((()=>q(i,`This window will be automatically refreshed in ${A(c)??""} seconds due to a version update.`))),M(e,a)};H(o,(t=>{i(),h((()=>i().lhcPendingRefresh))&&t(r)}));var l=B(o,2),d=e=>{var a=St(),n=B(G(a)),s=G(n,!0);J(n),J(a),t((()=>q(s,(i(),h((()=>i().lhcConnectivityProblemExplain)))))),M(e,a)};H(l,(t=>{i(),h((()=>i().lhcConnectivityProblem))&&t(d)}));var _=B(l,2),u=t=>{var e=At();M(t,e)};H(_,(t=>{i(),h((()=>i().inActive))&&t(u)})),J(a),M(e,a)};H(g,(t=>{i(),h((()=>i().lhcPendingRefresh||i().lhcConnectivityProblem||i().inActive||i().lhcNotice.message))&&t(p)}));var m=B(g,2),f=e=>{var a=Ht(),n=G(a),s=t=>{var e=It();Q("click",e,(t=>L(_t,h(i).last_actions_index++,h(i)))),M(t,e)};H(n,(t=>{i(),h((()=>i().last_actions_index<i().last_actions.length-1))&&t(s)}));var o=B(n,2),r=t=>{var e=Tt();Q("click",e,(t=>L(_t,h(i).last_actions_index--,h(i)))),M(t,e)};H(o,(t=>{i(),h((()=>i().last_actions_index>0))&&t(r)}));var l=B(o,2),c=t=>{var e=Dt();M(t,e)};H(l,(t=>{i(),h((()=>i().last_actions_index>0))&&t(c)}));var d=B(l,2),_=e=>{var a=$t(),n=G(a),s=G(n,!0);J(n);var o=B(n,2),r=G(o,!0);J(o);var l=B(o);J(a),t((()=>{q(s,(i(),h((()=>i().last_actions[i().last_actions_index].nick)))),q(r,(i(),h((()=>i().last_actions[i().last_actions_index].msg)))),q(l,` in chat - ${i(),h((()=>i().last_actions[i().last_actions_index].chat_id))??""}`)})),M(e,a)};H(d,(t=>{i(),h((()=>"user_wrote"==i().last_actions[i().last_actions_index].type))&&t(_)}));var u=B(d,2),g=e=>{var a=Rt(),n=G(a),s=G(n,!0);J(n);var o=B(n,2),r=G(o,!0);J(o);var l=B(o);J(a),t((()=>{q(s,(i(),h((()=>i().last_actions[i().last_actions_index].nick)))),q(r,(i(),h((()=>i().last_actions[i().last_actions_index].msg)))),q(l,` - ${i(),h((()=>i().last_actions[i().last_actions_index].chat_id))??""}`)})),M(e,a)};H(u,(t=>{i(),h((()=>"user_wrote"!=i().last_actions[i().last_actions_index].type&&"info_history"!=i().last_actions[i().last_actions_index].type&&"mac"!=i().last_actions[i().last_actions_index].type&&"mac_history"!=i().last_actions[i().last_actions_index].type))&&t(g)}));var p=B(u,2),m=e=>{var a=Pt(),n=G(a),s=G(n,!0);J(n);var o=B(n);J(a),t((()=>{q(s,(i(),h((()=>i().last_actions[i().last_actions_index].nick)))),q(o,` - active chat was opened - ${i(),h((()=>i().last_actions[i().last_actions_index].chat_id))??""}`)})),M(e,a)};H(p,(t=>{i(),h((()=>"mac"==i().last_actions[i().last_actions_index].type))&&t(m)}));var v=B(p,2),f=e=>{var a=Ot(),n=G(a),s=G(n,!0);J(n);var o=B(n);J(a),t((()=>{q(s,(i(),h((()=>i().last_actions[i().last_actions_index].nick)))),q(o,` - previously loaded chat was opened - ${i(),h((()=>i().last_actions[i().last_actions_index].chat_id))??""}`)})),M(e,a)};H(v,(t=>{i(),h((()=>"mac_history"==i().last_actions[i().last_actions_index].type))&&t(f)}));var b=B(v,2),w=e=>{var a=Nt(),n=G(a,!0);J(a),t((()=>q(n,(i(),h((()=>i().last_actions[i().last_actions_index].msg)))))),M(e,a)};H(b,(t=>{i(),h((()=>"info_history"==i().last_actions[i().last_actions_index].type))&&t(w)})),J(a),M(e,a)};H(m,(t=>{v(l()),i(),h((()=>0==l()&&!(i().lhcPendingRefresh||1==i().lhcConnectivityProblem||1==i().inActive||i().lhcNotice.message)&&i().last_actions.length>0))&&t(f)})),M(e,u);var b=D(_);return s(),b}customElements.define("lhc-status",C(Vt,{hide_quick_notification:{}},[],[],!1));var Bt=O('<li class="list-inline-item nav-item"><a class="nav-link"><i class="material-icons text-danger">volume_off</i></a></li>');function Gt(e,a){j(a,!1);const i=()=>k(gt,"$t",n),[n,s]=$();let o=E(!1),r=E(i()("homepage.interact_sound")),l=null,c=!1;const d=async()=>{if(l)R(o,"running"===l.state),_();else try{l=new(window.AudioContext||window.webkitAudioContext),R(o,"running"===l.state),_()}catch(t){R(r,i()("homepage.browser_no_sound")),console.error("Audio Context Error:",t)}},_=()=>{A(o)?R(r,"Sound is enabled"):R(r,c?i()("homepage.sound_disabled"):i()("homepage.interact_sound"))},u=()=>{const t=["click","keydown","touchstart"],e=async()=>{c=!0,await(async()=>{if(l)try{"suspended"===l.state&&(await l.resume(),R(o,"running"===l.state)),_()}catch(t){R(r,"Failed to enable audio"),console.error("Enable Sound Error:",t)}})(),await d(),A(o)&&t.forEach((t=>{document.removeEventListener(t,e)}))};t.forEach((t=>{document.addEventListener(t,e,{once:!0})}))};W((()=>(d(),u(),()=>{l&&l.close()}))),T();var g=F(),p=N(g),h=e=>{var a=Bt(),i=G(a);J(a),t((()=>U(i,"title",A(r)))),M(e,a)};H(p,(t=>{A(o)||t(h)})),M(e,g),D(),s()}customElements.define("audio-checker",C(Gt,{},[],[],!1));var Jt=O('<li class="list-inline-item nav-item"><a role="button" tabindex="0" aria-label="Toggle notifications"><span class="material-icons"><!></span></a></li>');function qt(e,a){j(a,!1);const i=()=>k(gt,"$t",n),[n,s]=$();let o=!1,r=E("default"),l=E(i()("homepage.enable_notifications"));const c=()=>"Notification"in window,d=()=>{(async()=>{if(c()){if("granted"!==A(r)&&"denied"!==A(r))try{const t=await Notification.requestPermission();if(R(r,t),"granted"===t){o=!0,R(l,"Notifications enabled");const t=new Notification("Notifications Enabled",{body:i()("homepage.notifications_like"),icon:WWW_DIR_JAVASCRIPT_FILES_NOTIFICATION+"/notification.png"});setTimeout((()=>t.close()),3e3)}else"denied"===t&&(o=!1,R(l,i()("homepage.notifications_blocked")))}catch(t){console.error("Error requesting notification permission:",t),R(l,"Error enabling notifications")}}else R(l,i()("homepage.notifications_not_supported"))})()};W((()=>{(()=>{if(!c())return R(r,"denied"),void R(l,i()("homepage.notifications_not_supported"));R(r,Notification.permission),"granted"===A(r)?(o=!0,R(l,"Notifications enabled")):"denied"===A(r)?(o=!1,R(l,i()("homepage.notifications_blocked"))):(o=!1,R(l,i()("homepage.enable_notifications")))})()})),T();var _=F(),u=N(_),g=e=>{var a=Jt(),i=G(a),n=G(i),s=G(n),o=t=>{var e=K("notifications");M(t,e)},c=t=>{var e=F(),a=N(e),i=t=>{var e=K("notifications_off");M(t,e)},n=t=>{var e=K("notifications");M(t,e)};H(a,(t=>{"denied"===A(r)?t(i):t(n,!1)}),!0),M(t,e)};H(s,(t=>{"granted"===A(r)?t(o):t(c,!1)})),J(n),J(i),J(a),t((()=>{ut(i,1,"nav-link status-indicator "+("granted"===A(r)?"text-success":"denied"===A(r)?"text-danger":"text-warning")),U(i,"title",A(l))})),Q("click",i,d),M(e,a)};H(u,(t=>{"granted"!==A(r)&&t(g)})),M(e,_),D(),s()}async function Qt(t){t.e&&(t.e.stopPropagation(),t.e.preventDefault());const e=await fetch(WWW_DIR_JAVASCRIPT+t.url,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json","X-CSRFToken":confLH.csrf_token}}).catch((t=>{alert("We could not change your settings! "+t)})),a=await e.json();!1===a.error?t.store.update((e=>(e[t.attr]=!e[t.attr],e))):void 0!==a.message?alert(a.message):void 0!==a.msg?alert(a.msg):alert(a)}customElements.define("browser-notification",C(qt,{},[],[],!1));var Ft=O('<a><i id="online-offline-user"> </i><!></a>');function Ut(e,a){j(a,!1);const i=()=>k(_t,"$lhcList",s),n=()=>k(gt,"$t",s),[s,o]=$();let r=P(a,"enable_shortcut",12,!1),l=P(a,"show_text",12,!1),c=P(a,"css_class",12,"nav-link");var d={get enable_shortcut(){return r()},set enable_shortcut(t){r(t),V()},get show_text(){return l()},set show_text(t){l(t),V()},get css_class(){return c()},set css_class(t){c(t),V()}};T();var _=Ft();Q("keydown",z,(t=>{r()&&(t=>{!0===t.ctrlKey&&123===t.keyCode&&(!0===lhinst.disableSync&&lhinst.channel?(ee.emitEvent("svelteWentActive"),lhinst.channel.postMessage({action:"went_active",args:{}})):Qt({store:_t,e:t,attr:"hideOnline",url:"user/setoffline/"+(1==!i().hideOnline?"true":"false")}))})(t)})),U(_,"href","#");var u=G(_),g=G(u,!0);J(u);var p=B(u),m=e=>{var a=F(),s=N(a),o=e=>{var a=K();t((t=>q(a,t)),[()=>(n(),h((()=>n()("homepage.status_offline"))))]),M(e,a)},r=e=>{var a=K();t((t=>q(a,t)),[()=>(n(),h((()=>n()("homepage.status_online"))))]),M(e,a)};H(s,(t=>{i(),h((()=>1==i().hideOnline))?t(o):t(r,!1)})),M(e,a)};H(p,(t=>{l()&&t(m)})),J(_),t((t=>{ut(_,1,pt(c())),ut(u,1,(i(),h((()=>"material-icons "+(!0===i().hideOnline?"text-danger":"text-success"))))),U(u,"title",t),q(g,(i(),h((()=>1==i().hideOnline?"flash_off":"flash_on"))))}),[()=>(n(),h((()=>n()("homepage.change_online_status"))))]),Q("click",_,(t=>Qt({store:_t,e:t,attr:"hideOnline",url:"user/setoffline/"+(1==!i().hideOnline?"true":"false")}))),M(e,_);var v=D(d);return o(),v}customElements.define("change-online-status",C(Ut,{enable_shortcut:{},show_text:{},css_class:{}},[],[],!1));var Kt=O('<a class="dropdown-item ps-2"><i class="material-icons"> </i><!></a>');function zt(e,a){j(a,!1);const i=()=>k(_t,"$lhcList",s),n=()=>k(gt,"$t",s),[s,o]=$();T();var r=Kt();U(r,"href","#");var l=G(r),c=G(l,!0);J(l);var d=B(l),_=e=>{var a=K();t((t=>q(a,t)),[()=>n()("homepage.always_online_mode")]),M(e,a)},u=e=>{var a=K();t((t=>q(a,t)),[()=>n()("homepage.always_online_activity")]),M(e,a)};H(d,(t=>{1==i().alwaysOnline?t(_):t(u,!1)})),J(r),t((t=>{U(r,"title",t),q(c,1==i().hideOnline?"flash_off":1==i().alwaysOnline?"toggle_on":"toggle_off")}),[()=>n()("homepage.always_online")]),Q("click",r,(t=>Qt({store:_t,e:t,attr:"alwaysOnline",url:"user/setalwaysonline/"+(1==!i().alwaysOnline?"true":"false")}))),M(e,r),D(),o()}customElements.define("change-always-online",C(zt,{},[],[],!1));var Xt=O('<a><i id="vi-in-user" class="material-icons"> </i><!></a>');function Yt(e,a){j(a,!1);const i=()=>k(_t,"$lhcList",s),n=()=>k(gt,"$t",s),[s,o]=$();let r=P(a,"css_class",12,"dropdown-item ps-2"),l=P(a,"hide_text",12,!1);var c={get css_class(){return r()},set css_class(t){r(t),V()},get hide_text(){return l()},set hide_text(t){l(t),V()}};T();var d=Xt();U(d,"href","#");var _=G(d),u=G(_,!0);J(_);var g=B(_),p=e=>{var a=F(),s=N(a),o=e=>{var a=K();t((t=>q(a,t)),[()=>(n(),h((()=>n()("homepage.invisible"))))]),M(e,a)},r=e=>{var a=K();t((t=>q(a,t)),[()=>(n(),h((()=>n()("homepage.visible"))))]),M(e,a)};H(s,(t=>{i(),h((()=>1==i().hideInvisible))?t(o):t(r,!1)})),M(e,a)};H(g,(t=>{l()||t(p)})),J(d),t((t=>{ut(d,1,pt(r())),U(_,"title",t),q(u,(i(),h((()=>1==i().hideInvisible?"visibility_off":"visibility"))))}),[()=>(n(),h((()=>n()("homepage.change_visibility"))))]),Q("click",d,(t=>Qt({store:_t,e:t,attr:"hideInvisible",url:"user/setinvisible/"+(1==!i().hideInvisible?"true":"false")}))),M(e,d);var m=D(c);return o(),m}customElements.define("change-visibility-mode",C(Yt,{css_class:{},hide_text:{}},[],[],!1));var Zt=O('<div class="dropdown-item"><div class="input-group input-group-sm"><input type="text" class="form-control" aria-describedby="inputGroupPrepend" required/> <button class="btn btn-secondary" type="button"><i class="material-icons me-0">chat</i></button></div></div>');function te(e,a){j(a,!1);const i=()=>k(_t,"$lhcList",s),n=()=>k(gt,"$t",s),[s,o]=$();T();var r=Zt(),l=G(r),c=G(l);X(c);var d=B(c,2);J(l),J(r),t(((t,e)=>{U(c,"placeholder",t),U(d,"title",e)}),[()=>n()("front_default.chat_id_to_open"),()=>n()("front_default.open_a_chat")]),ht(c,(()=>i().chat_to_open),(t=>L(_t,h(i).chat_to_open=t,h(i)))),Q("keyup",c,(t=>{13===t.keyCode&&ee.emitEvent("angularStartChatbyId",[i().chat_to_open])})),Q("click",d,(t=>ee.emitEvent("angularStartChatbyId",[i().chat_to_open]))),M(e,r),D(),o()}function ae(e,a){j(a,!1);const i=()=>k(_t,"$lhcList",n),[n,s]=$();let o=P(a,"type",12,"pending_chats");var r={get type(){return o()},set type(t){o(t),V()}};T(),Y();var l=K();t((()=>q(l,`(${i(),v(o()),h((()=>!0===i().lhcCoreLoaded&&i()[o()]&&i()[o()].list?i()[o()].list.length:0))??""})`))),M(e,l);var c=D(r);return s(),c}customElements.define("lhc-open-chat",C(te,{},[],[],!1)),customElements.define("lhc-chats-counter",C(ae,{type:{}},[],[],!1));var ie=O('<span><span class="material-icons">progress_activity</span> </span>'),ne=O('<span class="text-danger"><span class="material-icons">wifi_off</span> </span>'),se=O("<span> </span>"),oe=O('<span class="text-danger"><span class="material-icons">sync_problem</span> </span>'),re=O("<span><span> </span> </span>"),le=O("<!> <!>",1),ce=O('<div class="text-danger fs14"><span class="material-icons">wifi_off</span> </div>'),de=O('<div class="py-2 text-center fs12"><!> <!> <!></div>');function _e(e,a){j(a,!1);const i=()=>k(_t,"$lhcList",s),n=()=>k(gt,"$t",s),[s,o]=$();let r=P(a,"type",12,"pending_chats"),l=E(navigator.onLine),c=E(!0===lh?.nodejsHelperOptions?.socketConnected||!lh.nodejsHelperOptions&&null),d=!1,_=!1;async function u(){try{if(!navigator.onLine||!0===_)return;_=!0;const t=await fetch(WWW_DIR_JAVASCRIPT+"chat/verifytoken",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json","X-CSRFToken":confLH.csrf_token}});if(!t.ok)throw new Error("Network response was not OK ["+t.status+"] ["+t.statusText+"]");(await t.json()).verified||document.location.reload(),ee.emitEvent("angularLoadChatList"),_=!1}catch(t){document.location.reload()}}function g(){R(l,navigator.onLine),A(l)&&u()}ee.addListener("socketConnected",(()=>{R(c,!0),!1!==d?u():d=!0})),ee.addListener("socketDisconnected",(()=>{R(c,!1),setTimeout((()=>{u()}),6e4)})),W((()=>{document.addEventListener("visibilitychange",(()=>{document.hidden||u()})),window.addEventListener("focus",u),window.addEventListener("online",g),window.addEventListener("offline",g)}));var p={get type(){return r()},set type(t){r(t),V()}};T();var m=de(),v=G(m),f=e=>{var a=ie(),s=B(G(a));J(a),t((t=>{U(a,"title",t),q(s,`${i(),h((()=>Math.floor(Date.now()/1e3)-i().lhcUpdatedAtActivity))??""} s.`)}),[()=>(n(),h((()=>n()("homepage.lau"))))]),M(e,a)};H(v,(t=>{i(),h((()=>i().lhcUpdatedAtActivity>0))&&t(f)}));var b=B(v,2),w=e=>{var a=ne(),i=B(G(a),1,!0);J(a),t((t=>q(i,t)),[()=>(n(),h((()=>n()("homepage.no_connection"))))]),M(e,a)},y=e=>{var a=le(),s=N(a),o=e=>{var a=se(),i=G(a,!0);J(a),t((t=>{ut(a,1,"material-icons"+(A(c)?"":" text-warning")),U(a,"title",t),q(i,A(c)?"bigtop_updates":"signal_disconnected")}),[()=>(n(),h((()=>n()("homepage.node_js_status"))))]),M(e,a)};H(s,(t=>{null!==A(c)&&t(o)}));var r=B(s,2),l=e=>{var a=oe(),i=B(G(a),1,!0);J(a),t((t=>q(i,t)),[()=>(n(),h((()=>n()("homepage.sync_blocked"))))]),M(e,a)},d=e=>{var a=re(),s=G(a);ut(s,1,"material-icons");var o=G(s,!0);J(s);var r=B(s,1,!0);J(a),t((t=>{ut(a,1,pt((i(),h((()=>i().lhcConnectivityProblem?" text-danger":" text-muted"))))),U(a,"title",t),q(o,(i(),h((()=>i().lhcListRequestInProgress?"sync":i().lhcConnectivityProblem?"sync_problem":"history")))),q(r,(i(),h((()=>i().lhcUpdatedAt))))}),[()=>(n(),h((()=>n()("homepage.last_updated_at"))))]),M(e,a)};H(r,(t=>{i(),h((()=>i().lhcBLockSync))?t(l):t(d,!1)})),M(e,a)};H(b,(t=>{A(l)?t(y,!1):t(w)}));var x=B(b,2),C=e=>{var a=F(),s=N(a),o=t=>{var e=F();yt(N(e),(()=>(i(),h((()=>i().lhcMessageConnection))))),M(t,e)},r=e=>{var a=ce(),i=B(G(a),1,!0);J(a),t((t=>q(i,t)),[()=>(n(),h((()=>n()("homepage.connection_explain"))))]),M(e,a)};H(s,(t=>{i(),h((()=>i().lhcMessageConnection))?t(o):t(r,!1)})),M(e,a)};H(x,(t=>{A(l),i(),h((()=>!A(l)||i().lhcConnectivityProblem))&&t(C)})),J(m),M(e,m);var L=D(p);return o(),L}customElements.define("lhc-connection-status",C(_e,{type:{}},[],[],!1));var ue=O("<i> </i>"),ge=O("<i> </i>"),pe=O('<span class="text-success"> </span>'),he=O("<a><i>account_box</i> <!></a> <a><i>flash_on</i> <!></a> <!>",1),me=O('<i class="material-icons">&#xE84F;</i>'),ve=O('<a><i>face</i> <i class="material-icons"> </i></a>'),fe=O('<a><i class="material-icons">location_on</i> <i> </i></a>&nbsp;&nbsp;&nbsp;<a><i class="material-icons">face</i> <i> </i></a>',1),be=O('<i class="material-icons">group</i>'),we=O('<i class="material-icons"> </i><!>',1),ye=O('<a class="text-muted" title="Remove sort"><span class="material-icons">close</span></a>'),xe=O("| <a><i> </i></a> <!>",1),Ce=O("<i> </i>"),je=O("<a><i> </i></a>"),ke=O('<th width="20%"><!> <!></th>'),Le=O('<th width="25%"><span class="material-icons">label</span><!></th>'),We=O('<i class="material-icons chat-pending">chat</i>'),Se=O('<i class="material-icons">assignment_ind</i>'),Ae=O('<i class="material-icons">access_time</i>'),Ee=O('<a><i>access_time</i><i class="material-icons"> </i></a>'),Ie=O('<i class="material-icons">access_time</i>'),Te=O('<i class="material-icons">access_time</i>'),De=O("<a><i> </i></a> <a><i> </i></a>",1),$e=O('<i class="material-icons">access_time</i>'),Re=O('<i class="material-icons">access_time</i>'),Pe=O("<th><!> <!> <!> <!> <!> <!> <!> <!> <!></th>"),Oe=O("<i>sms</i>"),Ne=O("<i>chat</i>"),He=O("<a><!> <i> </i></a>"),Me=O('<th width="15%"><a><!> <i> </i></a> <!></th>'),Ve=O('<th width="20%"><a><i> </i></a></th>'),Be=O('<th width="8%"><i class="material-icons chat-active">chat</i></th> <th width="8%"><i class="material-icons chat-active">android</i></th>',1),Ge=O('<th width="20%"><i class="material-icons">face</i><!></th>'),Je=O('<i class="material-icons text-info">donut_large</i>'),qe=O('<i class="material-icons">access_time</i>'),Qe=O("<a><i> </i></a>"),Fe=O('<i class="material-icons">home</i><!>',1),Ue=O('<div class="float-end expand-actions"><a class="text-muted disable-select"><i class="material-icons">expand</i></a> <a class="text-muted disable-select"><i class="material-icons">compress</i></a></div>'),Ke=O("<th><!> <!> <!></th>"),ze=O('<th width="20%"><i class="material-icons text-info">support_agent</i> <div class="float-end expand-actions"><a class="text-muted disable-select"><i class="material-icons">expand</i></a> <a class="text-muted disable-select"><i class="material-icons">compress</i></a></div></th>'),Xe=O("<thead><tr><th><!> <!> <!></th><!><!><!><!><!><!><!><!><!></tr></thead>"),Ye=O('<a href="#"><span> </span> </a>'),Ze=O("<span> </span> ",1),ta=O('<a href="#"> </a>'),ea=O('<tr><td><div class="abbr-list"><a class="d-block"> </a></div></td><td><a class="d-block"> </a></td><td><a class="d-block"> </a></td><td><a class="d-block"> </a></td><td nowrap=""><!></td><td><!></td></tr>'),aa=O("<tbody></tbody>"),ia=O('<a href="#"><span> </span> </a>'),na=O("<span> </span> ",1),sa=O('<a href="#"> </a>'),oa=O('<tr><td><div class="abbr-list"><a class="d-block"> </a></div></td><td><a class="d-block"> </a></td><td><a class="d-block"> </a></td><td><a class="d-block"> </a></td><td nowrap=""><!></td><td><!></td></tr>'),ra=O('<thead><tr><th width="40%"><i class="material-icons">home</i></th><th width="12%"><i class="material-icons chat-pending">chat</i></th><th width="12%"><i class="material-icons chat-active">chat</i></th><th width="12%"><i class="material-icons chat-active">android</i></th><th width="11%"><i class="material-icons text-info">donut_large</i></th><th width="11%"><i class="material-icons text-info">support_agent</i></th></tr></thead> <tbody></tbody>',1),la=O("<!> <!>",1),ca=O("<span><img/></span>"),da=O('<tr><td><!> <a class="material-icons">open_in_new</a> <a class="material-icons">info_outline</a> <a> </a></td><td nowrap="nowrap" colspan="2"><div class="abbr-list"> </div></td></tr>'),_a=O("<span><img/></span>"),ua=O('<tr><td><!> <a class="material-icons">open_in_new</a> <a class="material-icons">info_outline</a> <a> </a></td><td nowrap="nowrap" colspan="2"><div class="abbr-list"> </div></td></tr>'),ga=O('<thead><tr><th width="60%"><i title="Visitor" class="material-icons">face</i> </th><th width="40%" colspan="2"><i class="material-icons">access_time</i></th></tr></thead> <tbody></tbody>',1),pa=O("<tbody></tbody> <!>",1),ha=O("<span><img/></span>"),ma=O("<span> </span>"),va=O("<span> </span>"),fa=O('<img class="rounded-circle" alt="" width="20"/>'),ba=O('<a href="#"><i class="material-icons me-0">chat</i></a>'),wa=O('<i class="material-icons me-0"> </i>'),ya=O("<i> </i>"),xa=O("<i> </i>"),Ca=O("<span> </span>"),ja=O('<a href="#"> <!></a>'),ka=O(", <span> </span>",1),La=O("<span> </span><!>",1),Wa=O('<span class="material-icons text-danger">wifi_off</span>'),Sa=O("<!> <!> <!> <!> <!> <!>",1),Aa=O('<i class="material-icons text-warning">whatshot</i>'),Ea=O('<i class="material-icons">account_balance</i>'),Ia=O('<a class="d-block action-image"><!> <i class="material-icons"> </i><!> </a>'),Ta=O("<span> </span>"),Da=O('<a class="material-icons float-end">delete</a>'),$a=O('<a class="material-icons me-0">reply</a>'),Ra=O('<i title="Pending chat" class="material-icons me-0 chat-unread">&#xE80E;</i>'),Pa=O("<i>mail_outline</i>"),Oa=O('<!> <a class="material-icons">info_outline</a> <!> <span> </span>',1),Na=O('<a class="material-icons me-0">info_outline</a>'),Ha=O('<i class="material-icons me-0">mail</i>'),Ma=O('<i class="material-icons text-warning me-0">whatshot</i>'),Va=O("<span> </span> <!>",1),Ba=O('<i class="material-icons me-0 text-danger">feedback</i>'),Ga=O("<img/>"),Ja=O('<i class="material-icons me-0"> </i>'),qa=O('<span class="material-icons me-0"> </span>'),Qa=O("<span> </span><small> </small>",1),Fa=O('<span class="badge bg-info fs12 me-1"> </span>'),Ua=O("<!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!>",1),Ka=O('<div class="abbr-list"> </div>'),za=O("<td></td>"),Xa=O('<span class="badge bg-info fs12 me-1"> </span>'),Ya=O("<td><!></td>"),Za=O('<button class="btn btn-xs btn-outline-info">Accept invite</button>'),ti=O('<button class="btn btn-xs btn-outline-danger">Reject invite</button>'),ei=O('<button class="btn btn-xs btn-outline-info">Join public chat</button>'),ai=O('<button class="btn btn-xs btn-outline-secondary">Member</button>'),ii=O("<!> <!> <!> <!>",1),ni=O('<div class="abbr-list"> </div>'),si=O('<div class="abbr-list"> </div>'),oi=O('<div class="abbr-list"> </div>'),ri=O('<div class="abbr-list"> </div>'),li=O('<div class="abbr-list"><span> </span><!></div>'),ci=O('<div class="abbr-list"> </div>'),di=O('<i class="material-icons chat-unread">&#xE80E;</i>'),_i=O('<div class="abbr-list"><!><span> </span><!></div>'),ui=O("<td><!> <!> <!> <!> <!> <!> <!> <!></td>"),gi=O("<abbr>l.c</abbr> <abbr>f.s</abbr>",1),pi=O("<td> <!></td>"),hi=O('<td><div class="abbr-list"> </div></td>'),mi=O("<td> </td>"),vi=O('<div class="abbr-list"> </div>'),fi=O('<div class="abbr-list"> </div>'),bi=O('<a class="text-primary"><i class="material-icons">donut_large</i> </a>'),wi=O('<div class="abbr-list"><!></div>'),yi=O("<td><!></td>"),xi=O('<tr><td><div class="abbr-list"><!> <!> <!></div></td><!><!><!><!><!><!><!></tr>'),Ci=O("<option> </option>"),ji=O('<tr><td><input type="text" name="" class="form-control form-control-sm"/></td><td><select class="form-control form-control-sm"><option> </option><!></select></td><td><button type="button" class="btn btn-sm btn-outline-secondary w-100 d-block"> </button></td></tr>'),ki=O("<tbody><!><!></tbody>"),Li=O("<table><!><!></table>");function Wi(e,a){j(a,!1);const i=()=>k(c(),"$lhcList",s),n=()=>k(gt,"$t",s),[s,o]=$();let r=P(a,"sort_identifier",12,null),l=P(a,"type",12,null),c=P(a,"lhcList",12,null),d=P(a,"www_dir_flags",12,null),_=P(a,"no_additional_column",12,!1),u=P(a,"hide_third_column",12,!1),g=P(a,"hide_2_column",12,!1),p=P(a,"hide_ac_op_icon",12,!1),m=P(a,"hide_ac_stats",12,!1),f=P(a,"hide_ac_sort",12,!1),b=P(a,"hide_op_avatar",12,!1),w=P(a,"custom_visitor_title",12,null),y=P(a,"custom_visitor_icon",12,null),x=P(a,"show_visitor_title",12,!1),C=P(a,"no_chat_preview",12,!1),W=P(a,"show_username_always",12,!1),S=P(a,"show_always_subject",12,!1),E=P(a,"show_department_title",12,!1),I=P(a,"show_subject_title",12,!1),R=P(a,"show_username_title",12,!1),O=P(a,"no_expand",12,!1),z=P(a,"panel_id",12,null),nt=P(a,"permissions",28,(()=>[])),st=P(a,"custom_icons",28,(()=>[])),ot=P(a,"custom_sort_icons",28,(()=>[])),rt=P(a,"column_2_width",12,"20%"),lt=P(a,"column_1_width",12,"40%"),ct=P(a,"column_3_width",12,"20%"),dt=P(a,"additional_sort",12,""),_t=P(a,"override_item_open",12,null),ft=!_t()&&"transfer_chats"!==l()&&"group_chats"!==l()&&"online_op"!==l()&&"depgroups_stats"!==l(),bt=!_t()&&"my_mails"!==l()&&"active_mails"!==l()&&"pending_mails"!==l()&&"alarm_mails"!==l();function yt(t,e,a){let i=[];return Object.entries(e).forEach((([e,n])=>{(!1===a&&!t[n]||!0===a&&t[n])&&i.push(e)})),i.join(" ")}var xt={get sort_identifier(){return r()},set sort_identifier(t){r(t),V()},get type(){return l()},set type(t){l(t),V()},get lhcList(){return c()},set lhcList(t){c(t),V()},get www_dir_flags(){return d()},set www_dir_flags(t){d(t),V()},get no_additional_column(){return _()},set no_additional_column(t){_(t),V()},get hide_third_column(){return u()},set hide_third_column(t){u(t),V()},get hide_2_column(){return g()},set hide_2_column(t){g(t),V()},get hide_ac_op_icon(){return p()},set hide_ac_op_icon(t){p(t),V()},get hide_ac_stats(){return m()},set hide_ac_stats(t){m(t),V()},get hide_ac_sort(){return f()},set hide_ac_sort(t){f(t),V()},get hide_op_avatar(){return b()},set hide_op_avatar(t){b(t),V()},get custom_visitor_title(){return w()},set custom_visitor_title(t){w(t),V()},get custom_visitor_icon(){return y()},set custom_visitor_icon(t){y(t),V()},get show_visitor_title(){return x()},set show_visitor_title(t){x(t),V()},get no_chat_preview(){return C()},set no_chat_preview(t){C(t),V()},get show_username_always(){return W()},set show_username_always(t){W(t),V()},get show_always_subject(){return S()},set show_always_subject(t){S(t),V()},get show_department_title(){return E()},set show_department_title(t){E(t),V()},get show_subject_title(){return I()},set show_subject_title(t){I(t),V()},get show_username_title(){return R()},set show_username_title(t){R(t),V()},get no_expand(){return O()},set no_expand(t){O(t),V()},get panel_id(){return z()},set panel_id(t){z(t),V()},get permissions(){return nt()},set permissions(t){nt(t),V()},get custom_icons(){return st()},set custom_icons(t){st(t),V()},get custom_sort_icons(){return ot()},set custom_sort_icons(t){ot(t),V()},get column_2_width(){return rt()},set column_2_width(t){rt(t),V()},get column_1_width(){return lt()},set column_1_width(t){lt(t),V()},get column_3_width(){return ct()},set column_3_width(t){ct(t),V()},get additional_sort(){return dt()},set additional_sort(t){dt(t),V()},get override_item_open(){return _t()},set override_item_open(t){_t(t),V()}};T();var Ct=Li();let jt;var kt=G(Ct),Lt=e=>{var a=Xe(),s=G(a),o=G(s),d=G(o),b=e=>{var a=he(),s=N(a),o=G(s);let d;var _=B(o,2),u=e=>{var a=ue();let n;var s=G(a,!0);J(a),t((()=>{n=ut(a,1,"material-icons",null,n,{"text-muted":"onn_dsc"!=i().toggleWidgetData[r()]&&"onn_asc"!=i().toggleWidgetData[r()]}),q(s,(i(),v(r()),h((()=>"onn_dsc"==i().toggleWidgetData[r()]||"onn_asc"!=i().toggleWidgetData[r()]?"trending_up":"trending_down"))))})),M(e,a)};H(_,(t=>{m()||t(u)})),J(s);var g=B(s,2),p=G(g);let f;var b=B(p,2),w=e=>{var a=ge();let n;var s=G(a,!0);J(a),t((()=>{n=ut(a,1,"material-icons",null,n,{"text-muted":"onl_dsc"!=i().toggleWidgetData[r()]&&"onl_asc"!=i().toggleWidgetData[r()]}),q(s,(i(),v(r()),h((()=>"onl_dsc"==i().toggleWidgetData[r()]||"onl_asc"!=i().toggleWidgetData[r()]?"trending_up":"trending_down"))))})),M(e,a)};H(b,(t=>{m()||t(w)})),J(g);var y=B(g,2),x=e=>{var a=pe(),s=G(a,!0);J(a),t((t=>{U(a,"title",t),q(s,(i(),v(l()),h((()=>i()[l()].op_on))))}),[()=>(n(),h((()=>n()("widget.online"))))]),M(e,a)};H(y,(t=>{"online_op"==l()&&t(x)})),t(((t,e)=>{U(s,"title",t),d=ut(o,1,"material-icons chat-active",null,d,{"text-muted":"onn_dsc"!=i().toggleWidgetData[r()]&&"onn_asc"!=i().toggleWidgetData[r()]}),U(g,"title",e),f=ut(p,1,"material-icons chat-active",null,f,{"text-muted":"onl_dsc"!=i().toggleWidgetData[r()]&&"onl_asc"!=i().toggleWidgetData[r()]})}),[()=>(n(),h((()=>n()("widget.sort_by_online_name")))),()=>(n(),h((()=>n()("widget.sort_by_online_status"))))]),Q("click",s,(t=>vt.toggleWidgetSort(c(),r(),"onn_dsc","onn_asc",!0))),Q("click",g,(t=>vt.toggleWidgetSort(c(),r(),"onl_dsc","onl_asc",!0))),M(e,a)},C=e=>{var a=F(),s=N(a),o=e=>{var a=me();t((t=>U(a,"title",t)),[()=>(n(),h((()=>n()("widget.dep_group"))))]),M(e,a)},d=e=>{var a=F(),s=N(a),o=e=>{var a=ve(),s=G(a);let o;var l=B(s,2),d=G(l,!0);J(l),J(a),t(((t,e)=>{U(s,"title",t),o=ut(s,1,"chat-active material-icons",null,o,{"text-muted":"id_dsc"!=i().toggleWidgetData[r()]&&"id_asc"!=i().toggleWidgetData[r()]}),U(l,"title",e),q(d,(i(),v(r()),h((()=>"id_dsc"===i().toggleWidgetData[r()]?"trending_up":"trending_down"))))}),[()=>(n(),h((()=>n()("widget.visitor")))),()=>(n(),h((()=>n()("widget.sort_pending"))))]),Q("click",a,(t=>vt.toggleWidgetSort(c(),r(),"id_dsc","id_asc",!0))),M(e,a)},d=e=>{var a=F(),s=N(a),o=e=>{var a=fe(),s=N(a),o=G(s),l=B(o,2);let d;var _=G(l,!0);J(l),J(s);var u=B(s,2),g=G(u),p=B(g,2);let m;var f=G(p,!0);J(p),J(u),t(((t,e,a,n)=>{U(o,"title",t),U(l,"title",e),d=ut(l,1,"material-icons",null,d,{"text-muted":"loc_asc"!=i().toggleWidgetData[r()]&&"loc_dsc"!=i().toggleWidgetData[r()]}),q(_,(i(),v(r()),h((()=>"loc_dsc"==i().toggleWidgetData[r()]||"loc_asc"!=i().toggleWidgetData[r()]?"trending_up":"trending_down")))),U(g,"title",a),U(p,"title",n),m=ut(p,1,"material-icons",null,m,{"text-muted":"u_asc"!=i().toggleWidgetData[r()]&&"u_dsc"!=i().toggleWidgetData[r()]}),q(f,(i(),v(r()),h((()=>"u_dsc"==i().toggleWidgetData[r()]||"u_asc"!=i().toggleWidgetData[r()]?"trending_up":"trending_down"))))}),[()=>(n(),h((()=>n()("widget.location")))),()=>(n(),h((()=>n()("widget.sort_by_location")))),()=>(n(),h((()=>n()("widget.visitor")))),()=>(n(),h((()=>n()("widget.sort_by_nick"))))]),Q("click",s,(t=>vt.toggleWidgetSort(c(),r(),"loc_dsc","loc_asc",!0))),Q("click",u,(t=>vt.toggleWidgetSort(c(),r(),"u_dsc","u_asc",!0))),M(e,a)},d=e=>{var a=F(),i=N(a),s=e=>{var a=be();t((t=>U(a,"title",t)),[()=>(n(),h((()=>n()("group_chat.group_name"))))]),M(e,a)},o=e=>{var a=we(),i=N(a),s=G(i,!0);J(i);var o=B(i),r=e=>{var a=K();t((t=>q(a,t)),[()=>(n(),v(w()),h((()=>n()("widget."+(w()?w():"visitor")))))]),M(e,a)};H(o,(t=>{x()&&t(r)})),t((t=>{U(i,"title",t),q(s,y()?y():"face")}),[()=>(n(),v(w()),h((()=>n()("widget."+(w()?w():"visitor")))))]),M(e,a)};H(i,(t=>{"group_chats"==l()?t(s):t(o,!1)}),!0),M(e,a)};H(s,(t=>{"active_chats"==l()?t(o):t(d,!1)}),!0),M(e,a)};H(s,(t=>{"pending_chats"==l()?t(o):t(d,!1)}),!0),M(e,a)};H(s,(t=>{"depgroups_stats"==l()?t(o):t(d,!1)}),!0),M(e,a)};H(d,(t=>{"online_op"==l()?t(b):t(C,!1)}));var j=B(d,2),k=e=>{var a=K();t((t=>q(a,t)),[()=>(n(),h((()=>n()("widget.transferred_to_you"))))]),M(e,a)};H(j,(t=>{"transfer_chats"==l()&&t(k)}));var L=B(j,2);Z(L,1,ot,tt,((e,a)=>{Y();var n=xe(),s=B(N(n)),o=G(s),r=G(o,!0);J(o),J(s);var l=B(s,2),d=t=>{var e=ye();Q("click",e,(t=>vt.toggleWidgetSort(c(),A(a).sort_identifier,"","",!0))),M(t,e)};H(l,(t=>{i(),A(a),h((()=>i().toggleWidgetData[A(a).sort_identifier]==A(a).sort_options[0]||i().toggleWidgetData[A(a).sort_identifier]==A(a).sort_options[1]))&&t(d)})),t((()=>{U(o,"title",(A(a),h((()=>A(a).title)))),ut(o,1,(i(),A(a),h((()=>"material-icons chat-active "+(i().toggleWidgetData[A(a).sort_identifier]!=A(a).sort_options[1]&&i().toggleWidgetData[A(a).sort_identifier]!=A(a).sort_options[0]?"text-muted":""))))),q(r,(i(),A(a),h((()=>i().toggleWidgetData[A(a).sort_identifier]==A(a).sort_options[1]?A(a)["sort_icon_"+A(a).sort_options[1]]:A(a)["sort_icon_"+A(a).sort_options[0]]))))})),Q("click",s,(t=>vt.toggleWidgetSort(c(),A(a).sort_identifier,A(a).sort_options[0],A(a).sort_options[1],!0))),M(e,n)})),J(o);var T=B(o),D=e=>{var a=F(),n=N(a);Z(n,1,(()=>(i(),h((()=>i().additionalColumns)))),tt,((e,a)=>{var n=F(),s=N(n),o=e=>{var n=ke(),s=G(n),o=e=>{var n=Ce();let s;var o=G(n,!0);J(n),t((()=>{s=ut(n,1,"material-icons chat-active",null,s,{"text-muted":!dt()||!A(a).sorten||i().toggleWidgetData[dt()]!=A(a).items[0]+"_asc"&&i().toggleWidgetData[dt()]!=A(a).items[0]+"_dsc"}),q(o,(A(a),h((()=>A(a).icon))))})),M(e,n)};H(s,(t=>{A(a),h((()=>""!==A(a).icon))&&t(o)}));var r=B(s),l=B(r),d=e=>{var n=je(),s=G(n);let o;var r=G(s,!0);J(s),J(n),t((()=>{o=ut(s,1,"material-icons",null,o,{"text-muted":i().toggleWidgetData[dt()]!=A(a).items[0]+"_asc"&&i().toggleWidgetData[dt()]!=A(a).items[0]+"_dsc"}),q(r,(i(),v(dt()),A(a),h((()=>i().toggleWidgetData[dt()]==A(a).items[0]+"_dsc"||i().toggleWidgetData[dt()]!=A(a).items[0]+"_asc"?"trending_up":"trending_down"))))})),Q("click",n,(t=>vt.toggleWidgetSort(c(),dt(),A(a).items[0]+"_dsc",A(a).items[0]+"_asc",!0))),M(e,n)};H(l,(t=>{v(dt()),A(a),h((()=>""!==dt()&&A(a).sorten))&&t(d)})),J(n),t((()=>q(r,`${A(a),h((()=>A(a).name))??""} `))),M(e,n)};H(s,(t=>{A(a),h((()=>1==A(a).cenabl&&!A(a).iconm))&&t(o)})),M(e,n)})),M(e,a)};H(T,(t=>{v(_()),i(),h((()=>!1===_()&&ft&&i().additionalColumns))&&t(D)}));var $=B(T),P=e=>{var a=Le(),i=G(a),s=B(i),o=e=>{var a=K();t((t=>q(a,t)),[()=>(n(),h((()=>n()("widget.subject"))))]),M(e,a)};H(s,(t=>{I()&&t(o)})),J(a),t((t=>U(i,"title",t)),[()=>(n(),h((()=>n()("widget.subject"))))]),M(e,a)};H($,(t=>{("subject_chats"==l()||"alarm_mails"==l()||S())&&t(P)}));var V=B($),X=e=>{var a=Pe(),s=G(a),o=e=>{var a=We();t((t=>U(a,"title",t)),[()=>(n(),h((()=>n()("widget_title.pending_chats"))))]),M(e,a)};H(s,(t=>{"depgroups_stats"===l()&&t(o)}));var d=B(s,2),_=e=>{var a=Se();t((t=>U(a,"title",t)),[()=>(n(),h((()=>n()("widget.last_assignment_ago"))))]),M(e,a)};H(d,(t=>{"online_op"===l()&&t(_)}));var u=B(d,2),g=e=>{var a=Ae();t((t=>U(a,"title",t)),[()=>(n(),h((()=>n()("widget.wait_time"))))]),M(e,a)};H(u,(t=>{"my_mails"!==l()&&"alarm_mails"!==l()&&"active_mails"!==l()&&"pending_mails"!==l()||t(g)}));var p=B(u,2),m=e=>{var a=Ee(),s=G(a);let o;var l=B(s),d=G(l,!0);J(l),J(a),t(((t,e)=>{U(s,"title",t),o=ut(s,1,"material-icons chat-active",null,o,{"text-muted":"wtime_dsc"!=i().toggleWidgetData[r()]&&"wtime_asc"!=i().toggleWidgetData[r()]}),U(l,"title",e),q(d,(i(),v(r()),h((()=>"wtime_dsc"===i().toggleWidgetData[r()]?"trending_up":"trending_down"))))}),[()=>(n(),h((()=>n()("widget.wait_time")))),()=>(n(),h((()=>n()("widget.sort_wait_time"))))]),Q("click",a,(t=>vt.toggleWidgetSort(c(),r(),"wtime_dsc","wtime_asc",!0))),M(e,a)};H(p,(t=>{"pending_chats"===l()&&t(m)}));var f=B(p,2),b=e=>{var a=Ie();t((t=>U(a,"title",t)),[()=>(n(),h((()=>n()("widget.last_message"))))]),M(e,a)};H(f,(t=>{"my_chats"===l()&&t(b)}));var w=B(f,2),y=e=>{var a=Te();t((t=>U(a,"title",t)),[()=>(n(),h((()=>n()("widget.time_ago"))))]),M(e,a)};H(w,(t=>{"unread_chats"===l()&&t(y)}));var x=B(w,2),C=e=>{var a=De(),s=N(a),o=G(s);let l;var d=G(o,!0);J(o),J(s);var _=B(s,2),u=G(_);let g;var p=G(u,!0);J(u),J(_),t(((t,e)=>{U(o,"title",t),l=ut(o,1,"material-icons",null,l,{"text-muted":"lmt_asc"!=i().toggleWidgetData[r()]&&"lmt_dsc"!=i().toggleWidgetData[r()]}),q(d,(i(),v(r()),h((()=>"lmt_dsc"==i().toggleWidgetData[r()]||"lmt_asc"!=i().toggleWidgetData[r()]?"trending_up":"trending_down")))),U(u,"title",e),g=ut(u,1,"material-icons",null,g,{"text-muted":"id_asc"!=i().toggleWidgetData[r()]&&"id_dsc"!=i().toggleWidgetData[r()]}),q(p,(i(),v(r()),h((()=>"id_dsc"==i().toggleWidgetData[r()]||"id_asc"!=i().toggleWidgetData[r()]?"trending_up":"trending_down"))))}),[()=>(n(),h((()=>n()("widget.sort_by_last_msg_time")))),()=>(n(),h((()=>n()("widget.sort_by_start_time"))))]),Q("click",s,(t=>vt.toggleWidgetSort(c(),r(),"lmt_dsc","lmt_asc",!0))),Q("click",_,(t=>vt.toggleWidgetSort(c(),r(),"id_dsc","id_asc",!0))),M(e,a)};H(x,(t=>{"active_chats"!==l()&&"bot_chats"!==l()||t(C)}));var j=B(x,2),k=e=>{var a=$e();t((t=>U(a,"title",t)),[()=>(n(),h((()=>n()("widget.time_since_last_msg"))))]),M(e,a)};H(j,(t=>{"subject_chats"==l()&&t(k)}));var L=B(j,2),W=e=>{var a=Re();t((t=>U(a,"title",t)),[()=>(n(),h((()=>n()("widget.created_at"))))]),M(e,a)};H(L,(t=>{"transfer_chats"==l()&&t(W)})),J(a),t((()=>U(a,"width",rt()))),M(e,a)};H(V,(t=>{g()||t(X)}));var at=B(V),it=e=>{var a=Me(),s=G(a),o=G(s),l=e=>{var a=Oe();let s;t((t=>{U(a,"title",t),s=ut(a,1,"material-icons chat-active",null,s,{"text-muted":"rac_asc"!=i().toggleWidgetData[r()]&&"rac_dsc"!=i().toggleWidgetData[r()]})}),[()=>(n(),h((()=>n()("widget.live_chats"))))]),M(e,a)};H(o,(t=>{p()||t(l)}));var d=B(o,2);let _;var u=G(d,!0);J(d),J(s);var g=B(s,2),m=e=>{var a=He(),s=G(a),o=e=>{var a=Ne();let s;t((t=>{U(a,"title",t),s=ut(a,1,"material-icons chat-active",null,s,{"text-muted":"ac_dsc"!=i().toggleWidgetData[r()]&&"ac_asc"!=i().toggleWidgetData[r()]})}),[()=>(n(),h((()=>n()("widget_title.active_chats"))))]),M(e,a)};H(s,(t=>{p()||t(o)}));var l=B(s,2);let d;var _=G(l,!0);J(l),J(a),t((t=>{U(l,"title",t),d=ut(l,1,"material-icons",null,d,{"text-muted":"ac_dsc"!=i().toggleWidgetData[r()]&&"ac_asc"!=i().toggleWidgetData[r()]}),q(_,(i(),v(r()),h((()=>"ac_dsc"==i().toggleWidgetData[r()]||"ac_asc"!=i().toggleWidgetData[r()]?"trending_up":"trending_down"))))}),[()=>(n(),h((()=>n()("widget.sort_by_chat_number"))))]),Q("click",a,(t=>vt.toggleWidgetSort(c(),r(),"ac_dsc","ac_asc",!0))),M(e,a)};H(g,(t=>{f()||t(m)})),J(a),t((t=>{U(d,"title",t),_=ut(d,1,"material-icons",null,_,{"text-muted":"rac_asc"!=i().toggleWidgetData[r()]&&"rac_dsc"!=i().toggleWidgetData[r()]}),q(u,(i(),v(r()),h((()=>"rac_dsc"==i().toggleWidgetData[r()]||"rac_asc"!=i().toggleWidgetData[r()]?"trending_up":"trending_down"))))}),[()=>(n(),h((()=>n()("widget.sort_by_chat_number_real"))))]),Q("click",s,(t=>vt.toggleWidgetSort(c(),r(),"rac_dsc","rac_asc",!0))),M(e,a)};H(at,(t=>{"online_op"==l()&&t(it)}));var nt=B(at),st=e=>{var a=Ve(),s=G(a),o=G(s);let l;var d=G(o,!0);J(o),J(s),J(a),t((t=>{U(o,"title",t),l=ut(o,1,"material-icons",null,l,{"text-muted":"op_asc"!=i().toggleWidgetData[r()]&&"op_dsc"!=i().toggleWidgetData[r()]}),q(d,(i(),v(r()),h((()=>"op_dsc"==i().toggleWidgetData[r()]||"op_asc"!=i().toggleWidgetData[r()]?"trending_up":"trending_down"))))}),[()=>(n(),h((()=>n()("widget.sort_by_op"))))]),Q("click",s,(t=>vt.toggleWidgetSort(c(),r(),"op_dsc","op_asc",!0))),M(e,a)};H(nt,(t=>{"active_chats"==l()&&t(st)}));var _t=B(nt),gt=e=>{var a=Be(),i=N(a),s=G(i);J(i);var o=B(i,2),r=G(o);J(o),t(((t,e)=>{U(s,"title",t),U(r,"title",e)}),[()=>(n(),h((()=>n()("widget_title.active_chats")))),()=>(n(),h((()=>n()("widget_title.bot_chats"))))]),M(e,a)};H(_t,(t=>{"depgroups_stats"==l()&&t(gt)}));var pt=B(_t),ht=e=>{var a=Ge(),i=G(a),s=B(i),o=e=>{var a=K();t((t=>q(a,t)),[()=>(n(),h((()=>n()("widget.operator"))))]),M(e,a)};H(s,(t=>{R()&&t(o)})),J(a),t((t=>U(i,"title",t)),[()=>(n(),h((()=>n()("widget.operator"))))]),M(e,a)};H(pt,(t=>{("active_mails"==l()||"alarm_mails"==l()||W())&&t(ht)}));var mt=B(pt),bt=e=>{var a=Ke(),s=G(a),o=e=>{var a=Je();t((t=>U(a,"title",t)),[()=>(n(),h((()=>n()("widget.load_statistic"))))]),M(e,a)};H(s,(t=>{"depgroups_stats"==l()&&t(o)}));var d=B(s,2),_=e=>{var a=qe();t((t=>U(a,"title",t)),[()=>(n(),h((()=>n()("widget.time_ago"))))]),M(e,a)},u=e=>{var a=F(),s=N(a),o=e=>{var a=Qe(),s=G(a);let o;var l=G(s,!0);J(s),J(a),t((t=>{U(s,"title",t),o=ut(s,1,"material-icons",null,o,{"text-muted":"dep_asc"!=i().toggleWidgetData[r()]&&"dep_dsc"!=i().toggleWidgetData[r()]}),q(l,(i(),v(r()),h((()=>"dep_dsc"==i().toggleWidgetData[r()]||"dep_asc"!=i().toggleWidgetData[r()]?"trending_up":"trending_down"))))}),[()=>(n(),h((()=>n()("widget.sort_by_dep"))))]),Q("click",a,(t=>vt.toggleWidgetSort(c(),r(),"dep_dsc","dep_asc",!0))),M(e,a)},d=e=>{var a=F(),i=N(a),s=e=>{var a=Fe(),i=N(a),s=B(i),o=e=>{var a=K();t((t=>q(a,t)),[()=>(n(),h((()=>n()("widget.department"))))]),M(e,a)};H(s,(t=>{E()&&t(o)})),t((t=>U(i,"title",t)),[()=>(n(),h((()=>n()("widget.department"))))]),M(e,a)};H(i,(t=>{"transfer_chats"!=l()&&"depgroups_stats"!=l()&&t(s)}),!0),M(e,a)};H(s,(t=>{"active_chats"==l()?t(o):t(d,!1)}),!0),M(e,a)};H(d,(t=>{"group_chats"==l()?t(_):t(u,!1)}));var g=B(d,2),p=e=>{var a=Ue(),i=G(a),s=et((()=>vt.changeWidgetHeight(c(),z(),!0))),o=G(i);J(i);var r=B(i,2),l=et((()=>vt.changeWidgetHeight(c(),z(),!1))),d=G(r);J(r),J(a),t(((t,e)=>{U(o,"title",t),U(d,"title",e)}),[()=>(n(),h((()=>n()("widget.more_rows")))),()=>(n(),h((()=>n()("widget.less_rows"))))]),Q("click",i,(function(...t){A(s)?.apply(this,t)})),Q("click",r,(function(...t){A(l)?.apply(this,t)})),M(e,a)};H(g,(t=>{!1===O()&&"depgroups_stats"!=l()&&t(p)})),J(a),t((()=>U(a,"width",ct()))),M(e,a)};H(mt,(t=>{u()||t(bt)}));var wt=B(mt),yt=e=>{var a=ze(),i=G(a),s=B(i,2),o=G(s),r=et((()=>vt.changeWidgetHeight(c(),z(),!0))),l=G(o);J(o);var d=B(o,2),_=et((()=>vt.changeWidgetHeight(c(),z(),!1))),u=G(d);J(d),J(s),J(a),t(((t,e,a)=>{U(i,"title",t),U(l,"title",e),U(u,"title",a)}),[()=>(n(),h((()=>n()("widget.op_statistic")))),()=>(n(),h((()=>n()("widget.more_rows")))),()=>(n(),h((()=>n()("widget.less_rows"))))]),Q("click",o,(function(...t){A(r)?.apply(this,t)})),Q("click",d,(function(...t){A(_)?.apply(this,t)})),M(e,a)};H(wt,(t=>{"depgroups_stats"==l()&&t(yt)})),J(s),J(a),t((()=>U(o,"width",lt()))),M(e,a)};H(kt,(t=>{v(l()),i(),h((()=>"depgroups_stats"!=l()||!i().departmentd_hide_dgroup&&i()[l()].list.length>0))&&t(Lt)}));var Wt=B(kt),St=e=>{var a=la(),s=N(a),o=e=>{var a=aa();Z(a,5,(()=>(i(),v(l()),h((()=>i()[l()].list)))),(t=>t.id),((e,a)=>{var i=ea(),s=G(i),o=G(s),r=G(o),l=G(r,!0);J(r),J(o),J(s);var c=B(s),d=G(c),_=G(d,!0);J(d),J(c);var u=B(c),g=G(u),p=G(g,!0);J(g),J(u);var m=B(u),f=G(m),b=G(f,!0);J(f),J(m);var w=B(m),y=G(w),x=e=>{var i=Ye(),n=G(i),s=G(n,!0);J(n);var o=B(n);J(i),t((()=>{ut(n,1,pt((A(a),h((()=>A(a).max_load_h&&A(a).max_load_h-((A(a).acopchats_cnt?A(a).acopchats_cnt:0)-(A(a).inopchats_cnt?A(a).inopchats_cnt:0))<=3?"text-danger fw-bold":""))))),q(s,(A(a),h((()=>A(a).max_load_h?A(a).max_load_h-((A(a).acopchats_cnt?A(a).acopchats_cnt:0)-(A(a).inopchats_cnt?A(a).inopchats_cnt:0)):"n/a")))),q(o,`(${A(a),h((()=>A(a).max_load?A(a).max_load-((A(a).achats_cnt?A(a).achats_cnt:0)-(A(a).inachats_cnt?A(a).inachats_cnt:0)):"n/a"))??""})`)})),Q("click",i,(t=>vt.openModal("statistic/departmentstats/"+A(a).id+"/(type)/group"))),M(e,i)},C=e=>{var i=Ze(),n=N(i),s=G(n,!0);J(n);var o=B(n);t((()=>{ut(n,1,pt((A(a),h((()=>A(a).max_load_h&&A(a).max_load_h-((A(a).acopchats_cnt?A(a).acopchats_cnt:0)-(A(a).inopchats_cnt?A(a).inopchats_cnt:0))<=3?"text-danger fw-bold":""))))),q(s,(A(a),h((()=>A(a).max_load_h?A(a).max_load_h-((A(a).acopchats_cnt?A(a).acopchats_cnt:0)-(A(a).inopchats_cnt?A(a).inopchats_cnt:0)):"n/a")))),q(o,`(${A(a),h((()=>A(a).max_load?A(a).max_load-((A(a).achats_cnt?A(a).achats_cnt:0)-(A(a).inachats_cnt?A(a).inachats_cnt:0)):"n/a"))??""})`)})),M(e,i)};H(y,(t=>{v(nt()),h((()=>-1!==nt().indexOf("lhstatistic_statisticdep")))?t(x):t(C,!1)})),J(w);var j=B(w),k=G(j),L=e=>{var i=ta(),n=G(i);J(i),t((()=>q(n,`${A(a),h((()=>A(a).max_load_op?A(a).max_load_op:"n/a"))??""} (${A(a),h((()=>A(a).max_load_op_h?A(a).max_load_op_h:"n/a"))??""})`))),Q("click",i,(t=>vt.openModal("statistic/departmentstats/"+A(a).id+"/(type)/group/(tab)/op"))),M(e,i)},W=e=>{var i=K();t((()=>q(i,`${A(a),h((()=>A(a).max_load_op?A(a).max_load_op:"n/a"))??""} (${A(a),h((()=>A(a).max_load_op_h?A(a).max_load_op_h:"n/a"))??""})`))),M(e,i)};H(k,(t=>{v(nt()),h((()=>-1!==nt().indexOf("lhstatistic_statisticdep")))?t(L):t(W,!1)})),J(j),J(i),t(((t,e,i,n,s,c)=>{U(o,"title",(A(a),h((()=>A(a).name)))),U(r,"href",(A(a),h((()=>WWW_DIR_JAVASCRIPT+"chat/list/(department_group_ids)/"+A(a).id+"/(chat_status_ids)/0/1/5")))),q(l,(A(a),h((()=>A(a).name)))),U(d,"href",(A(a),h((()=>WWW_DIR_JAVASCRIPT+"chat/list/(department_group_ids)/"+A(a).id+"/(chat_status_ids)/0")))),q(_,(A(a),h((()=>A(a).pchats_cnt?A(a).pchats_cnt:0)))),U(g,"href",(A(a),h((()=>WWW_DIR_JAVASCRIPT+"chat/list/(department_group_ids)/"+A(a).id+"/(chat_status_ids)/1")))),q(p,(A(a),h((()=>A(a).achats_cnt?A(a).achats_cnt:0)))),U(f,"href",(A(a),h((()=>WWW_DIR_JAVASCRIPT+"chat/list/(department_group_ids)/"+A(a).id+"/(chat_status_ids)/5")))),q(b,(A(a),h((()=>A(a).bchats_cnt?A(a).bchats_cnt:0)))),U(w,"title",`${A(a),h((()=>A(a).inachats_cnt?A(a).inachats_cnt:"0"))??""} ${t??""}${A(a),h((()=>A(a).inopchats_cnt?A(a).inopchats_cnt:"0"))??""} ${e??""}${A(a),h((()=>A(a).acopchats_cnt?A(a).acopchats_cnt:"0"))??""} ${i??""}${n??""} - ${A(a),h((()=>A(a).max_load_h?A(a).max_load_h:"0"))??""}, ${s??""} - ${A(a),h((()=>A(a).max_load?A(a).max_load:"0"))??""}.${c??""}`)}),[()=>(n(),h((()=>n()("widget.inactive_chats")+".\n"))),()=>(n(),h((()=>n()("widget.inactive_op_chats")+".\n"))),()=>(n(),h((()=>n()("widget.active_op_chats")+".\n"))),()=>(n(),h((()=>n()("widget.hard_limit")))),()=>(n(),h((()=>n()("widget.soft_limit")))),()=>(n(),h((()=>"\n"+n()("widget.hard_limit_explain"))))]),M(e,i)})),J(a),M(e,a)};H(s,(t=>{i(),h((()=>!i().departmentd_hide_dgroup))&&t(o)}));var r=B(s,2),c=e=>{var a=ra(),s=N(a),o=G(s),r=G(o),l=G(r);J(r);var c=B(r),d=G(c);J(c);var _=B(c),u=G(_);J(_);var g=B(_),p=G(g);J(g);var m=B(g),f=G(m);J(m);var b=B(m),w=G(b);J(b),J(o),J(s);var y=B(s,2);Z(y,5,(()=>(i(),h((()=>i().departments_stats.list)))),(t=>t.id),((e,a)=>{var i=oa(),s=G(i),o=G(s),r=G(o),l=G(r,!0);J(r),J(o),J(s);var c=B(s),d=G(c),_=G(d,!0);J(d),J(c);var u=B(c),g=G(u),p=G(g,!0);J(g),J(u);var m=B(u),f=G(m),b=G(f,!0);J(f),J(m);var w=B(m),y=G(w),x=e=>{var i=ia(),n=G(i),s=G(n,!0);J(n);var o=B(n);J(i),t((()=>{ut(n,1,pt((A(a),h((()=>A(a).max_load_h&&A(a).max_load_h-((A(a).acop_chats_cnt?A(a).acop_chats_cnt:0)-(A(a).inop_chats_cnt?A(a).inop_chats_cnt:0))<=3?"text-danger fw-bold":""))))),q(s,(A(a),h((()=>A(a).max_load_h?A(a).max_load_h-((A(a).acop_chats_cnt?A(a).acop_chats_cnt:0)-(A(a).inop_chats_cnt?A(a).inop_chats_cnt:0)):"n/a")))),q(o,`(${A(a),h((()=>A(a).max_load?A(a).max_load-((A(a).active_chats_counter?A(a).active_chats_counter:0)-(A(a).inactive_chats_cnt?A(a).inactive_chats_cnt:0)):"n/a"))??""})`)})),Q("click",i,(t=>vt.openModal("statistic/departmentstats/"+A(a).id))),M(e,i)},C=e=>{var i=na(),n=N(i),s=G(n,!0);J(n);var o=B(n);t((()=>{ut(n,1,pt((A(a),h((()=>A(a).max_load_h&&A(a).max_load_h-((A(a).acop_chats_cnt?A(a).acop_chats_cnt:0)-(A(a).inop_chats_cnt?A(a).inop_chats_cnt:0))<=3?"text-danger fw-bold":""))))),q(s,(A(a),h((()=>A(a).max_load_h?A(a).max_load_h-((A(a).acop_chats_cnt?A(a).acop_chats_cnt:0)-(A(a).inop_chats_cnt?A(a).inop_chats_cnt:0)):"n/a")))),q(o,`(${A(a),h((()=>A(a).max_load?A(a).max_load-((A(a).active_chats_counter?A(a).active_chats_counter:0)-(A(a).inactive_chats_cnt?A(a).inactive_chats_cnt:0)):"n/a"))??""})`)})),M(e,i)};H(y,(t=>{v(nt()),h((()=>-1!==nt().indexOf("lhstatistic_statisticdep")))?t(x):t(C,!1)})),J(w);var j=B(w),k=G(j),L=e=>{var i=sa(),n=G(i);J(i),t((()=>q(n,`${A(a),h((()=>A(a).max_load_op?A(a).max_load_op:"n/a"))??""} (${A(a),h((()=>A(a).max_load_op_h?A(a).max_load_op_h:"n/a"))??""})`))),Q("click",i,(t=>vt.openModal("statistic/departmentstats/"+A(a).id+"/(tab)/op"))),M(e,i)},W=e=>{var i=K();t((()=>q(i,`${A(a),h((()=>A(a).max_load_op?A(a).max_load_op:"n/a"))??""} (${A(a),h((()=>A(a).max_load_op_h?A(a).max_load_op_h:"n/a"))??""})`))),M(e,i)};H(k,(t=>{v(nt()),h((()=>-1!==nt().indexOf("lhstatistic_statisticdep")))?t(L):t(W,!1)})),J(j),J(i),t(((t,e,i,n,s,c)=>{U(o,"title",(A(a),h((()=>A(a).name)))),U(r,"href",(A(a),h((()=>WWW_DIR_JAVASCRIPT+"chat/list/(department_ids)/"+A(a).id+"/(chat_status_ids)/0/1/5")))),q(l,(A(a),h((()=>A(a).name)))),U(d,"href",(A(a),h((()=>WWW_DIR_JAVASCRIPT+"chat/list/(department_ids)/"+A(a).id+"/(chat_status_ids)/0")))),q(_,(A(a),h((()=>A(a).pending_chats_counter?A(a).pending_chats_counter:0)))),U(g,"href",(A(a),h((()=>WWW_DIR_JAVASCRIPT+"chat/list/(department_ids)/"+A(a).id+"/(chat_status_ids)/1")))),q(p,(A(a),h((()=>A(a).active_chats_counter?A(a).active_chats_counter:0)))),U(f,"href",(A(a),h((()=>WWW_DIR_JAVASCRIPT+"chat/list/(department_ids)/"+A(a).id+"/(chat_status_ids)/5")))),q(b,(A(a),h((()=>A(a).bot_chats_counter?A(a).bot_chats_counter:0)))),U(w,"title",`${A(a),h((()=>A(a).inactive_chats_cnt?A(a).inactive_chats_cnt:"0"))??""} ${t??""}${A(a),h((()=>A(a).inop_chats_cnt?A(a).inop_chats_cnt:"0"))??""} ${e??""}${A(a),h((()=>A(a).acop_chats_cnt?A(a).acop_chats_cnt:"0"))??""} ${i??""}${n??""} - ${A(a),h((()=>A(a).max_load_h?A(a).max_load_h:"0"))??""}, ${s??""} - ${A(a),h((()=>A(a).max_load?A(a).max_load:"0"))??""}.${c??""}`)}),[()=>(n(),h((()=>n()("widget.inactive_chats")+".\n"))),()=>(n(),h((()=>n()("widget.inactive_op_chats")+".\n"))),()=>(n(),h((()=>n()("widget.active_op_chats")+".\n"))),()=>(n(),h((()=>n()("widget.hard_limit")))),()=>(n(),h((()=>n()("widget.soft_limit")))),()=>(n(),h((()=>"\n"+n()("widget.hard_limit_explain"))))]),M(e,i)})),J(y),t(((t,e,a,i,n,s)=>{U(l,"title",t),U(d,"title",e),U(u,"title",a),U(p,"title",i),U(f,"title",n),U(w,"title",s)}),[()=>(n(),h((()=>n()("widget.department")))),()=>(n(),h((()=>n()("widget_title.pending_chats")))),()=>(n(),h((()=>n()("widget_title.active_chats")))),()=>(n(),h((()=>n()("widget_title.bot_chats")))),()=>(n(),h((()=>n()("widget.load_statistic")))),()=>(n(),h((()=>n()("widget.op_statistic"))))]),M(e,a)};H(r,(t=>{i(),h((()=>!i().departmentd_hide_dep&&i().departments_stats.list.length>0))&&t(c)})),M(e,a)},At=e=>{var a=F(),s=N(a),o=e=>{var a=pa(),s=N(a);Z(s,5,(()=>(i(),v(l()),h((()=>i()[l()].list)))),tt,((e,a)=>{var i=da(),s=G(i),o=G(s),r=e=>{var i=ca(),n=G(i);J(i),t((()=>{U(n,"src",(v(d()),A(a),h((()=>d()+"/"+A(a).country_code+".png")))),U(n,"alt",(A(a),h((()=>A(a).country_name)))),U(n,"title",(A(a),h((()=>A(a).country_name))))})),M(e,i)};H(o,(t=>{A(a),h((()=>A(a).country_code))&&t(r)}));var l=B(o,2),c=B(l,2),_=B(c,2),u=G(_,!0);J(_),J(s);var g=B(s),p=G(g),m=G(p,!0);J(p),J(g),J(i),t(((t,e)=>{U(l,"title",t),U(c,"title",`[${A(a),h((()=>A(a).id))??""}]`),U(_,"title",e),q(u,(A(a),h((()=>A(a).nick)))),q(m,(A(a),h((()=>A(a).time_front))))}),[()=>(n(),h((()=>n()("widget.open_new_window")))),()=>(n(),h((()=>n()("widget.accept_chat"))))]),Q("click",l,(t=>vt.startChatNewWindowTransfer(A(a).id,A(a).nick,A(a).transfer_id,A(a).transfer_scope))),Q("click",c,(t=>{1==A(a).transfer_scope?vt.previewMail(A(a).id,t):vt.previewChat(A(a).id,t)})),Q("click",_,(t=>vt.startChatTransfer(A(a).id,A(a).nick,A(a).transfer_id,A(a).transfer_scope))),M(e,i)})),J(s);var o=B(s,2),r=e=>{var a=ga(),s=N(a),o=G(s),r=G(o),l=B(G(r));J(r);var c=B(r),_=G(c);J(c),J(o),J(s);var u=B(s,2);Z(u,5,(()=>(i(),h((()=>i().transfer_dep_chats.list)))),tt,((e,a)=>{var i=ua(),s=G(i),o=G(s),r=e=>{var i=_a(),n=G(i);J(i),t((()=>{U(n,"src",(v(d()),A(a),h((()=>d()+"/"+A(a).country_code+".png")))),U(n,"alt",(A(a),h((()=>A(a).country_name)))),U(n,"title",(A(a),h((()=>A(a).country_name))))})),M(e,i)};H(o,(t=>{A(a),h((()=>A(a).country_code))&&t(r)}));var l=B(o,2),c=B(l,2),_=B(c,2),u=G(_,!0);J(_),J(s);var g=B(s),p=G(g),m=G(p,!0);J(p),J(g),J(i),t(((t,e)=>{U(l,"title",t),U(c,"title",`[${A(a),h((()=>A(a).id))??""}]`),U(_,"title",e),q(u,(A(a),h((()=>A(a).nick)))),q(m,(A(a),h((()=>A(a).time_front))))}),[()=>(n(),h((()=>n()("widget.open_new_window")))),()=>(n(),h((()=>n()("widget.accept_chat"))))]),Q("click",l,(t=>vt.startChatNewWindowTransfer(A(a).id,A(a).nick,A(a).transfer_id,A(a).transfer_scope))),Q("click",c,(t=>{1==A(a).transfer_scope?vt.previewMail(A(a).id,t):vt.previewChat(A(a).id,t)})),Q("click",_,(t=>vt.startChatTransfer(A(a).id,A(a).nick,A(a).transfer_id,A(a).transfer_scope))),M(e,i)})),J(u),t(((t,e)=>{q(l,` ${t??""}`),U(_,"title",e)}),[()=>(n(),h((()=>n()("widget.transferred_to_dep")))),()=>(n(),h((()=>n()("widget.transfer_time"))))]),M(e,a)};H(o,(t=>{i(),h((()=>i().transfer_dep_chats.list.length>0))&&t(r)})),M(e,a)},r=e=>{var a=ki(),s=G(a);Z(s,1,(()=>(i(),v(l()),h((()=>i()[l()].list)))),(t=>t.id),((e,a)=>{var s=xi();let o;var r=G(s),c=G(r),p=G(c),f=e=>{var i=ha(),n=G(i);J(i),t((()=>{U(n,"src",(v(d()),A(a),h((()=>d()+"/"+A(a).country_code+".png")))),U(n,"alt",(A(a),h((()=>A(a).country_name)))),U(n,"title",(A(a),h((()=>A(a).country_name))))})),M(e,i)};H(p,(t=>{A(a),h((()=>A(a).country_code))&&t(f)}));var w=B(p,2);Z(w,1,st,tt,((e,i)=>{var n=F(),s=N(n),o=e=>{var n=F(),s=N(n),o=e=>{var n=ma(),s=G(n,!0);J(n),t((t=>{U(n,"title",(A(i),h((()=>A(i).title?A(i).title:null)))),ut(n,1,t),q(s,(A(a),A(i),h((()=>A(a)[A(i).icon_attr]&&"bool"==A(i).icon_attr_type||A(a)[A(i).icon_attr]==A(i).icon_attr_val&&"cmp"==A(i).icon_attr_type?A(i).icon_attr_true:A(i).icon_attr_false))))}),[()=>(A(i),A(a),h((()=>A(i).class+" me-0 "+(A(i).class_false?yt(A(a),A(i).class_false,!1):"")+" "+(A(i).class_true?yt(A(a),A(i).class_true,!0):""))))]),Q("click",n,(t=>A(i).click?ee.emitEvent(A(i).click,[A(a)]):null)),M(e,n)};H(s,(t=>{A(a),A(i),h((()=>A(a)[A(i).icon_attr]&&A(i).icon_attr_true&&"bool"==A(i).icon_attr_type||"bool"==A(i).icon_attr_type&&!A(a)[A(i).icon_attr]&&A(i).icon_attr_false||"cmp"==A(i).icon_attr_type&&A(a)[A(i).icon_attr]==A(i).icon_attr_val))&&t(o)})),M(e,n)},r=e=>{var n=F(),s=N(n),o=e=>{var n=F(),s=N(n),o=e=>{var n=va(),s=G(n);J(n),t((()=>{U(n,"title",(A(i),h((()=>A(i).title?A(i).title:null)))),ut(n,1,pt((A(i),h((()=>A(i).class))))),q(s,`${A(i),h((()=>A(i).icon_attr_prepend?A(i).icon_attr_prepend:""))??""}${A(a),A(i),h((()=>A(a)[A(i).icon_attr]))??""}${A(i),h((()=>A(i).icon_attr_append?A(i).icon_attr_append:""))??""}`)})),M(e,n)},r=e=>{var n=K();t((()=>q(n,`${A(i),h((()=>A(i).icon_attr_prepend?A(i).icon_attr_prepend:""))??""}${A(a),A(i),h((()=>A(a)[A(i).icon_attr]))??""}${A(i),h((()=>A(i).icon_attr_append?A(i).icon_attr_append:""))??""}`))),M(e,n)};H(s,(t=>{A(i),h((()=>A(i).class))?t(o):t(r,!1)})),M(e,n)};H(s,(t=>{A(i),h((()=>"string"==A(i).icon_attr_type))&&t(o)}),!0),M(e,n)};H(s,(t=>{A(i),h((()=>"bool"==A(i).icon_attr_type||"cmp"==A(i).icon_attr_type))?t(o):t(r,!1)})),M(e,n)}));var y=B(w,2),x=e=>{var s=Sa(),o=N(s),r=e=>{var i=fa();t((()=>U(i,"src",(A(a),h((()=>A(a).avatar)))))),M(e,i)};H(o,(t=>{A(a),v(b()),h((()=>A(a).avatar&&!b()))&&t(r)}));var l=B(o,2),c=e=>{var i=ba();t((t=>U(i,"title",t)),[()=>(n(),h((()=>n()("widget.start_chat"))))]),Q("click",i,(t=>vt.startChatOperator(A(a).user_id))),M(e,i)};H(l,(t=>{A(a),i(),v(nt()),h((()=>A(a).user_id!=i().current_user_id&&-1!==nt().indexOf("lhgroupchat_use")))&&t(c)}));var d=B(l,2),_=e=>{var i=wa();let s;var o=G(i,!0);J(i),t((t=>{U(i,"title",t),s=mt(i,"",s,{color:(A(a),h((()=>A(a).offline_since_s.c?A(a).offline_since_s.c:null)))}),q(o,(A(a),h((()=>"clock_loader_"+A(a).offline_since_s.i))))}),[()=>(n(),A(a),h((()=>n()("widget.went_offline_ago",{ago:A(a).offline_since}))))]),M(e,i)};H(d,(t=>{A(a),h((()=>A(a).offline_since_s))&&t(_)}));var u=B(d,2),g=e=>{var i=ya();let s;var o=G(i,!0);J(i),t((t=>{s=ut(i,1,"material-icons me-0 action-image",null,s,{"text-success":1!=A(a).hide_online,"text-danger":1==A(a).hide_online}),U(i,"title",t),q(o,(A(a),h((()=>1==A(a).hide_online?"flash_off":"flash_on"))))}),[()=>(n(),h((()=>n()("widget.change_op_status"))))]),Q("click",i,(t=>vt.openModal("user/setopstatus/"+A(a).user_id))),M(e,i)},p=e=>{var i=xa();let n;var s=G(i,!0);J(i),t((()=>{n=ut(i,1,"material-icons me-0",null,n,{"text-success":1!=A(a).hide_online,"text-danger":1==A(a).hide_online}),q(s,(A(a),h((()=>1==A(a).hide_online?"flash_off":"flash_on"))))})),M(e,i)};H(u,(t=>{v(nt()),h((()=>-1!==nt().indexOf("lhuser_setopstatus")))?t(g):t(p,!1)}));var m=B(u,2),f=e=>{var i=ja();let s;var o=G(i,!0),r=B(o),l=e=>{var i=Ca(),s=G(i);J(i),t((t=>{U(i,"title",t),q(s,`, ${A(a),h((()=>A(a).offline_since))??""}`)}),[()=>(n(),A(a),h((()=>n()("widget.went_offline_ago",{ago:A(a).offline_since}))))]),M(e,i)};H(r,(t=>{A(a),h((()=>A(a).hide_online&&A(a).offline_since))&&t(l)})),J(i),t((t=>{U(i,"title",t),s=ut(i,1,"",null,s,{"text-muted":A(a).ro}),q(o,(A(a),h((()=>A(a).name_official))))}),[()=>(n(),A(a),h((()=>n()("widget.last_activity_ago")+" "+A(a).lastactivity_ago+" "+n()("widget.see_op_stats"))))]),Q("click",i,(t=>vt.openModal("statistic/userstats/"+A(a).user_id))),M(e,i)},w=e=>{var i=La(),s=N(i),o=G(s,!0);J(s);var r=B(s),l=e=>{var i=ka(),s=B(N(i)),o=G(s,!0);J(s),t((t=>{U(s,"title",t),q(o,(A(a),h((()=>A(a).offline_since))))}),[()=>(n(),A(a),h((()=>n()("widget.went_offline_ago",{ago:A(a).offline_since}))))]),M(e,i)};H(r,(t=>{A(a),h((()=>A(a).hide_online&&A(a).offline_since))&&t(l)})),t((t=>{U(s,"title",t),q(o,(A(a),h((()=>A(a).name_official))))}),[()=>(n(),A(a),h((()=>n()("widget.last_activity_ago")+" "+A(a).lastactivity_ago)))]),M(e,i)};H(m,(t=>{v(nt()),h((()=>-1!==nt().indexOf("lhstatistic_userstats")))?t(f):t(w,!1)}));var y=B(m,2),x=e=>{var i=Wa();t((t=>U(i,"title",t)),[()=>(n(),A(a),h((()=>n()("widget.no_ping_for")+" "+A(a).lastactivity_ago)))]),M(e,i)};H(y,(t=>{A(a),h((()=>A(a).lac_ago_s>35))&&t(x)})),M(e,s)},j=e=>{var s=F(),o=N(s),r=e=>{var s=Ia(),o=G(s),r=e=>{var a=Aa();t((t=>U(a,"title",t)),[()=>(n(),h((()=>n()("group_chat.unread_messages"))))]),M(e,a)};H(o,(t=>{A(a),h((()=>1==A(a).is_member&&(!A(a).ls_id||A(a).ls_id<A(a).last_msg_id)))&&t(r)}));var l=B(o,2),c=G(l,!0);J(l);var d=B(l),_=t=>{var e=Ea();M(t,e)};H(d,(t=>{A(a),i(),h((()=>A(a).user_id==i().current_user_id))&&t(_)}));var u=B(d);J(s),t((()=>{q(c,(A(a),h((()=>1==A(a).type?"security":"public")))),q(u,`[${A(a),h((()=>A(a).tm))??""}] ${A(a),h((()=>A(a).name))??""}`)})),Q("click",s,(t=>vt.startGroupChat(A(a).id,A(a).name))),M(e,s)},c=e=>{var s=Ua(),o=N(s),r=e=>{var i=Ta();let n;var s=G(i,!0);J(i),t((()=>{n=ut(i,1,"material-icons chat-pending me-0",null,n,{"chat-active":1==A(a).status||5==A(a).status}),q(s,(A(a),h((()=>5==A(a).status?"android":"chat"))))})),M(e,i)};H(o,(t=>{"subject_chats"==l()&&t(r)}));var c=B(o,2),d=e=>{var i=Da();t((t=>U(i,"title",t)),[()=>(n(),h((()=>n()("widget.delete_chat"))))]),Q("click",i,(t=>{vt.deleteChat(A(a).id),t.stopPropagation()})),M(e,i)};H(c,(t=>{v(l()),v(nt()),h((()=>"pending_chats"==l()&&-1!==nt().indexOf("lhchat_deletechat")))&&t(d)}));var u=B(c,2),g=e=>{var i=$a();t((t=>U(i,"title",t)),[()=>(n(),h((()=>n()("widget.redirect_contact"))))]),Q("click",i,(t=>vt.redirectContact(A(a).id,n()("widget.are_you_sure"),t))),M(e,i)};H(u,(t=>{A(a),v(l()),v(nt()),h((()=>A(a).can_edit_chat&&"pending_chats"==l()&&-1!==nt().indexOf("lhchat_redirectcontact")))&&t(g)}));var p=B(u,2),m=e=>{var i=Oa(),n=N(i),s=t=>{var e=Ra();M(t,e)};H(n,(t=>{v(l()),A(a),h((()=>"my_mails"==l()&&1!=A(a).status))&&t(s)}));var o=B(n,2),r=B(o,2),c=e=>{var i=Pa();t((()=>ut(i,1,(A(a),h((()=>"material-icons me-0 "+(1==A(a).status?"chat-active":"chat-pending"))))))),M(e,i)};H(r,(t=>{"alarm_mails"==l()&&t(c)}));var d=B(r,2),_=G(d);J(d),t((()=>{U(o,"title",(A(a),h((()=>A(a).id)))),U(d,"title",(A(a),h((()=>A(a).from_address)))),q(_,`${A(a),h((()=>A(a).from_name))??""} | ${A(a),h((()=>A(a).subject_front))??""}`)})),Q("click",o,(t=>vt.previewMail(A(a).id,t))),M(e,i)},f=e=>{var i=F(),n=N(i),s=e=>{var i=Na();t((()=>U(i,"title",`[${A(a),h((()=>A(a).id))??""}] ${A(a),h((()=>A(a).time_created_front))??""}`))),Q("click",i,(t=>vt.previewChat(A(a).id,t))),M(e,i)};H(n,(t=>{C()||t(s)}),!0),M(e,i)};H(p,(t=>{"my_mails"==l()||"active_mails"==l()||"pending_mails"==l()||"alarm_mails"==l()?t(m):t(f,!1)}));var b=B(p,2),w=e=>{var a=Ha();t((t=>U(a,"title",t)),[()=>(n(),h((()=>n()("widget.offline_request"))))]),M(e,a)};H(b,(t=>{A(a),h((()=>7==A(a).status_sub))&&t(w)}));var y=B(b,2),x=e=>{var s=Va(),o=N(s),r=G(o);J(o);var l=B(o,2),c=e=>{var a=Ma();t((t=>U(a,"title",t)),[()=>(n(),i(),h((()=>n()("widget.more_than")+" "+String(i().bot_st.msg_nm)+" "+n()("widget.user_msgs"))))]),M(e,a)};H(l,(t=>{A(a),i(),h((()=>A(a).msg_v>i().bot_st.msg_nm))&&t(c)})),t((t=>{U(o,"title",t),q(r,`[${A(a),h((()=>A(a).msg_v||0))??""}]`)}),[()=>(n(),h((()=>n()("widget.msg_v_number"))))]),M(e,s)};H(y,(t=>{"bot_chats"==l()&&t(x)}));var j=B(y,2),k=e=>{var a=Ba();t((t=>U(a,"title",t)),[()=>(n(),h((()=>n()("widget.has_unread_messages"))))]),M(e,a)};H(j,(t=>{A(a),v(l()),h((()=>A(a).hum&&("active_chats"==l()||"my_chats"==l())))&&t(k)}));var L=B(j,2),W=e=>{var n=F(),s=N(n);Z(s,1,(()=>(A(a),h((()=>Object.entries(A(a).aicons))))),tt,((e,a)=>{var n=et((()=>it(A(a),2)));let s=()=>A(n)[1];var o=F(),r=N(o),l=e=>{var a=F(),i=N(a),n=e=>{var a=Ga();t((()=>{U(a,"src",(s(),h((()=>s().i)))),U(a,"title",(s(),h((()=>s().t?s().t:s().i))))})),M(e,a)},o=e=>{var a=Ja();let i;var n=G(a,!0);J(a),t((()=>{U(a,"title",(s(),h((()=>s().t?s().t:s().i)))),i=mt(a,"",i,{color:(s(),h((()=>s().c?s().c:"#6c757d")))}),q(n,(s(),h((()=>s().i||s()))))})),M(e,a)};H(i,(t=>{s(),h((()=>s().i&&s().i.includes("/")))?t(n):t(o,!1)})),M(e,a)};H(r,(t=>{i(),s(),h((()=>0==i().excludeIcons.length||-1===i().excludeIcons.indexOf(s().i)))&&t(l)})),M(e,o)})),M(e,n)};H(L,(t=>{A(a),h((()=>A(a).aicons))&&t(W)}));var S=B(L,2),E=e=>{var n=F(),s=N(n);Z(s,1,(()=>(i(),h((()=>i().additionalColumns)))),tt,((e,i)=>{var n=F(),s=N(n),o=e=>{var n=F(),s=N(n);Z(s,1,(()=>(A(i),h((()=>A(i).items)))),tt,((e,n)=>{var s=F(),o=N(s),r=e=>{var s=qa();let o;var r=G(s,!0);J(s),t((()=>{U(s,"title",`${A(i),h((()=>1==A(i).iconp?"Click for more information | ":""))??""}${A(a),A(n),h((()=>A(a)[A(n)+"_tt"]?A(a)[A(n)+"_tt"]:A(a)[A(n)]))??""}`),o=mt(s,"",o,{color:(A(i),A(a),A(n),h((()=>A(i).icon[A(a)[A(n)]]&&A(i).icon[A(a)[A(n)]].color?A(i).icon[A(a)[A(n)]].color:"#CECECE")))}),q(r,(A(i),A(a),A(n),h((()=>A(i).icon[A(a)[A(n)]]&&A(i).icon[A(a)[A(n)]].icon?A(i).icon[A(a)[A(n)]].icon:"unknown_document"))))})),Q("click",s,(t=>{A(i).iconp&&vt.openModal("chat/icondetailed/"+A(a).id+"/"+A(i).id,t)})),M(e,s)};H(o,(t=>{A(a),A(n),h((()=>A(a)[A(n)]))&&t(r)})),M(e,s)})),M(e,n)};H(s,(t=>{A(i),h((()=>1==A(i).cenabl&&1==A(i).iconm))&&t(o)})),M(e,n)})),M(e,n)};H(S,(t=>{v(_()),i(),h((()=>!1===_()&&ft&&i().additionalColumns))&&t(E)}));var I=B(S,2),T=e=>{var i=Qa(),n=N(i);let s,o;var r=G(n,!0);J(n);var c=B(n),d=G(c,!0);J(c),t((()=>{s=ut(n,1,"",null,s,{"fw-bold":A(a).nb}),o=mt(n,"",o,{color:(A(a),h((()=>A(a).nc?A(a).nc:null)))}),q(r,(A(a),h((()=>A(a).nick?A(a).nick:"")))),q(d,(v(l()),A(a),h((()=>"pending_chats"!=l()&&"subject_chats"!=l()||void 0===A(a).plain_user_name?"":" | "+A(a).plain_user_name))))})),M(e,i)};H(I,(t=>{"my_mails"!=l()&&"active_mails"!=l()&&"pending_mails"!=l()&&"alarm_mails"!=l()&&t(T)}));var D=B(I,2),$=e=>{var i=F(),n=N(i);Z(n,1,(()=>(A(a),h((()=>A(a).subject_list)))),tt,((e,a)=>{var i=Fa();let n;var s=G(i,!0);J(i),t((()=>{n=mt(i,"",n,[{},{"background-color":(A(a),h((()=>A(a).c?"#"+A(a).c:null)))}]),q(s,(A(a),h((()=>A(a).n))))})),M(e,i)})),M(e,i)};H(D,(t=>{A(a),v(l()),h((()=>A(a).subject_list&&("pending_chats"==l()||"bot_chats"==l()||"active_chats"==l()||"my_chats"==l())))&&t($)})),M(e,s)};H(o,(t=>{"group_chats"==l()?t(r):t(c,!1)}),!0),M(e,s)};H(y,(t=>{"online_op"==l()?t(x):t(j,!1)})),J(c),J(r);var k=B(r),L=e=>{var n=F(),s=N(n);Z(s,1,(()=>(i(),h((()=>i().additionalColumns)))),tt,((e,i)=>{var n=F(),s=N(n),o=e=>{var n=za();Z(n,5,(()=>(A(i),h((()=>A(i).items)))),tt,((e,i)=>{var n=F(),s=N(n),o=e=>{var n=Ka(),s=G(n,!0);J(n),t((()=>q(s,(A(a),A(i),h((()=>A(a)[A(i)])))))),M(e,n)};H(s,(t=>{A(a),A(i),h((()=>A(a)[A(i)]))&&t(o)})),M(e,n)})),J(n),M(e,n)};H(s,(t=>{A(i),h((()=>1==A(i).cenabl&&!A(i).iconm))&&t(o)})),M(e,n)})),M(e,n)};H(k,(t=>{v(_()),i(),h((()=>!1===_()&&ft&&i().additionalColumns))&&t(L)}));var E=B(k),I=e=>{var i=Ya(),n=G(i),s=e=>{var i=F(),n=N(i);Z(n,1,(()=>(A(a),h((()=>A(a).subject_list)))),tt,((e,a)=>{var i=Xa();let n;var s=G(i,!0);J(i),t((()=>{n=mt(i,"",n,[{},{"background-color":(A(a),h((()=>A(a).c?"#"+A(a).c:null)))}]),q(s,(A(a),h((()=>A(a).n))))})),M(e,i)})),M(e,i)};H(n,(t=>{A(a),h((()=>A(a).subject_list))&&t(s)})),J(i),M(e,i)};H(E,(t=>{("subject_chats"==l()||"alarm_mails"==l()||S())&&t(I)}));var T=B(E),D=e=>{var i=ui();let s;var o=G(i),r=e=>{var i=ii(),s=N(i),o=e=>{var i=Za();t((t=>U(i,"title",t)),[()=>(n(),h((()=>n()("group_chat.accept_join"))))]),Q("click",i,(t=>vt.startGroupChat(A(a).id,A(a).name))),M(e,i)};H(s,(t=>{A(a),h((()=>1==A(a).is_member&&0==A(a).jtime))&&t(o)}));var r=B(s,2),l=e=>{var i=ti();t((t=>U(i,"title",t)),[()=>(n(),h((()=>n()("group_chat.reject_private"))))]),Q("click",i,(t=>vt.rejectGroupChat(A(a).id,t))),M(e,i)};H(r,(t=>{A(a),h((()=>1==A(a).is_member&&0==A(a).jtime))&&t(l)}));var c=B(r,2),d=e=>{var i=ei();t((t=>U(i,"title",t)),[()=>(n(),h((()=>n()("group_chat.join_public"))))]),Q("click",i,(t=>vt.startGroupChat(A(a).id,A(a).name))),M(e,i)};H(c,(t=>{A(a),h((()=>0==A(a).is_member&&0==A(a).jtime))&&t(d)}));var _=B(c,2),u=e=>{var i=ai();t((t=>U(i,"title",t)),[()=>(n(),h((()=>n()("group_chat.already_member"))))]),Q("click",i,(t=>vt.startGroupChat(A(a).id,A(a).name))),M(e,i)};H(_,(t=>{A(a),h((()=>1==A(a).is_member&&A(a).jtime>0))&&t(u)})),M(e,i)};H(o,(t=>{"group_chats"==l()&&t(r)}));var c=B(o,2),d=e=>{var i=ni(),n=G(i,!0);J(i),t((()=>{U(i,"title",(A(a),h((()=>A(a).wait_time_pending||"00 s.")))),q(n,(A(a),h((()=>A(a).wait_time_pending||"00 s."))))})),M(e,i)};H(c,(t=>{A(a),v(l()),h((()=>A(a).can_edit_chat&&"pending_chats"==l()||"my_mails"==l()||"pending_mails"==l()))&&t(d)}));var _=B(c,2),u=e=>{var i=si(),n=G(i,!0);J(i),t((()=>{U(i,"title",(A(a),h((()=>A(a).pnd_time_front)))),q(n,(A(a),h((()=>A(a).pnd_time_front||"00 s."))))})),M(e,i)};H(_,(t=>{"active_mails"==l()&&t(u)}));var g=B(_,2),p=e=>{var i=oi(),n=G(i,!0);J(i),t((()=>q(n,(A(a),h((()=>A(a).status?A(a).wait_time_response:A(a).wait_time_pending)))))),M(e,i)};H(g,(t=>{"alarm_mails"==l()&&t(p)}));var m=B(g,2),f=e=>{var i=ri(),s=G(i,!0);J(i),t((t=>{U(i,"title",t),q(s,(A(a),h((()=>A(a).last_accepted_ago||"-"))))}),[()=>(n(),h((()=>n()("widget.last_assignment_ago"))))]),M(e,i)};H(m,(t=>{"online_op"==l()&&t(f)}));var b=B(m,2),w=e=>{var i=li(),s=G(i);let o;var r=G(s,!0);J(s);var l=B(s),c=e=>{var i=K();t((()=>q(i,(A(a),h((()=>A(a).last_msg_time_front)))))),M(e,i)},d=t=>{var e=K("");M(t,e)};H(l,(t=>{A(a),h((()=>A(a).last_msg_time_front))?t(c):t(d,!1)})),J(i),t((t=>{U(i,"title",`Chat started at - ${A(a),h((()=>A(a).time_created_front))??""}`),o=ut(s,1,"material-icons text-success",null,o,{"text-danger":A(a).pnd_rsp}),U(s,"title",t),q(r,(A(a),h((()=>!0===A(a).pnd_rsp?"call_received":"call_made"))))}),[()=>(n(),h((()=>n()("widget.send_receive"))))]),M(e,i)};H(b,(t=>{"active_chats"!=l()&&"subject_chats"!=l()&&"bot_chats"!=l()||t(w)}));var y=B(b,2),x=e=>{var i=ci(),n=G(i);J(i),t((()=>{U(i,"title",`${A(a),h((()=>A(a).unread_time.hours))??""} h. ${A(a),h((()=>A(a).unread_time.minits))??""} m. ${A(a),h((()=>A(a).unread_time.seconds))??""} s.`),q(n,`${A(a),h((()=>A(a).unread_time.hours))??""} h. ${A(a),h((()=>A(a).unread_time.minits))??""} m. ${A(a),h((()=>A(a).unread_time.seconds))??""} s.`)})),M(e,i)};H(y,(t=>{"unread_chats"==l()&&t(x)}));var C=B(y,2),j=e=>{var i=_i(),s=G(i),o=e=>{var a=di();t((t=>U(a,"title",t)),[()=>(n(),h((()=>n()("widget.pending"))))]),M(e,a)};H(s,(t=>{A(a),h((()=>1!=A(a).status))&&t(o)}));var r=B(s);let l;var c=G(r,!0);J(r);var d=B(r),_=e=>{var i=K();t((()=>q(i,` ${A(a),h((()=>A(a).wait_time_pending))??""}`))),M(e,i)},u=e=>{var i=K();t((()=>q(i,(A(a),h((()=>A(a).last_msg_time_front)))))),M(e,i)};H(d,(t=>{A(a),h((()=>!A(a).status))?t(_):t(u,!1)})),J(i),t(((t,e)=>{U(i,"title",t),l=ut(r,1,"material-icons text-success",null,l,{"text-danger":A(a).pnd_rsp}),U(r,"title",e),q(c,(A(a),h((()=>!0===A(a).pnd_rsp?"call_received":"call_made"))))}),[()=>(A(a),n(),h((()=>1==A(a).status?n()("widget.active"):n()("widget.pending")))),()=>(n(),h((()=>n()("widget.send_receive"))))]),M(e,i)};H(C,(t=>{"my_chats"==l()&&t(j)})),J(i),t((()=>s=ut(i,1,"",null,s,{"align-middle":"online_op"==l()}))),M(e,i)};H(T,(t=>{g()||t(D)}));var $=B(T),R=e=>{var i=pi();let s;var o=G(i),r=B(o),l=e=>{var i=gi(),s=N(i),o=B(s),r=B(o);t(((t,e)=>{U(s,"title",t),q(o,`, ${A(a),h((()=>A(a).max_chats&&A(a).max_chats>0?A(a).free_slots:" n/a"))??""} `),U(r,"title",e)}),[()=>(n(),A(a),h((()=>n()("widget.live_chats")+"\n("+A(a).active_chats+" + "+A(a).pending_chats+" - "+A(a).inactive_chats+")"))),()=>(n(),A(a),h((()=>n()("widget.free_slots")+"\n"+A(a).max_chats+" - (("+A(a).active_chats+" + "+A(a).pending_chats+") - "+A(a).inactive_chats+")")))]),M(e,i)};H(r,(t=>{m()||t(l)})),J(i),t((t=>{U(i,"title",t),s=ut(i,1,"align-middle",null,s,{"text-danger":A(a).max_chats&&A(a).max_chats>0&&A(a).free_slots<=0,"text-success":A(a).max_chats&&A(a).max_chats>0&&A(a).free_slots>=1}),q(o,`${A(a),h((()=>A(a).live_chats))??""} `)}),[()=>(n(),h((()=>n()("widget.op_chats_statistic"))))]),M(e,i)};H($,(t=>{"online_op"==l()&&t(R)}));var P=B($),O=e=>{var i=hi(),n=G(i),s=G(n,!0);J(n),J(i),t((()=>{U(n,"title",`${A(a),h((()=>A(a).n_off_full))??""} | ${A(a),h((()=>A(a).plain_user_name))??""}`),q(s,(A(a),h((()=>A(a).n_office))))})),M(e,i)};H(P,(t=>{"active_chats"==l()&&t(O)}));var V=B(P),z=e=>{var i=mi(),n=G(i,!0);J(i),t((()=>q(n,(A(a),h((()=>A(a).plain_user_name?A(a).plain_user_name:"")))))),M(e,i)};H(V,(t=>{("active_mails"==l()||"alarm_mails"==l()||W())&&t(z)}));var X=B(V),Y=e=>{var i=yi();let n;var s=G(i),o=e=>{var i=vi(),n=G(i,!0);J(i),t(((t,e)=>{U(i,"title",t),q(n,e)}),[()=>(A(a),h((()=>A(a).departments_names.join(", ")))),()=>(A(a),h((()=>A(a).departments_names.join(", "))))]),M(e,i)},r=e=>{var i=F(),n=N(i),s=e=>{var i=fi(),n=G(i,!0);J(i),t((()=>{U(i,"title",(A(a),h((()=>A(a).time_front)))),q(n,(A(a),h((()=>A(a).time_front))))})),M(e,i)},o=e=>{var i=wi(),n=G(i),s=e=>{var i=bi(),n=B(G(i));J(i),t((()=>q(n,`${A(a),h((()=>A(a).department_name))??""}${A(a),h((()=>A(a).product_name?" | "+A(a).product_name:""))??""}`))),Q("click",i,(t=>vt.openModal("statistic/departmentstats/"+A(a).dep_id,t))),M(e,i)},o=e=>{var i=K();t((()=>q(i,`${A(a),h((()=>A(a).department_name))??""}${A(a),h((()=>A(a).product_name?" | "+A(a).product_name:""))??""}`))),M(e,i)};H(n,(t=>{v(l()),v(nt()),h((()=>("active_chats"===l()||"pending_chats"===l())&&-1!==nt().indexOf("lhstatistic_statisticdep")))?t(s):t(o,!1)})),J(i),t((()=>U(i,"title",`${A(a),h((()=>A(a).department_name))??""}${A(a),h((()=>A(a).product_name?" | "+A(a).product_name:""))??""}`))),M(e,i)};H(n,(t=>{"group_chats"==l()?t(s):t(o,!1)}),!0),M(e,i)};H(s,(t=>{"online_op"==l()?t(o):t(r,!1)})),J(i),t((()=>n=ut(i,1,"",null,n,{"align-middle":"online_op"==l()}))),M(e,i)};H(X,(t=>{u()||t(Y)})),J(s),t((()=>o=ut(s,1,"",null,o,{"user-away-row":bt&&ft&&2==A(a).user_status_front,"user-online-row":bt&&ft&&!A(a).user_status_front}))),Q("click",s,(t=>ft&&function(t){"group_chats"===l()?vt.startGroupChat(t.id,t.name):"my_mails"===l()||"active_mails"===l()||"pending_mails"===l()||"alarm_mails"===l()?vt.startMailChat(t.id,t.subject_front,i().isCTRLPressed):vt.startChat(t.id,t.nick,!i().isCTRLPressed)}(A(a))||_t()&&function(t){ee.emitEvent(_t(),[t])}(A(a)))),M(e,s)}));var o=B(s),r=e=>{var a=ji(),s=G(a),o=G(s);X(o),J(s);var r=B(s),l=G(r);t((()=>{i(),at((()=>{n(),nt()}))}));var d=G(l),_=G(d,!0);J(d),d.value=d.__value="1";var u=B(d),g=e=>{var a=Ci(),i=G(a,!0);J(a),a.value=a.__value="",t((t=>q(i,t)),[()=>(n(),h((()=>n()("group_chat.public_group"))))]),M(e,a)};H(u,(t=>{v(nt()),h((()=>-1!==nt().indexOf("lhgroupchat_public_chat")))&&t(g)})),J(l),J(r);var p=B(r),m=G(p),f=G(m,!0);J(m),J(p),J(a),t(((t,e,a)=>{U(o,"placeholder",t),q(_,e),q(f,a)}),[()=>(n(),h((()=>n()("group_chat.new_group_name")))),()=>(n(),h((()=>n()("group_chat.private_group")))),()=>(n(),h((()=>n()("group_chat.new"))))]),ht(o,(()=>i().new_group_name),(t=>L(c(),h(i).new_group_name=t,h(i)))),wt(l,(()=>i().new_group_type),(t=>L(c(),h(i).new_group_type=t,h(i)))),Q("click",m,(()=>vt.startNewGroupChat(c(),i().new_group_name,i().new_group_type))),M(e,a)};H(o,(t=>{"group_chats"==l()&&t(r)})),J(a),M(e,a)};H(s,(t=>{"transfer_chats"==l()?t(o):t(r,!1)}),!0),M(e,a)};H(Wt,(t=>{"depgroups_stats"==l()?t(St):t(At,!1)})),J(Ct),t((()=>jt=ut(Ct,1,"table table-sm mb-0 table-small table-fixed",null,jt,{"list-chat-table":ft||_t()}))),M(e,Ct);var Et=D(xt);return o(),Et}C(Wi,{sort_identifier:{},type:{},lhcList:{},www_dir_flags:{},no_additional_column:{},hide_third_column:{},hide_2_column:{},hide_ac_op_icon:{},hide_ac_stats:{},hide_ac_sort:{},hide_op_avatar:{},custom_visitor_title:{},custom_visitor_icon:{},show_visitor_title:{},no_chat_preview:{},show_username_always:{},show_always_subject:{},show_department_title:{},show_subject_title:{},show_username_title:{},no_expand:{},panel_id:{},permissions:{},custom_icons:{},custom_sort_icons:{},column_2_width:{},column_1_width:{},column_3_width:{},additional_sort:{},override_item_open:{}},[],[],!0);var Si=O('<i class="material-icons me-0 action-image"> </i>'),Ai=O("<span> </span>"),Ei=O("<a><i> </i><span> </span> <!></a>"),Ii=O("<span> </span>"),Ti=O("<i> </i><span> </span> <!>",1),Di=O('<span class="text-success"> </span>'),$i=O('<a class="material-icons" target="_blank">file_download</a>'),Ri=O('<a class="fs24 float-end material-icons exp-cntr"> </a>'),Pi=O('<span class="d-none d-xl-inline badge me-1 float-end text-muted pe-0 pt-1p5 fs11 fw-light"> </span>'),Oi=O('<span class="d-none d-xl-inline badge me-1 float-end text-muted pe-0 pt-1p5 fs11 fw-light"> </span>'),Ni=O('<div><!> <!> <!> <!> <!> <a class="ms-0 me-1 text-muted float-end material-icons pt-1"> </a> <!> <!></div>'),Hi=O('<div class="panel-list"><!></div>'),Mi=O('<div class="m-1 alert alert-light"><i class="material-icons">search</i> </div>'),Vi=O("<div><!> <!> <!></div>"),Bi=O("<div><!> <!></div>");function Gi(e,a){const i=nt(a,["children","$$slots","$$events","$$legacy","$$host"]);j(a,!1);const n=()=>k(_t,"$lhcList",o),s=()=>k(gt,"$t",o),[o,r]=$(),l=E(),c=E();let d=P(a,"type",12,"pending_chats"),_=P(a,"no_collapse",12,!1),u=P(a,"no_expand",12,!1),g=P(a,"show_username_title",12,!1),p=P(a,"hide_third_column",12,!1),m=P(a,"hide_2_column",12,!1),f=P(a,"hide_op_avatar",12,!1),b=P(a,"hide_ac_stats",12,!1),w=P(a,"hide_ac_sort",12,!1),y=P(a,"hide_ac_op_icon",12,!1),x=P(a,"custom_visitor_title",12,null),C=P(a,"mh_widget",12,null),O=P(a,"custom_visitor_icon",12,null),K=P(a,"show_visitor_title",12,!1),z=P(a,"list_identifier",12,"pending"),X=P(a,"no_panel_id",12,!1),Y=P(a,"custom_settings_url_icon",12,null),Z=P(a,"panel_list_identifier",12,"pendingd-panel-list"),tt=P(a,"sort_identifier",12,"pending_chats_sort"),et=P(a,"status_id",12,0),at=P(a,"status_key",12,"chat_status_ids"),it=P(a,"hide_header",12,!1),rt=P(a,"hide_filter_options",12,!1),lt=P(a,"show_department_title",12,!1),ct=P(a,"show_subject_title",12,!1),dt=P(a,"default_expand",12,!1),ht=P(a,"show_username_always",12,!1),wt=P(a,"show_always_subject",12,!1),yt=P(a,"right_panel_mode",12,!1),xt=P(a,"no_additional_column",12,!1),Ct=P(a,"override_item_open",12,null),jt=P(a,"no_chat_preview",12,!1),kt=P(a,"default_sort",12,"id_asc"),Lt=P(a,"www_dir_flags",12,null),Wt=P(a,"base_url",12,"chat/list"),St=P(a,"url",28,(()=>WWW_DIR_JAVASCRIPT+Wt()+"/("+at()+")/"+et())),At=P(a,"icon_class",12,"chat-pending"),Et=P(a,"card_icon",12,"chat"),It=P(a,"no_link",12,!1),Tt=P(a,"no_duration",12,!1),Dt=P(a,"no_counter",12,!1),$t=P(a,"expand_identifier",12,"pchats_widget_exp"),Rt=P(a,"custom_card_class",12,""),Pt=P(a,"custom_title_class",12,""),Ot=P(a,"custom_settings_url",12,""),Nt=P(a,"additional_sort",12,""),Ht=P(a,"data_panel_id",12,""),Mt=P(a,"column_2_width",12,"20%"),Vt=P(a,"column_1_width",12,"40%"),Bt=P(a,"column_3_width",12,"20%"),Gt=P(a,"permissions",28,(()=>[])),Jt=P(a,"optionsPanel",28,(()=>({panelid:"pendingd",limitid:"limitp",userid:"pendingu"})));vt.getToggleWidget(_t,$t()),vt.getToggleWidgetSort(_t,tt(),kt()),W((async()=>{L(_t,h(n).optionsPanels[A(l).panelid]=A(l),h(n)),ee.emitEvent("svelteOptionsPanelLoaded",[A(l).panelid])})),S((()=>v(Jt())),(()=>{R(l,"string"==typeof Jt()?JSON.parse(Jt()):Jt())})),S((()=>v(Gt())),(()=>{R(c,"string"==typeof Gt()?JSON.parse(Gt()):Gt())})),I();var qt={get type(){return d()},set type(t){d(t),V()},get no_collapse(){return _()},set no_collapse(t){_(t),V()},get no_expand(){return u()},set no_expand(t){u(t),V()},get show_username_title(){return g()},set show_username_title(t){g(t),V()},get hide_third_column(){return p()},set hide_third_column(t){p(t),V()},get hide_2_column(){return m()},set hide_2_column(t){m(t),V()},get hide_op_avatar(){return f()},set hide_op_avatar(t){f(t),V()},get hide_ac_stats(){return b()},set hide_ac_stats(t){b(t),V()},get hide_ac_sort(){return w()},set hide_ac_sort(t){w(t),V()},get hide_ac_op_icon(){return y()},set hide_ac_op_icon(t){y(t),V()},get custom_visitor_title(){return x()},set custom_visitor_title(t){x(t),V()},get mh_widget(){return C()},set mh_widget(t){C(t),V()},get custom_visitor_icon(){return O()},set custom_visitor_icon(t){O(t),V()},get show_visitor_title(){return K()},set show_visitor_title(t){K(t),V()},get list_identifier(){return z()},set list_identifier(t){z(t),V()},get no_panel_id(){return X()},set no_panel_id(t){X(t),V()},get custom_settings_url_icon(){return Y()},set custom_settings_url_icon(t){Y(t),V()},get panel_list_identifier(){return Z()},set panel_list_identifier(t){Z(t),V()},get sort_identifier(){return tt()},set sort_identifier(t){tt(t),V()},get status_id(){return et()},set status_id(t){et(t),V()},get status_key(){return at()},set status_key(t){at(t),V()},get hide_header(){return it()},set hide_header(t){it(t),V()},get hide_filter_options(){return rt()},set hide_filter_options(t){rt(t),V()},get show_department_title(){return lt()},set show_department_title(t){lt(t),V()},get show_subject_title(){return ct()},set show_subject_title(t){ct(t),V()},get default_expand(){return dt()},set default_expand(t){dt(t),V()},get show_username_always(){return ht()},set show_username_always(t){ht(t),V()},get show_always_subject(){return wt()},set show_always_subject(t){wt(t),V()},get right_panel_mode(){return yt()},set right_panel_mode(t){yt(t),V()},get no_additional_column(){return xt()},set no_additional_column(t){xt(t),V()},get override_item_open(){return Ct()},set override_item_open(t){Ct(t),V()},get no_chat_preview(){return jt()},set no_chat_preview(t){jt(t),V()},get default_sort(){return kt()},set default_sort(t){kt(t),V()},get www_dir_flags(){return Lt()},set www_dir_flags(t){Lt(t),V()},get base_url(){return Wt()},set base_url(t){Wt(t),V()},get url(){return St()},set url(t){St(t),V()},get icon_class(){return At()},set icon_class(t){At(t),V()},get card_icon(){return Et()},set card_icon(t){Et(t),V()},get no_link(){return It()},set no_link(t){It(t),V()},get no_duration(){return Tt()},set no_duration(t){Tt(t),V()},get no_counter(){return Dt()},set no_counter(t){Dt(t),V()},get expand_identifier(){return $t()},set expand_identifier(t){$t(t),V()},get custom_card_class(){return Rt()},set custom_card_class(t){Rt(t),V()},get custom_title_class(){return Pt()},set custom_title_class(t){Pt(t),V()},get custom_settings_url(){return Ot()},set custom_settings_url(t){Ot(t),V()},get additional_sort(){return Nt()},set additional_sort(t){Nt(t),V()},get data_panel_id(){return Ht()},set data_panel_id(t){Ht(t),V()},get column_2_width(){return Mt()},set column_2_width(t){Mt(t),V()},get column_1_width(){return Vt()},set column_1_width(t){Vt(t),V()},get column_3_width(){return Bt()},set column_3_width(t){Bt(t),V()},get permissions(){return Gt()},set permissions(t){Gt(t),V()},get optionsPanel(){return Jt()},set optionsPanel(t){Jt(t),V()}};T();var Qt=F(),Ft=N(Qt),Ut=e=>{var a=Bi(),o=G(a),r=e=>{var a=Ni(),i=G(a),o=e=>{var a=Si(),i=G(a,!0);J(a),t((()=>q(i,Y()||"settings_applications"))),Q("click",a,(t=>vt.openModal(Ot()))),M(e,a)};H(i,(t=>{Ot()&&t(o)}));var r=B(i,2),_=e=>{var a=Ei(),i=G(a),o=G(i,!0);J(i);var r=B(i),c=G(r,!0);J(r);var _=B(r,2),u=e=>{var a=Ai(),i=G(a);J(a),t((()=>{ut(a,1,pt(Pt())),q(i,`(${n(),v(d()),h((()=>n()[d()].list.length))??""}${n(),v(d()),A(l),h((()=>n()[d()].list.length==n()[A(l).limitid]?"+":""))??""})`)})),M(e,a)};H(_,(t=>{Dt()||t(u)})),J(a),t((t=>{U(a,"href",St()),ut(i,1,"material-icons "+At()),q(o,Et()),ut(r,1,"d-none d-lg-inline "+Pt()),q(c,t)}),[()=>(s(),v(d()),h((()=>s()("widget_title."+d()))))]),M(e,a)},g=e=>{var a=Ti(),i=N(a),o=G(i,!0);J(i);var r=B(i),c=G(r,!0);J(r);var _=B(r,2),u=e=>{var a=Ii(),i=G(a);J(a),t((()=>{ut(a,1,pt(Pt())),q(i,`(${n(),v(d()),h((()=>n()[d()].list.length))??""}${n(),v(d()),A(l),h((()=>n()[d()].list.length==n()[A(l).limitid]?"+":""))??""})`)})),M(e,a)};H(_,(t=>{Dt()||t(u)})),t((t=>{ut(i,1,"material-icons "+At()),q(o,Et()),ut(r,1,"d-none d-lg-inline "+Pt()),q(c,t)}),[()=>(s(),v(d()),h((()=>s()("widget_title."+d()))))]),M(e,a)};H(r,(t=>{It()?t(g,!1):t(_)}));var p=B(r,2),m=e=>{var a=Di(),i=G(a,!0);J(a),t((t=>{U(a,"title",t),q(i,(n(),v(d()),h((()=>n()[d()].op_on))))}),[()=>(s(),h((()=>s()("widget.online"))))]),M(e,a)};H(p,(t=>{"online_op"==d()&&t(m)}));var f=B(p,2),b=e=>{var a=$i();U(a,"href",WWW_DIR_JAVASCRIPT+"statistic/departmentstatusxls"),t((t=>U(a,"title",t)),[()=>(s(),h((()=>s()("widget.download_xls"))))]),M(e,a)};H(f,(t=>{v(d()),A(c),h((()=>"depgroups_stats"==d()&&-1!==A(c).indexOf("lhstatistic_exportxls")))&&t(b)}));var w=B(f,2),y=e=>{var a=Ri(),i=G(a,!0);J(a),t((t=>{U(a,"title",t),q(i,(n(),v($t()),h((()=>0==n().toggleWidgetData[$t()]?"expand_less":"expand_more"))))}),[()=>(s(),h((()=>s()("widget.collapse_expand"))))]),Q("click",a,(t=>vt.toggleWidget(_t,$t()))),M(e,a)};H(w,(t=>{u()||t(y)}));var x=B(w,2),C=G(x,!0);J(x);var j=B(x,2),k=e=>{var a=Pi(),i=G(a);J(a),t((t=>{U(a,"title",t),q(i,`${n(),v(d()),h((()=>n()[d()].tt))??""} s.`)}),[()=>(s(),h((()=>s()("widget.taken_time"))))]),M(e,a)};H(j,(t=>{v(Tt()),n(),v(d()),h((()=>!Tt()&&n()[d()].tt))&&t(k)}));var L=B(j,2),W=e=>{var a=Oi(),i=G(a);J(a),t((t=>{U(a,"title",t),q(i,`${n(),h((()=>n().departments_stats.tt))??""} s.`)}),[()=>(s(),h((()=>s()("widget.taken_time_dep"))))]),M(e,a)};H(L,(t=>{v(d()),n(),h((()=>"depgroups_stats"==d()&&n().departments_stats.tt))&&t(W)})),J(a),t(((t,e)=>{ut(a,1,Rt()+" card-header"),U(x,"title",t),q(C,e)}),[()=>(s(),n(),v(d()),h((()=>s()(-1===n().suspend_widgets.indexOf(d())?"widget.pause_widget":"widget.resume_widget")))),()=>(n(),v(d()),h((()=>-1===n().suspend_widgets.indexOf(d())?"pause":"play_arrow")))]),Q("click",x,(t=>vt.suspendSync(_t,d()))),M(e,a)};H(o,(t=>{0==it()&&t(r)}));var j=B(o,2),k=e=>{var a=Vi(),o=G(a),r=t=>{ft(t,{get optionsPanel(){return A(l)},get lhcList(){return _t}})};H(o,(t=>{rt()||t(r)}));var _=B(o,2),j=e=>{var a=F(),s=N(a),o=t=>{bt(t,st((()=>i)))},r=e=>{var a=Hi();let i;var s=G(a);{let t=ot((()=>(A(l),h((()=>A(l).custom_sort_icons?A(l).custom_sort_icons:[]))))),e=ot((()=>(A(l),h((()=>A(l).custom_icons?A(l).custom_icons:[])))));Wi(s,{get hide_2_column(){return m()},get hide_ac_sort(){return w()},get hide_ac_stats(){return b()},get hide_ac_op_icon(){return y()},get hide_op_avatar(){return f()},get hide_third_column(){return p()},get custom_visitor_icon(){return O()},get show_visitor_title(){return K()},get custom_visitor_title(){return x()},get show_username_title(){return g()},get show_subject_title(){return ct()},get show_department_title(){return lt()},get no_expand(){return u()},get show_always_subject(){return wt()},get show_username_always(){return ht()},get override_item_open(){return Ct()},get no_chat_preview(){return jt()},get no_additional_column(){return xt()},get additional_sort(){return Nt()},get column_1_width(){return Vt()},get column_3_width(){return Bt()},get column_2_width(){return Mt()},get permissions(){return A(c)},get www_dir_flags(){return Lt()},get custom_sort_icons(){return A(t)},get custom_icons(){return A(e)},get panel_id(){return A(l),h((()=>A(l).panelid))},get lhcList(){return _t},get type(){return d()},get sort_identifier(){return tt()}})}J(a),t((t=>{U(a,"id",!1===X()?Z():null),i=mt(a,"",i,t)}),[()=>({"max-height":(v(C()),n(),A(l),h((()=>C()?C():n()[A(l).panelid+"_m_h"]&&parseInt(n()[A(l).panelid+"_m_h"].replace("px",""))<56?"56px":n()[A(l).panelid+"_m_h"]??"330px")))})]),M(e,a)};H(s,(t=>{"onlineusers"==d()?t(o):t(r,!1)})),M(e,a)};H(_,(t=>{n(),v(d()),h((()=>n()[d()].list.length>0||"onlineusers"===d()||"depgroups_stats"===d()))&&t(j)}));var k=B(_,2),L=e=>{var a=Mi(),i=B(G(a),1,!0);J(a),t((t=>q(i,t)),[()=>(s(),h((()=>s()("widget.items_appear_here"))))]),M(e,a)};H(k,(t=>{n(),v(d()),h((()=>0===n()[d()].list.length&&"onlineusers"!==d()&&"depgroups_stats"!==d()))&&t(L)})),J(a),M(e,a)};H(j,(t=>{v(_()),n(),v($t()),h((()=>!0===_()||!0!==n().toggleWidgetData[$t()]))&&t(k)})),J(a),t((()=>{ut(a,1,(v(yt()),v(z()),n(),v(d()),h((()=>(!1===yt()?"card card-dashboard":"")+" card-"+z()+" "+(n()[d()].list.length>0?"has-chats":""))))),U(a,"data-panel-id",Ht()||d())})),M(e,a)};H(Ft,(t=>{n(),v(d()),h((()=>!0===n().lhcCoreLoaded&&n()[d()]&&n()[d()].list))&&t(Ut)})),M(e,Qt);var Kt=D(qt);return r(),Kt}function Ji(t,e){return{update(e){let a=e=e.replaceAll("&nbsp;"," ").replaceAll("&amp;","&").replace(/<(b|i|u|strike)\sstyle=".*?">/g,"<$1>").replace(/<suggester.*?>.*?<\/suggester>/g,"").replace(/<span style=".*?">(.*?)<\/span>/g,"$1").replace(/<span>(.*?)<\/span>/g,"$1");"<br>"===(e=(e=(t=>{var e=document.createElement("div");return e.innerHTML=t.replaceAll("<br>","___BR___").replaceAll("\r\n","___BR___").replaceAll("\n","___BR___").replaceAll("<b>","___BLD___").replaceAll("</b>","___BLDC___").replaceAll("</i>","___ITAC___").replaceAll("<i>","___ITA___").replaceAll("</u>","___UNDC___").replaceAll("<u>","___UND___").replaceAll("<strike>","___STRIKE___").replaceAll("</strike>","___STRIKEC___").replaceAll("&gt;","___GT___").replaceAll("&lt;","___LT___"),e.innerText.replaceAll("___BR___","<br>").replaceAll("___BLD___","<b>").replaceAll("___BLDC___","</b>").replaceAll("___ITAC___","</i>").replaceAll("___ITA___","<i>").replaceAll("___UNDC___","</u>").replaceAll("___UND___","<u>").replaceAll("___STRIKE___","<strike>").replaceAll("___STRIKEC___","</strike>").replaceAll("___GT___","&gt;").replaceAll("___LT___","&lt;")})(e=(t=>{var e=document.createElement("textarea");return e.innerHTML=t.replaceAll("&gt;","___GT___").replaceAll("&lt;","___LT___"),e.value.replaceAll("___GT___","&gt;").replaceAll("___LT___","&lt;")})(e))).replace(/\u00a0/g," "))?t.innerHTML="":JSON.stringify(e.replace(/\s+/g,""))!=JSON.stringify(a.replace(/\s+/g,""))&&(t.innerHTML=e)}}}function qi(t,e,a,i,n){let s=a&&a.startOffset!=a.endOffset,o={b:"bold",i:"italic",u:"underline",s:"strikethrough"};o[t]?(!0===s&&Ki(a,i),document.execCommand(o[t],!1,null),i.focus()):(Ki(a,i),function(t,e){var a,i;if(window.getSelection&&(a=window.getSelection()).getRangeAt&&a.rangeCount){let n=(i=a.getRangeAt(0)).cloneContents();i.deleteContents(),i.insertNode(document.createTextNode(e)),i.insertNode(n),i.insertNode(document.createTextNode(t)),i.collapse(!1)}}("["+t+"]","[/"+e+"]")),s&&n.set(i.innerHTML)}function Qi(t){var e,a;(e=document.createRange()).selectNodeContents(t),e.collapse(!1),(a=window.getSelection()).removeAllRanges(),a.addRange(e)}function Fi(){if(window.getSelection){let t=window.getSelection();if(t.getRangeAt&&t.rangeCount){let e=t.getRangeAt(0);return e.startOffset!=e.endOffset}}return!1}function Ui(){if(window.getSelection){let t=window.getSelection();if(t.getRangeAt&&t.rangeCount)return t.getRangeAt(0)}else if(document.selection&&document.selection.createRange)return document.selection.createRange();return null}function Ki(t,e,a){if(t)if(window.getSelection){let e=window.getSelection();if(e.removeAllRanges(),e.addRange(t),a&&a.replace_from){t.setStart(t.startContainer,0),t.setEnd(t.endContainer,t.endOffset);let e=t.toString();-1!==e.lastIndexOf("#")&&(t.setStart(t.startContainer,e.lastIndexOf("#")),t.deleteContents())}}else document.selection&&t.select&&t.select();else Qi(e)}function zi(t,e,a,i,n){Ki(e,a,n),function(t){var e,a;if(window.getSelection){if((e=window.getSelection()).getRangeAt&&e.rangeCount){let i=(a=e.getRangeAt(0)).createContextualFragment(t);a.insertNode(i),a.collapse(!1)}}else document.selection&&document.selection.createRange&&(document.selection.createRange().text=t)}(t),i.set(a.innerHTML)}function Xi(t,e,a){t.stopPropagation(),t.preventDefault(),function(t){t=t.replaceAll("\r\n","\n");var e,a,i=t.split("\n");if(window.getSelection){if((e=window.getSelection()).getRangeAt&&e.rangeCount){(a=e.getRangeAt(0)).deleteContents();for(var n=i.length-1;n>=0;n--)n<i.length-1&&a.insertNode(document.createElement("br")),a.insertNode(document.createTextNode(i[n]));a.collapse(!1)}}else document.selection&&document.selection.createRange&&(document.selection.createRange().text=t)}((t.clipboardData||window.clipboardData).getData("text/plain")),a.set(e.innerHTML)}customElements.define("lhc-widget",C(Gi,{type:{},no_collapse:{},no_expand:{},show_username_title:{},hide_third_column:{},hide_2_column:{},hide_op_avatar:{},hide_ac_stats:{},hide_ac_sort:{},hide_ac_op_icon:{},custom_visitor_title:{},mh_widget:{},custom_visitor_icon:{},show_visitor_title:{},list_identifier:{},no_panel_id:{},custom_settings_url_icon:{},panel_list_identifier:{},sort_identifier:{},status_id:{},status_key:{},hide_header:{},hide_filter_options:{},show_department_title:{},show_subject_title:{},default_expand:{},show_username_always:{},show_always_subject:{},right_panel_mode:{},no_additional_column:{},override_item_open:{},no_chat_preview:{},default_sort:{},www_dir_flags:{},base_url:{},url:{},icon_class:{},card_icon:{},no_link:{},no_duration:{},no_counter:{},expand_identifier:{},custom_card_class:{},custom_title_class:{},custom_settings_url:{},additional_sort:{},data_panel_id:{},column_2_width:{},column_1_width:{},column_3_width:{},permissions:{},optionsPanel:{}},[],[],!1));var Yi=O("<div><!></div> <div> </div> <pre> </pre>",1),Zi=O('<div contenteditable="true"></div> <!>',1);function tn(e,a){j(a,!1);const i=()=>k(Z,"$html",s),n=()=>k(tt,"$history",s),[s,o]=$();let r=E(""),l=P(a,"host",12),c=P(a,"scope",12,"chat"),d=P(a,"record_id",12,"0"),_=P(a,"debug",12,!1),u=P(a,"warning_area",12,!1),g=P(a,"placeholder",12,""),b=P(a,"readonly",12,null),w=P(a,"whisper",12),x=P(a,"enable_canned_suggester",12),C=P(a,"disable_key_listeners",12),L=P(a,"data_rows_default",12,2),S=P(a,"disable_bb_bold",12,null),I=P(a,"disable_bb_underline",12,null),O=P(a,"disable_bb_italic",12,null);const F={"&amp;":"&","&lt;":"<","&gt;":">","<br>":"\n","<b>":"[b]","<i>":"[i]","</i>":"[/i]","</b>":"[/b]","<u>":"[u]","</u>":"[/u]","</strike>":"[/s]","<strike>":"[s]"},K={"\r\n":"","\n":"","<br>":"\n","<b>":"[b]","</b>":"[/b]","<i>":"[i]","</i>":"[/i]","<u>":"[u]","</u>":"[/u]","</strike>":"[/s]","<strike>":"[s]","&nbsp;":" ","&amp;":"&","&lt;":"<","&gt;":">"};let z=null,X=E(!1),Y=!1,Z=rt(""),tt=function(t){const{subscribe:e,set:a,update:i,get:n}=rt(t);return{subscribe:e,update:i,get:n,set:a,addOne:()=>i((t=>t+1)),reset:()=>a(0),goPrev:()=>i((e=>(e.index>0&&e.index--,t))),goNext:()=>i((e=>(e.index<e.history.length-1&&e.index++,t))),setCurrent:t=>i((e=>(e.current=t,e))),addHistory:t=>i((e=>("<br>"==t&&(t=""),e.current==t||(e.index!=e.history.length-1&&e.history.splice(e.index+1),e.history.length>=10&&e.history.shift(),e.history.push(t),e.index=e.history.length-1,e.current=t),e)))}}({index:0,current:"",history:[""]}),et=E(),at=!1,it=null,nt=500,st=!1;function ot(){return A(et)}function dt(t,e){R(X,!0),e&&(e.ignore_meta&&(Y=!0),e.convert_bbcode&&(t=_t(t))),Z.set(t.trim())}function _t(t){t=t.replaceAll("\r\n","\n");for(const[e,a]of Object.entries(F))t=t.replaceAll(a,e);return t=t.replace(/ {2,}/g,(t=>Array.from(t,((t,e)=>e%2==0?"&nbsp;":" ")).join(""))),t}function gt(t,e){R(X,!0),e&&(e.convert_bbcode&&(t=_t(t)),e.new_line&&""!==A(et).innerHTML&&(t="\n"+t)),zi(t,z,A(et),Z,e)}function pt(t){z=Ui(),function(t,e,a,i){if(e)if(window.getSelection){e.setStart(e.startContainer,0),e.setEnd(e.endContainer,e.endOffset),e.deleteContents();let a=e.createContextualFragment(t);e.insertNode(a),e.collapse(!1);let i=window.getSelection();i.removeAllRanges(),i.addRange(e)}else document.selection&&range.select&&range.select()}(t,z,A(et))}function ht(){let t=A(et).getElementsByTagName("suggester");for(const e of t)A(et).removeChild(e)}function vt(t){if(ht(),t&&!A(et).classList.contains("hide-suggester")&&"<br>"!=i().substr(i().length-4)){const e=document.createElement("template");e.innerHTML="<suggester style='color: #cecece; user-select: none' contentEditable=\"false\">"+t+"</suggester>",A(et).appendChild(e.content.firstChild)}}function ft(t,e){-1===["b","i","u","s","quote","youtube","html","code","fs10","fs11","fs12","fs13","fs14","fs15","fs16"].indexOf(t)&&0!==t.indexOf("color=")||qi(t,e,z,A(et),Z)}function bt(){return Wt(n().current).trim()}function wt(){return Wt(i().replace(/<suggester.*?>.*?<\/suggester>/g,"")).trim()}function kt(){setTimeout((()=>{Qi(A(et))}),1)}function Lt(){!0===st&&(clearTimeout(it),tt.addHistory(i().replace(/<suggester.*?>.*?<\/suggester>/g,"")),st=!1)}function Wt(t){t=function(t){var e=document.createElement("div");e.innerHTML=t;const a=["U","B","I","STRIKE","SPAN"],i={"font-style: italic":"i","font-weight: bold":"b","text-decoration: underline":"u","text-decoration: line-through":"strike"};return function t(e){Array.from(e.childNodes).forEach((n=>{if(n.nodeType===Node.ELEMENT_NODE&&a.includes(n.tagName)){let a=n.getAttribute("style");a&&Object.keys(i).forEach((t=>{if(a.includes(t)){const a=document.createElement(i[t]);n.removeAttribute("style");let s=n.cloneNode(!0);if("SPAN"!==n.tagName)a.appendChild(s);else for(;s.firstChild;)a.appendChild(s.firstChild);e.replaceChild(a,n),n=a}})),t(n)}}))}(e),e.innerHTML}(t),t=t.replace(/<(b|i|u|strike)\sstyle=".*?">/g,"<$1>").replace(/<span style=".*?">(.*?)<\/span>/g,"$1").replace(/<span>(.*?)<\/span>/g,"$1");for(const[e,a]of Object.entries(K))t=t.replaceAll(e,a);return t}function St(t){var e=!0;let a=!1;if(!C())if(!t.altKey||38!==t.keyCode&&40!==t.keyCode){if(b())return t.preventDefault(),void t.stopPropagation();if(d()&&lhinst.operatorTypingCallback(d()),t.ctrlKey)switch(t.keyCode){case 32:Qi(A(et)),z=Ui(),gt("&nbsp;"),e=!1;break;case 90:R(X,!0),Lt(),e=!1,tt.goPrev(),at=!0,Z.set(n().history[n().index]),kt(),at=!1;break;case 89:R(X,!0),Lt(),e=!1,at=!0,tt.goNext(),Z.set(n().history[n().index]),kt(),at=!1;break;case 66:S()?e=!1:!0===Fi()&&(nt=0,ft("b","b"),z=Ui(),e=!1);break;case 73:case 105:O()?e=!1:!0===Fi()&&(nt=0,ft("i","i"),z=Ui(),e=!1);break;case 85:case 117:I()?e=!1:!0===Fi()&&(nt=0,ft("u","u"),z=Ui(),e=!1)}else if(t.shiftKey){if(13===t.keyCode)a=!0}else if(13===t.keyCode){e=!1,Lt();let t=Wt(n().current).trim();t&&(ee.emitEvent("svelte_"+c()+"_"+d()+"_msg",[t]),lhinst.addmsgadmin(d()),ee.emitEvent("afterAdminMessageSent",[d()]))}else 38===t.keyCode&&(Lt(),lhinst.editPrevious(d()));!0===a||32===t.keyCode?(nt=0,R(X,!0)):nt=500,!1===e&&(t.preventDefault(),t.stopPropagation())}else ee.emitEvent("activateNextTab",[d(),38===t.keyCode])}function At(t){var e,a,i,n;(z=Ui(),!t||!t.keyCode||40!==t.keyCode&&37!==t.keyCode)?(R(X,!1),window.getSelection&&(e=window.getSelection()).getRangeAt&&e.rangeCount&&((a=e.getRangeAt(0)).startOffset!=a.endOffset&&R(X,!0),(i=document.createRange()).selectNodeContents(A(et)),i.setStart(a.endContainer,a.endOffset),(n=i.cloneContents()).lastElementChild&&"SUGGESTER"==n.lastElementChild.tagName&&n.removeChild(n.lastElementChild),!1===(0===n.textContent.length)&&R(X,!0))):R(X,!0)}function Et(){var t,e,a,i;return!!(window.getSelection&&(t=window.getSelection()).getRangeAt&&t.rangeCount)&&((e=t.getRangeAt(0)).startOffset==e.endOffset&&((a=document.createRange()).selectNodeContents(A(et)),a.setStart(e.endContainer,e.endOffset),(i=a.cloneContents()).lastElementChild&&"SUGGESTER"==i.lastElementChild.tagName&&i.removeChild(i.lastElementChild),i.textContent.length,!0))}function It(t){if(window.getSelection){var e=window.getSelection();if(e.rangeCount){let t=e.getRangeAt(0),a=document.createRange();a.selectNodeContents(A(et)),a.setStart(t.startContainer,0),a.setEnd(t.endContainer,t.endOffset);let i=a.cloneContents();return i.lastElementChild&&"SUGGESTER"==i.lastElementChild.tagName&&i.removeChild(i.lastElementChild),{caret:t.endOffset,content:i.textContent.replace(/\u00a0/g," "),full_content:A(et).textContent.replace(/\u00a0/g," ")}}}return{caret:0,content:"",full_content:A(et).textContent.replace(/\u00a0/g," ")}}function Tt(){Z.set(A(et).innerHTML)}function Dt(){ee.emitEvent("chatAreaFocused",[d()])}W((()=>{let t=document.getElementById("chat-tab-li-"+d());if(t&&t.firstChild&&t.firstChild.classList.contains("active")&&kt(A(et)),x())var e=new LHCCannedMessageAutoSuggest({textarea:A(et),chat_id:d(),uppercase_enabled:confLH.auto_uppercase});document.getElementById("fileupload-"+d())&&window["file_upload_"+d()]&&lhinst.addFileUpload(window["file_upload_"+d()]);var a=new ResizeObserver((function(){var t=document.getElementById("messagesBlock-"+d());t&&(t.scrollTop=t.scrollHeight)}));return a.observe(A(et)),ee.emitEvent("adminChatEditorLoaded",[d(),A(et)]),()=>{clearInterval(it),a.disconnect(),e.unbindEvents()}})),Z.subscribe((t=>{let e=t.replace(/<suggester.*?>.*?<\/suggester>/g,"");"<br>"===e&&(e="",lt(et,A(et).innerHTML="")),""===e?(l().removeAttribute("content_modified"),!1===Y?(l().removeAttribute("subjects_ids"),l().removeAttribute("canned_id")):Y=!1):l().setAttribute("content_modified",!0),!1===at?(st=!0,clearTimeout(it),it=setTimeout((()=>{st=!1,tt.addHistory(e)}),nt)):tt.setCurrent(e)}));var $t={getEditor:ot,setContent:dt,insertContent:gt,replaceRange:pt,removeSuggester:ht,setSuggester:vt,insertFormating:ft,getContent:bt,getContentLive:wt,setFocus:kt,isCursorAtEnd:Et,getCaretPositionAndContent:It,get host(){return l()},set host(t){l(t),V()},get scope(){return c()},set scope(t){c(t),V()},get record_id(){return d()},set record_id(t){d(t),V()},get debug(){return _()},set debug(t){_(t),V()},get warning_area(){return u()},set warning_area(t){u(t),V()},get placeholder(){return g()},set placeholder(t){g(t),V()},get readonly(){return b()},set readonly(t){b(t),V()},get whisper(){return w()},set whisper(t){w(t),V()},get enable_canned_suggester(){return x()},set enable_canned_suggester(t){x(t),V()},get disable_key_listeners(){return C()},set disable_key_listeners(t){C(t),V()},get data_rows_default(){return L()},set data_rows_default(t){L(t),V()},get disable_bb_bold(){return S()},set disable_bb_bold(t){S(t),V()},get disable_bb_underline(){return I()},set disable_bb_underline(t){I(t),V()},get disable_bb_italic(){return O()},set disable_bb_italic(t){O(t),V()}};T();var Rt=Zi(),Pt=N(Rt);let Ot;p((()=>Q("paste",Pt,(t=>{if(b())return t.preventDefault(),void t.stopPropagation();Xi(t,A(et),Z)})))),p((()=>Q("keydown",Pt,St))),p((()=>Q("click",Pt,At))),p((()=>Q("keyup",Pt,At))),p((()=>Q("focus",Pt,Dt))),p((()=>Q("focusout",Pt,At))),p((()=>jt("innerHTML",Pt,i,(t=>ct(Z,t))))),p((()=>Q("input",Pt,Tt))),function(t={},e,a,i){p((()=>{var i,n;return m((()=>{i=n,n=[],h((()=>{t!==a(...n)&&(e(t,...n),i&&Ct(a(...i),t)&&e(null,...i))}))})),()=>{y((()=>{n&&Ct(a(...n),t)&&e(null,...n)}))}}))}(Pt,(t=>R(et,t)),(()=>A(et))),p((()=>jt("textContent",Pt,(()=>A(r)),(t=>R(r,t))))),function(t,e,a){p((()=>{var i=h((()=>e(t,a?.())||{}));if(a&&i?.update){var n=!1,s={};m((()=>{var t=a();v(t),n&&f(s,t)&&(s=t,i.update(t))})),n=!0}if(i?.destroy)return()=>i.destroy()}))}(Pt,((t,e)=>Ji?.(t)),i);var Nt=B(Pt,2),Ht=e=>{var a=Yi(),n=N(a);yt(G(n),i),J(n);var s=B(n,2),o=G(s,!0);J(s);var l=B(s,2),c=G(l,!0);J(l),t((()=>{q(o,i()),q(c,A(r))})),M(e,a)};H(Nt,(t=>{_()&&t(Ht)})),t((()=>{U(Pt,"id","editor-"+d()),ut(Pt,1,"lhc-editor form-control form-control-sm form-send-textarea "+("1"===w()?" bg-light":"")+(!0===u()?" form-control-warning":"")+(A(X)?" hide-suggester":"")),U(Pt,"placeholder",g()),Ot=mt(Pt,"",Ot,{"min-height":27*L()+"px"})})),M(e,Rt),xt(a,"getEditor",ot),xt(a,"setContent",dt),xt(a,"insertContent",gt),xt(a,"replaceRange",pt),xt(a,"removeSuggester",ht),xt(a,"setSuggester",vt),xt(a,"insertFormating",ft),xt(a,"getContent",bt),xt(a,"getContentLive",wt),xt(a,"setFocus",kt),xt(a,"isCursorAtEnd",Et),xt(a,"getCaretPositionAndContent",It);var Mt=D($t);return o(),Mt}customElements.define("lhc-editor",C(tn,{host:{},scope:{},record_id:{},debug:{},warning_area:{},placeholder:{},readonly:{},whisper:{},enable_canned_suggester:{},disable_key_listeners:{},data_rows_default:{},disable_bb_bold:{},disable_bb_underline:{},disable_bb_italic:{}},[],["getEditor","setContent","insertContent","replaceRange","removeSuggester","setSuggester","insertFormating","getContent","getContentLive","setFocus","isCursorAtEnd","getCaretPositionAndContent"],!1,(t=>class extends t{constructor(){super(),this.host=this}})));var en=O('<div class="action-image protected-html" tabindex="0" role="button"><!></div>'),an=O('<div class="action-image protected-image clickable-reveal" tabindex="0" role="button"><img class="action-image img-fluid"/></div>'),nn=O('<div class="position-relative"><div class="action-image" tabindex="0" role="button"><img class="action-image img-fluid"/></div> <a class="hidden-download" target="_blank" rel="noreferrer"></a></div>'),sn=O('<span class="text-secondary"> </span>'),on=O('<button class="btn btn-secondary btn-xs"> </button>'),rn=O('<div class="text-muted p-2 border rounded"><i class="material-icons">info</i> <!></div>');function ln(e,a){j(a,!1);const i=()=>k(gt,"$t",n),[n,s]=$();let o,r=P(a,"host",12),l=P(a,"file_id",12),c=P(a,"hash",12),d=P(a,"title",12,""),_=P(a,"width",12,""),u=P(a,"height",12,""),g=P(a,"download_policy",12,0),p=P(a,"disable_zoom",12,"false"),m=E(!1),f=E(""),b=E(""),w=E(0),y="",x=E(""),C=E(!1),L=E(!1),S=E(""),I=E(""),O=E(0);const K=4;function z(){setTimeout((()=>{const t=document.querySelector(`#img-reveal-holder-${l()}`);t&&t.scrollIntoView({behavior:"smooth"})}),100)}function X(){if(A(C)&&!A(L))A(C)&&!A(L)&&(R(L,!0),R(f,window.WWW_DIR_JAVASCRIPT+"file/downloadfile/"+l()+"/"+c()),z());else if("true"!==p()&&window.lhinst&&window.lhinst.zoomImage){const t=document.querySelector(`#img-file-${l()}`);t&&window.lhinst.zoomImage(t)}}function Y(){A(w)>=K?R(b,i()("file.image_verification_failed")):(dt(w),fetch(window.WWW_DIR_JAVASCRIPT+"file/verifyaccess/"+l()+"/"+c(),{method:"GET",headers:{"Content-Type":"application/json"}}).then((t=>t.json())).then((t=>{const e=parseInt(g(),10);!0===t.verified?t.error_msg?(R(b,t.error_msg),tt()):2===e&&(t.protection_image||t.protection_html)?(R(b,i()("file.access_denied_view_image")),tt()):(R(m,!0),R(b,""),tt(),t.protection_image?(y=t.protection_image,R(C,!0),R(L,!1),R(f,y),R(I,t.btn_title)):t.protection_html?(R(x,t.protection_html),R(C,!0),R(L,!1),R(f,"")):R(f,window.WWW_DIR_JAVASCRIPT+"file/downloadfile/"+l()+"/"+c()),A(w)>1&&z()):A(w)<K?Z():R(b,i()("file.image_verification_failed"))})).catch((t=>{console.error("Verification request failed:",t),A(w)<K?Z():R(b,i()("file.image_verification_failed"))})))}function Z(){R(O,4),R(b,`${i()("file.verifying_image_access")} (${A(w)}/${K})`),o=setInterval((()=>{dt(O,-1),A(O)<=0&&(clearInterval(o),Y())}),1e3)}function tt(){o&&(clearInterval(o),o=null),R(O,0)}function et(){R(b,i()("file.requesting_reverification")),fetch(window.WWW_DIR_JAVASCRIPT+"file/verifyaccess/"+l()+"/"+c()+"/(reverify)/true",{method:"GET",headers:{"Content-Type":"application/json"}}).then((t=>t.json())).then((t=>{R(w,0),R(b,i()("file.verifying_image_access")),setTimeout((()=>{Y()}),1e3)})).catch((t=>{console.error("Reverification request failed:",t),R(b,i()("file.reverification_failed"))}))}W((()=>{if(l()&&c()){R(S,d()||"");const t=parseInt(g(),10);0===t?(R(m,!0),R(f,window.WWW_DIR_JAVASCRIPT+"file/downloadfile/"+l()+"/"+c())):1===t?(R(m,!1),R(w,0),R(b,i()("file.verifying_image_access")),Y()):2===t&&(R(m,!1),R(b,i()("file.checking_image_access")),Y())}return()=>{tt()}}));var at={get host(){return r()},set host(t){r(t),V()},get file_id(){return l()},set file_id(t){l(t),V()},get hash(){return c()},set hash(t){c(t),V()},get title(){return d()},set title(t){d(t),V()},get width(){return _()},set width(t){_(t),V()},get height(){return u()},set height(t){u(t),V()},get download_policy(){return g()},set download_policy(t){g(t),V()},get disable_zoom(){return p()},set disable_zoom(t){p(t),V()}};T();var it=F(),nt=N(it),st=e=>{var a=F(),n=N(a),s=e=>{var a=F(),n=N(a),s=e=>{var a=en();yt(G(a),(()=>A(x))),J(a),t((t=>U(a,"aria-label",t)),[()=>(i(),h((()=>i()("file.click_to_reveal"))))]),Q("click",a,X),M(e,a)},o=e=>{var a=an(),n=G(a);J(a),t((t=>{U(a,"aria-label-title",A(I)),U(a,"aria-label",t),U(n,"id",`img-file-${l()??""}`),U(n,"src",A(f)),U(n,"alt",A(S)),U(n,"title",A(S)),U(n,"width",_()||void 0),U(n,"height",u()||void 0)}),[()=>(i(),h((()=>i()("file.click_to_reveal"))))]),Q("click",a,X),M(e,a)};H(n,(t=>{A(x)?t(s):t(o,!1)})),M(e,a)},o=e=>{var a=nn(),i=G(a),n=G(i);J(i);var s=B(i,2);J(a),t((()=>{U(n,"id",`img-file-${l()??""}`),U(n,"src",A(f)),U(n,"alt",A(S)),U(n,"title",A(S)),U(n,"width",_()||void 0),U(n,"height",u()||void 0),U(s,"href",(v(l()),v(c()),h((()=>window.WWW_DIR_JAVASCRIPT+"file/downloadfile/"+l()+"/"+c()+"/(inline)/true"))))})),Q("click",i,X),M(e,a)};H(n,(t=>{A(C)&&!A(L)?t(s):t(o,!1)})),M(e,a)},ot=e=>{var a=F(),n=N(a),s=e=>{var a=rn(),n=B(G(a)),s=B(n),o=e=>{var a=sn(),n=G(a);J(a),t((t=>q(n,`(${t??""} ${A(O)??""} s.)`)),[()=>(i(),h((()=>i()("file.next_attempt_in"))))]),M(e,a)},r=e=>{var a=F(),n=N(a),s=e=>{var a=on(),n=G(a,!0);J(a),t((t=>q(n,t)),[()=>(i(),h((()=>i()("file.reverify_image"))))]),Q("click",a,et),M(e,a)};H(n,(t=>{A(w)>=K&&t(s)}),!0),M(e,a)};H(s,(t=>{A(O)>0?t(o):t(r,!1)})),J(a),t((()=>q(n,` ${A(b)??""} `))),M(e,a)};H(n,(t=>{!A(m)&&A(b)&&t(s)}),!0),M(e,a)};H(nt,(t=>{A(m)&&(A(f)||A(x))?t(st):t(ot,!1)})),M(e,it);var rt=D(at);return s(),rt}customElements.define("lhc-image",C(ln,{host:{},file_id:{},hash:{},title:{},width:{},height:{},download_policy:{},disable_zoom:{}},[],[],!1,(t=>class extends t{constructor(){super(),this.host=this}})));export{Gt as AudioChecker,qt as BrowserNotification,zt as ChangeAlwaysOnline,Ut as ChangeOnlineStatus,Yt as ChangeVisibilityMode,ae as ChatsCounter,_e as ConnectionStatus,kt as LHC,tn as LHCEditor,ln as LHCImage,Vt as LHCStatus,Gi as LHCWidget,te as OpenChat};
//# sourceMappingURL=main.js.map
